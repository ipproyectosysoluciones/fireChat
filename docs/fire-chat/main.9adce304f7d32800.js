"use strict";var Yk=Object.defineProperty,Qk=Object.defineProperties,Jk=Object.getOwnPropertyDescriptors,$x=Object.getOwnPropertySymbols,Xk=Object.prototype.hasOwnProperty,e1=Object.prototype.propertyIsEnumerable,Hx=(tt,_e,N)=>_e in tt?Yk(tt,_e,{enumerable:!0,configurable:!0,writable:!0,value:N}):tt[_e]=N,Gx=(tt,_e)=>{for(var N in _e||(_e={}))Xk.call(_e,N)&&Hx(tt,N,_e[N]);if($x)for(var N of $x(_e))e1.call(_e,N)&&Hx(tt,N,_e[N]);return tt},zx=(tt,_e)=>Qk(tt,Jk(_e));(self.webpackChunkfireChat=self.webpackChunkfireChat||[]).push([[179],{2011:(tt,_e,N)=>{N.d(_e,{Dh:()=>ge,GT:()=>pe,Ot:()=>se,cc:()=>Ie,hO:()=>Re,on:()=>j,pX:()=>he,xv:()=>ce});var g=N(5e3),Q=N(127),k=N(880);tt=N.hmd(tt);const ne=["ngOnDestroy"],he=(le,ot,nt,xe={})=>new Proxy(le,{get:(we,Ce)=>nt.runOutsideAngular(()=>{var $e;if(le[Ce])return!(null===($e=null==xe?void 0:xe.spy)||void 0===$e)&&$e.get&&xe.spy.get(Ce,le[Ce]),le[Ce];if(ne.indexOf(Ce)>-1)return()=>{};const Fe=ot.toPromise().then(U=>{const ye=U&&U[Ce];return"function"==typeof ye?ye.bind(U):ye&&ye.then?ye.then(Z=>nt.run(()=>Z)):nt.run(()=>ye)});return new Proxy(()=>{},{get:(U,ye)=>Fe[ye],apply:(U,ye,Z)=>Fe.then(J=>{var re;const te=J&&J(...Z);return!(null===(re=null==xe?void 0:xe.spy)||void 0===re)&&re.apply&&xe.spy.apply(Ce,Z,te),te})})})}),pe=(le,ot)=>{ot.forEach(nt=>{Object.getOwnPropertyNames(nt.prototype||nt).forEach(xe=>{Object.defineProperty(le.prototype,xe,Object.getOwnPropertyDescriptor(nt.prototype||nt,xe))})})};class se{constructor(ot){return ot}}const ge=new g.OlP("angularfire2.app.options"),ce=new g.OlP("angularfire2.app.name");function j(le,ot,nt){const we="object"==typeof nt&&nt||{};we.name=we.name||"string"==typeof nt&&nt||"[DEFAULT]";const $e=Q.Z.apps.filter(Fe=>Fe&&Fe.name===we.name)[0]||ot.runOutsideAngular(()=>Q.Z.initializeApp(le,we));try{JSON.stringify(le)!==JSON.stringify($e.options)&&H("error",`${$e.name} Firebase App already initialized with different options${tt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Fe){}return new se($e)}const H=(le,...ot)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[le](...ot)},Y={provide:se,useFactory:j,deps:[ge,g.R0b,[new g.FiY,ce]]};let Re=(()=>{class le{constructor(nt){Q.Z.registerVersion("angularfire",k.q4.full,"core"),Q.Z.registerVersion("angularfire",k.q4.full,"app-compat"),Q.Z.registerVersion("angular",g.q4F.full,nt.toString())}static initializeApp(nt,xe){return{ngModule:le,providers:[{provide:ge,useValue:nt},{provide:ce,useValue:xe}]}}}return le.\u0275fac=function(nt){return new(nt||le)(g.LFG(g.Lbi))},le.\u0275mod=g.oAB({type:le}),le.\u0275inj=g.cJS({providers:[Y]}),le})();function Ie(le,ot,nt,xe,we){const[,Ce,$e]=globalThis.\u0275AngularfireInstanceCache.find(Fe=>Fe[0]===le)||[];if(Ce)return function De(le,ot){try{return le.toString()===ot.toString()}catch(nt){return le===ot}}(we,$e)||(me("error",`${ot} was already initialized on the ${nt} Firebase App with different settings.${Ye?" You may need to reload as Firebase is not HMR aware.":""}`),me("warn",{is:we,was:$e})),Ce;{const Fe=xe();return globalThis.\u0275AngularfireInstanceCache.push([le,Fe,we]),Fe}}const Ye=!!tt.hot,me=(le,...ot)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[le](...ot)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},880:(tt,_e,N)=>{N.d(_e,{q4:()=>vu,iC:()=>wu,HU:()=>zl,vb:()=>ga,JM:()=>$n,nk:()=>ly});var g=N(5e3),Q=N(5867),k=N(5861),ne=N(9681),he=N(2090),pe=N(4859),se=N(1877);N(2833);const ce="@firebase/remote-config",j="0.3.15",Ie=new he.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class at{constructor(O,W,ae,ke){this.client=O,this.storage=W,this.storageCache=ae,this.logger=ke}isCachedDataFresh(O,W){if(!W)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ae=Date.now()-W,ke=ae<=O;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ae}. Cache max age millis (minimumFetchIntervalMillis setting): ${O}. Is cache hit: ${ke}.`),ke}fetch(O){var W=this;return(0,k.Z)(function*(){const[ae,ke]=yield Promise.all([W.storage.getLastSuccessfulFetchTimestampMillis(),W.storage.getLastSuccessfulFetchResponse()]);if(ke&&W.isCachedDataFresh(O.cacheMaxAgeMillis,ae))return ke;O.eTag=ke&&ke.eTag;const Ge=yield W.client.fetch(O),lt=[W.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ge.status&&lt.push(W.storage.setLastSuccessfulFetchResponse(Ge)),yield Promise.all(lt),Ge})()}}function Zt(x=navigator){return x.languages&&x.languages[0]||x.language}class Nt{constructor(O,W,ae,ke,Ge,lt){this.firebaseInstallations=O,this.sdkVersion=W,this.namespace=ae,this.projectId=ke,this.apiKey=Ge,this.appId=lt}fetch(O){var W=this;return(0,k.Z)(function*(){var ae,ke,Ge;const[lt,Jt]=yield Promise.all([W.firebaseInstallations.getId(),W.firebaseInstallations.getToken()]),Te=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${W.projectId}/namespaces/${W.namespace}:fetch?key=${W.apiKey}`,gt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":O.eTag||"*"},kt={sdk_version:W.sdkVersion,app_instance_id:lt,app_instance_id_token:Jt,app_id:W.appId,language_code:Zt()},zi={method:"POST",headers:gt,body:JSON.stringify(kt)},On=fetch(Te,zi),bo=new Promise((Is,Ds)=>{O.signal.addEventListener(()=>{const To=new Error("The operation was aborted.");To.name="AbortError",Ds(To)})});let Mi;try{yield Promise.race([On,bo]),Mi=yield On}catch(Is){let Ds="fetch-client-network";throw"AbortError"===(null===(ae=Is)||void 0===ae?void 0:ae.name)&&(Ds="fetch-timeout"),Ie.create(Ds,{originalErrorMessage:null===(ke=Is)||void 0===ke?void 0:ke.message})}let xr=Mi.status;const ya=Mi.headers.get("ETag")||void 0;let Co,Es;if(200===Mi.status){let Is;try{Is=yield Mi.json()}catch(Ds){throw Ie.create("fetch-client-parse",{originalErrorMessage:null===(Ge=Ds)||void 0===Ge?void 0:Ge.message})}Co=Is.entries,Es=Is.state}if("INSTANCE_STATE_UNSPECIFIED"===Es?xr=500:"NO_CHANGE"===Es?xr=304:("NO_TEMPLATE"===Es||"EMPTY_CONFIG"===Es)&&(Co={}),304!==xr&&200!==xr)throw Ie.create("fetch-status",{httpStatus:xr});return{status:xr,eTag:ya,config:Co}})()}}class Rn{constructor(O,W){this.client=O,this.storage=W}fetch(O){var W=this;return(0,k.Z)(function*(){const ae=(yield W.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return W.attemptFetch(O,ae)})()}attemptFetch(O,{throttleEndTimeMillis:W,backoffCount:ae}){var ke=this;return(0,k.Z)(function*(){yield function He(x,O){return new Promise((W,ae)=>{const ke=Math.max(O-Date.now(),0),Ge=setTimeout(W,ke);x.addEventListener(()=>{clearTimeout(Ge),ae(Ie.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}(O.signal,W);try{const Ge=yield ke.client.fetch(O);return yield ke.storage.deleteThrottleMetadata(),Ge}catch(Ge){if(!function sn(x){if(!(x instanceof he.ZR&&x.customData))return!1;const O=Number(x.customData.httpStatus);return 429===O||500===O||503===O||504===O}(Ge))throw Ge;const lt={throttleEndTimeMillis:Date.now()+(0,he.$s)(ae),backoffCount:ae+1};return yield ke.storage.setThrottleMetadata(lt),ke.attemptFetch(O,lt)}})()}}class Gn{constructor(O,W,ae,ke,Ge){this.app=O,this._client=W,this._storageCache=ae,this._storage=ke,this._logger=Ge,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function vt(x,O){var W;const ae=x.target.error||void 0;return Ie.create(O,{originalErrorMessage:ae&&(null===(W=ae)||void 0===W?void 0:W.message)})}const zt="app_namespace_store";class In{constructor(O,W,ae,ke=function or(){return new Promise((x,O)=>{var W;try{const ae=indexedDB.open("firebase_remote_config",1);ae.onerror=ke=>{O(vt(ke,"storage-open"))},ae.onsuccess=ke=>{x(ke.target.result)},ae.onupgradeneeded=ke=>{0===ke.oldVersion&&ke.target.result.createObjectStore(zt,{keyPath:"compositeKey"})}}catch(ae){O(Ie.create("storage-open",{originalErrorMessage:null===(W=ae)||void 0===W?void 0:W.message}))}})}()){this.appId=O,this.appName=W,this.namespace=ae,this.openDbPromise=ke}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(O){return this.set("last_fetch_status",O)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(O){return this.set("last_successful_fetch_timestamp_millis",O)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(O){return this.set("last_successful_fetch_response",O)}getActiveConfig(){return this.get("active_config")}setActiveConfig(O){return this.set("active_config",O)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(O){return this.set("active_config_etag",O)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(O){return this.set("throttle_metadata",O)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(O){var W=this;return(0,k.Z)(function*(){const ae=yield W.openDbPromise;return new Promise((ke,Ge)=>{var lt;const Wn=ae.transaction([zt],"readonly").objectStore(zt),Te=W.createCompositeKey(O);try{const gt=Wn.get(Te);gt.onerror=kt=>{Ge(vt(kt,"storage-get"))},gt.onsuccess=kt=>{const zi=kt.target.result;ke(zi?zi.value:void 0)}}catch(gt){Ge(Ie.create("storage-get",{originalErrorMessage:null===(lt=gt)||void 0===lt?void 0:lt.message}))}})})()}set(O,W){var ae=this;return(0,k.Z)(function*(){const ke=yield ae.openDbPromise;return new Promise((Ge,lt)=>{var Jt;const Te=ke.transaction([zt],"readwrite").objectStore(zt),gt=ae.createCompositeKey(O);try{const kt=Te.put({compositeKey:gt,value:W});kt.onerror=zi=>{lt(vt(zi,"storage-set"))},kt.onsuccess=()=>{Ge()}}catch(kt){lt(Ie.create("storage-set",{originalErrorMessage:null===(Jt=kt)||void 0===Jt?void 0:Jt.message}))}})})()}delete(O){var W=this;return(0,k.Z)(function*(){const ae=yield W.openDbPromise;return new Promise((ke,Ge)=>{var lt;const Wn=ae.transaction([zt],"readwrite").objectStore(zt),Te=W.createCompositeKey(O);try{const gt=Wn.delete(Te);gt.onerror=kt=>{Ge(vt(kt,"storage-delete"))},gt.onsuccess=()=>{ke()}}catch(gt){Ge(Ie.create("storage-delete",{originalErrorMessage:null===(lt=gt)||void 0===lt?void 0:lt.message}))}})})()}createCompositeKey(O){return[this.appId,this.appName,this.namespace,O].join()}}class Kr{constructor(O){this.storage=O}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var O=this;return(0,k.Z)(function*(){const W=O.storage.getLastFetchStatus(),ae=O.storage.getLastSuccessfulFetchTimestampMillis(),ke=O.storage.getActiveConfig(),Ge=yield W;Ge&&(O.lastFetchStatus=Ge);const lt=yield ae;lt&&(O.lastSuccessfulFetchTimestampMillis=lt);const Jt=yield ke;Jt&&(O.activeConfig=Jt)})()}setLastFetchStatus(O){return this.lastFetchStatus=O,this.storage.setLastFetchStatus(O)}setLastSuccessfulFetchTimestampMillis(O){return this.lastSuccessfulFetchTimestampMillis=O,this.storage.setLastSuccessfulFetchTimestampMillis(O)}setActiveConfig(O){return this.activeConfig=O,this.storage.setActiveConfig(O)}}function Ti(){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,k.Z)(function*(){if(!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch(x){return!1}})).apply(this,arguments)}!function Yn(){(0,ne._registerComponent)(new pe.wA("remote-config",function x(O,{instanceIdentifier:W}){const ae=O.getProvider("app").getImmediate(),ke=O.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Ie.create("registration-window");if(!(0,he.hl)())throw Ie.create("indexed-db-unavailable");const{projectId:Ge,apiKey:lt,appId:Jt}=ae.options;if(!Ge)throw Ie.create("registration-project-id");if(!lt)throw Ie.create("registration-api-key");if(!Jt)throw Ie.create("registration-app-id");const Wn=new In(Jt,ae.name,W=W||"firebase"),Te=new Kr(Wn),gt=new se.Yd(ce);gt.logLevel=se.in.ERROR;const kt=new Nt(ke,ne.SDK_VERSION,W,Ge,lt,Jt),zi=new Rn(kt,Wn),On=new at(zi,Wn,Te,gt),bo=new Gn(ae,On,Te,Wn,gt);return function $e(x){const O=(0,he.m9)(x);O._initializePromise||(O._initializePromise=O._storageCache.loadFromStorage().then(()=>{O._isInitializationComplete=!0}))}(bo),bo},"PUBLIC").setMultipleInstances(!0)),(0,ne.registerVersion)(ce,j),(0,ne.registerVersion)(ce,j,"esm2017")}();var yn=N(8766);const ri="/firebase-messaging-sw.js",Dn="/firebase-cloud-messaging-push-scope",Tr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",bn="google.c.a.c_id",Fn="google.c.a.c_l",tn="google.c.a.ts",ft="google.c.a.e";var Lt=(()=>{return(x=Lt||(Lt={})).PUSH_RECEIVED="push-received",x.NOTIFICATION_CLICKED="notification-clicked",Lt;var x})();function hn(x){const O=new Uint8Array(x);return btoa(String.fromCharCode(...O)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function jn(x){const W=(x+"=".repeat((4-x.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ae=atob(W),ke=new Uint8Array(ae.length);for(let Ge=0;Ge<ae.length;++Ge)ke[Ge]=ae.charCodeAt(Ge);return ke}const er="fcm_token_details_db",ii="fcm_token_object_Store";function Yt(x){return gr.apply(this,arguments)}function gr(){return gr=(0,k.Z)(function*(x){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ge=>Ge.name).includes(er))return null;let O=null;return(yield(0,yn.X3)(er,5,{upgrade:(ae=(0,k.Z)(function*(ke,Ge,lt,Jt){var Wn;if(Ge<2||!ke.objectStoreNames.contains(ii))return;const Te=Jt.objectStore(ii),gt=yield Te.index("fcmSenderId").get(x);if(yield Te.clear(),gt)if(2===Ge){const kt=gt;if(!kt.auth||!kt.p256dh||!kt.endpoint)return;O={token:kt.fcmToken,createTime:null!==(Wn=kt.createTime)&&void 0!==Wn?Wn:Date.now(),subscriptionOptions:{auth:kt.auth,p256dh:kt.p256dh,endpoint:kt.endpoint,swScope:kt.swScope,vapidKey:"string"==typeof kt.vapidKey?kt.vapidKey:hn(kt.vapidKey)}}}else if(3===Ge){const kt=gt;O={token:kt.fcmToken,createTime:kt.createTime,subscriptionOptions:{auth:hn(kt.auth),p256dh:hn(kt.p256dh),endpoint:kt.endpoint,swScope:kt.swScope,vapidKey:hn(kt.vapidKey)}}}else if(4===Ge){const kt=gt;O={token:kt.fcmToken,createTime:kt.createTime,subscriptionOptions:{auth:hn(kt.auth),p256dh:hn(kt.p256dh),endpoint:kt.endpoint,swScope:kt.swScope,vapidKey:hn(kt.vapidKey)}}}}),function(Ge,lt,Jt,Wn){return ae.apply(this,arguments)})})).close(),yield(0,yn.Lj)(er),yield(0,yn.Lj)("fcm_vapid_details_db"),yield(0,yn.Lj)("undefined"),Qt(O)?O:null;var ae}),gr.apply(this,arguments)}function Qt(x){if(!x||!x.subscriptionOptions)return!1;const{subscriptionOptions:O}=x;return"number"==typeof x.createTime&&x.createTime>0&&"string"==typeof x.token&&x.token.length>0&&"string"==typeof O.auth&&O.auth.length>0&&"string"==typeof O.p256dh&&O.p256dh.length>0&&"string"==typeof O.endpoint&&O.endpoint.length>0&&"string"==typeof O.swScope&&O.swScope.length>0&&"string"==typeof O.vapidKey&&O.vapidKey.length>0}const Je="firebase-messaging-store";let Ae=null;function et(){return Ae||(Ae=(0,yn.X3)("firebase-messaging-database",1,{upgrade:(x,O)=>{0===O&&x.createObjectStore(Je)}})),Ae}function _t(x){return Et.apply(this,arguments)}function Et(){return(Et=(0,k.Z)(function*(x){const O=$(x),ae=yield(yield et()).transaction(Je).objectStore(Je).get(O);if(ae)return ae;{const ke=yield Yt(x.appConfig.senderId);if(ke)return yield Pt(x,ke),ke}})).apply(this,arguments)}function Pt(x,O){return B.apply(this,arguments)}function B(){return(B=(0,k.Z)(function*(x,O){const W=$(x),ke=(yield et()).transaction(Je,"readwrite");return yield ke.objectStore(Je).put(O,W),yield ke.done,O})).apply(this,arguments)}function V(x){return R.apply(this,arguments)}function R(){return(R=(0,k.Z)(function*(x){const O=$(x),ae=(yield et()).transaction(Je,"readwrite");yield ae.objectStore(Je).delete(O),yield ae.done})).apply(this,arguments)}function $({appConfig:x}){return x.appId}const ie=new he.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ee(x,O){return ze.apply(this,arguments)}function ze(){return(ze=(0,k.Z)(function*(x,O){var W;const ae=yield Nn(x),ke=mr(O),Ge={method:"POST",headers:ae,body:JSON.stringify(ke)};let lt;try{lt=yield(yield fetch(qt(x.appConfig),Ge)).json()}catch(Jt){throw ie.create("token-subscribe-failed",{errorInfo:null===(W=Jt)||void 0===W?void 0:W.toString()})}if(lt.error)throw ie.create("token-subscribe-failed",{errorInfo:lt.error.message});if(!lt.token)throw ie.create("token-subscribe-no-token");return lt.token})).apply(this,arguments)}function it(x,O){return wt.apply(this,arguments)}function wt(){return(wt=(0,k.Z)(function*(x,O){var W;const ae=yield Nn(x),ke=mr(O.subscriptionOptions),Ge={method:"PATCH",headers:ae,body:JSON.stringify(ke)};let lt;try{lt=yield(yield fetch(`${qt(x.appConfig)}/${O.token}`,Ge)).json()}catch(Jt){throw ie.create("token-update-failed",{errorInfo:null===(W=Jt)||void 0===W?void 0:W.toString()})}if(lt.error)throw ie.create("token-update-failed",{errorInfo:lt.error.message});if(!lt.token)throw ie.create("token-update-no-token");return lt.token})).apply(this,arguments)}function Ut(x,O){return ut.apply(this,arguments)}function ut(){return(ut=(0,k.Z)(function*(x,O){var W;const ke={method:"DELETE",headers:yield Nn(x)};try{const lt=yield(yield fetch(`${qt(x.appConfig)}/${O}`,ke)).json();if(lt.error)throw ie.create("token-unsubscribe-failed",{errorInfo:lt.error.message})}catch(Ge){throw ie.create("token-unsubscribe-failed",{errorInfo:null===(W=Ge)||void 0===W?void 0:W.toString()})}})).apply(this,arguments)}function qt({projectId:x}){return`https://fcmregistrations.googleapis.com/v1/projects/${x}/registrations`}function Nn(x){return cn.apply(this,arguments)}function cn(){return(cn=(0,k.Z)(function*({appConfig:x,installations:O}){const W=yield O.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":x.apiKey,"x-goog-firebase-installations-auth":`FIS ${W}`})})).apply(this,arguments)}function mr({p256dh:x,auth:O,endpoint:W,vapidKey:ae}){const ke={web:{endpoint:W,auth:O,p256dh:x}};return ae!==Tr&&(ke.web.applicationPubKey=ae),ke}const yr=6048e5;function qe(x){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,k.Z)(function*(x){const O=yield gn(x.swRegistration,x.vapidKey),W={vapidKey:x.vapidKey,swScope:x.swRegistration.scope,endpoint:O.endpoint,auth:hn(O.getKey("auth")),p256dh:hn(O.getKey("p256dh"))},ae=yield _t(x.firebaseDependencies);if(ae){if(yt(ae.subscriptionOptions,W))return Date.now()>=ae.createTime+yr?K(x,{token:ae.token,createTime:Date.now(),subscriptionOptions:W}):ae.token;try{yield Ut(x.firebaseDependencies,ae.token)}catch(ke){console.warn(ke)}return Pe(x.firebaseDependencies,W)}return Pe(x.firebaseDependencies,W)})).apply(this,arguments)}function vn(x){return ur.apply(this,arguments)}function ur(){return(ur=(0,k.Z)(function*(x){const O=yield _t(x.firebaseDependencies);O&&(yield Ut(x.firebaseDependencies,O.token),yield V(x.firebaseDependencies));const W=yield x.swRegistration.pushManager.getSubscription();return!W||W.unsubscribe()})).apply(this,arguments)}function K(x,O){return ue.apply(this,arguments)}function ue(){return(ue=(0,k.Z)(function*(x,O){try{const W=yield it(x.firebaseDependencies,O),ae=Object.assign(Object.assign({},O),{token:W,createTime:Date.now()});return yield Pt(x.firebaseDependencies,ae),W}catch(W){throw yield vn(x),W}})).apply(this,arguments)}function Pe(x,O){return We.apply(this,arguments)}function We(){return(We=(0,k.Z)(function*(x,O){const ae={token:yield Ee(x,O),createTime:Date.now(),subscriptionOptions:O};return yield Pt(x,ae),ae.token})).apply(this,arguments)}function gn(x,O){return en.apply(this,arguments)}function en(){return(en=(0,k.Z)(function*(x,O){return(yield x.pushManager.getSubscription())||x.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:jn(O)})})).apply(this,arguments)}function yt(x,O){return O.vapidKey===x.vapidKey&&O.endpoint===x.endpoint&&O.auth===x.auth&&O.p256dh===x.p256dh}function Cn(x){const O={from:x.from,collapseKey:x.collapse_key,messageId:x.fcmMessageId};return function Vr(x,O){if(!O.notification)return;x.notification={};const W=O.notification.title;W&&(x.notification.title=W);const ae=O.notification.body;ae&&(x.notification.body=ae);const ke=O.notification.image;ke&&(x.notification.image=ke);const Ge=O.notification.icon;Ge&&(x.notification.icon=Ge)}(O,x),function lr(x,O){!O.data||(x.data=O.data)}(O,x),function gi(x,O){var W,ae,ke,Ge,lt;if(!(O.fcmOptions||null!==(W=O.notification)&&void 0!==W&&W.click_action))return;x.fcmOptions={};const Jt=null!==(ke=null===(ae=O.fcmOptions)||void 0===ae?void 0:ae.link)&&void 0!==ke?ke:null===(Ge=O.notification)||void 0===Ge?void 0:Ge.click_action;Jt&&(x.fcmOptions.link=Jt);const Wn=null===(lt=O.fcmOptions)||void 0===lt?void 0:lt.analytics_label;Wn&&(x.fcmOptions.analyticsLabel=Wn)}(O,x),O}function tr(x){return"object"==typeof x&&!!x&&bn in x}function ms(x,O){const W=[];for(let ae=0;ae<x.length;ae++)W.push(x.charAt(ae)),ae<O.length&&W.push(O.charAt(ae));return W.join("")}function Zr(x){return ie.create("missing-app-config-values",{valueName:x})}ms("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ms("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Hi{constructor(O,W,ae){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ke=function $i(x){if(!x||!x.options)throw Zr("App Configuration Object");if(!x.name)throw Zr("App Name");const O=["projectId","apiKey","appId","messagingSenderId"],{options:W}=x;for(const ae of O)if(!W[ae])throw Zr(ae);return{appName:x.name,projectId:W.projectId,apiKey:W.apiKey,appId:W.appId,senderId:W.messagingSenderId}}(O);this.firebaseDependencies={app:O,appConfig:ke,installations:W,analyticsProvider:ae}}_delete(){return Promise.resolve()}}function ys(x){return fn.apply(this,arguments)}function fn(){return(fn=(0,k.Z)(function*(x){var O;try{x.swRegistration=yield navigator.serviceWorker.register(ri,{scope:Dn}),x.swRegistration.update().catch(()=>{})}catch(W){throw ie.create("failed-service-worker-registration",{browserErrorMessage:null===(O=W)||void 0===O?void 0:O.message})}})).apply(this,arguments)}function Fl(x,O){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,k.Z)(function*(x,O){if(!O&&!x.swRegistration&&(yield ys(x)),O||!x.swRegistration){if(!(O instanceof ServiceWorkerRegistration))throw ie.create("invalid-sw-registration");x.swRegistration=O}})).apply(this,arguments)}function Sr(x,O){return cr.apply(this,arguments)}function cr(){return(cr=(0,k.Z)(function*(x,O){O?x.vapidKey=O:x.vapidKey||(x.vapidKey=Tr)})).apply(this,arguments)}function ns(){return(ns=(0,k.Z)(function*(x,O){if(!navigator)throw ie.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ie.create("permission-blocked");return yield Sr(x,null==O?void 0:O.vapidKey),yield Fl(x,null==O?void 0:O.serviceWorkerRegistration),qe(x)})).apply(this,arguments)}function la(x,O,W){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,k.Z)(function*(x,O,W){const ae=Ll(O);(yield x.firebaseDependencies.analyticsProvider.get()).logEvent(ae,{message_id:W[bn],message_name:W[Fn],message_time:W[tn],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ll(x){switch(x){case Lt.NOTIFICATION_CLICKED:return"notification_open";case Lt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function mu(){return(mu=(0,k.Z)(function*(x,O){const W=O.data;if(!W.isFirebaseMessaging)return;x.onMessageHandler&&W.messageType===Lt.PUSH_RECEIVED&&("function"==typeof x.onMessageHandler?x.onMessageHandler(Cn(W)):x.onMessageHandler.next(Cn(W)));const ae=W.data;tr(ae)&&"1"===ae[ft]&&(yield la(x,W.messageType,ae))})).apply(this,arguments)}const ca="@firebase/messaging",nr=x=>{const O=new Hi(x.getProvider("app").getImmediate(),x.getProvider("installations-internal").getImmediate(),x.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",W=>function Vl(x,O){return mu.apply(this,arguments)}(O,W)),O},Ul=x=>{const O=x.getProvider("messaging").getImmediate();return{getToken:ae=>function Hs(x,O){return ns.apply(this,arguments)}(O,ae)}};function Si(){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,k.Z)(function*(){try{yield(0,he.eu)()}catch(x){return!1}return"undefined"!=typeof window&&(0,he.hl)()&&(0,he.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function dp(){(0,ne._registerComponent)(new pe.wA("messaging",nr,"PUBLIC")),(0,ne._registerComponent)(new pe.wA("messaging-internal",Ul,"PRIVATE")),(0,ne.registerVersion)(ca,"0.11.0"),(0,ne.registerVersion)(ca,"0.11.0","esm2017")}();var rs=N(7982),yu=N(4408),ha=N(7565);const Ai=new class uy extends ha.v{}(class hp extends yu.o{constructor(O,W){super(O,W),this.scheduler=O,this.work=W}schedule(O,W=0){return W>0?super.schedule(O,W):(this.delay=W,this.state=O,this.scheduler.flush(this),this)}execute(O,W){return W>0||this.closed?super.execute(O,W):this._execute(O,W)}requestAsyncId(O,W,ae=0){return null!=ae&&ae>0||null==ae&&this.delay>0?super.requestAsyncId(O,W,ae):(O.flush(this),0)}});var ss=N(4986),vs=N(8505),fa=N(9468),pa=N(5363);const vu=new g.GfV("7.4.1"),_u="__angularfire_symbol__analyticsIsSupportedValue",os="__angularfire_symbol__analyticsIsSupported",Gs="__angularfire_symbol__remoteConfigIsSupportedValue",zs="__angularfire_symbol__remoteConfigIsSupported",Ar="__angularfire_symbol__messagingIsSupportedValue",Ws="__angularfire_symbol__messagingIsSupported";globalThis[os]||(globalThis[os]=(0,rs.Gb)().then(x=>globalThis[_u]=x).catch(()=>globalThis[_u]=!1)),globalThis[Ws]||(globalThis[Ws]=Si().then(x=>globalThis[Ar]=x).catch(()=>globalThis[Ar]=!1)),globalThis[zs]||(globalThis[zs]=Ti().then(x=>globalThis[Gs]=x).catch(()=>globalThis[Gs]=!1));const ly={async:()=>globalThis[os],sync:()=>{const x=globalThis[_u];if(void 0===x)throw new Error((x=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${x} in the constructor, first ensure that ${x} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${x})\`.`)("Analytics"));return x}};function $n(x,O,W){if(O){if(1===O.length)return O[0];const Ge=O.filter(lt=>lt.app===W);if(1===Ge.length)return Ge[0]}return W.container.getProvider(x).getImmediate({optional:!0})}const ga=(x,O)=>{const W=O?[O]:(0,Q.C6)(),ae=[];return W.forEach(ke=>{ke.container.getProvider(x).instances.forEach(lt=>{ae.includes(lt)||ae.push(lt)})}),ae};function qs(){}class _s{constructor(O,W=Ai){this.zone=O,this.delegate=W}now(){return this.delegate.now()}schedule(O,W,ae){const ke=this.zone;return this.delegate.schedule(function(lt){ke.runGuarded(()=>{O.apply(this,[lt])})},W,ae)}}class si{constructor(O){this.zone=O,this.task=null}call(O,W){const ae=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qs,{},qs,qs)),W.pipe((0,vs.b)({next:ae,complete:ae,error:ae})).subscribe(O).add(ae)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let zl=(()=>{class x{constructor(W){this.ngZone=W,this.outsideAngular=W.runOutsideAngular(()=>new _s(Zone.current)),this.insideAngular=W.run(()=>new _s(Zone.current,ss.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return x.\u0275fac=function(W){return new(W||x)(g.LFG(g.R0b))},x.\u0275prov=g.Yz7({token:x,factory:x.\u0275fac,providedIn:"root"}),x})();function mi(){const x=globalThis.\u0275AngularFireScheduler;if(!x)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return x}function wu(x){return mi(),function Gi(x){return function(W){return(W=W.lift(new si(x.ngZone))).pipe((0,fa.R)(x.outsideAngular),(0,pa.Q)(x.insideAngular))}}(mi())(x)}},2090:(tt,_e,N)=>{N.d(_e,{$s:()=>et,BH:()=>Nt,G6:()=>Ce,L:()=>ge,LL:()=>on,Pz:()=>Zt,Sg:()=>He,UG:()=>De,US:()=>pe,ZB:()=>H,ZR:()=>Rn,aH:()=>at,b$:()=>le,eu:()=>Fe,hl:()=>$e,jU:()=>Ye,m9:()=>Pt,ne:()=>Fn,pd:()=>zn,r3:()=>Yn,ru:()=>me,tV:()=>ce,uI:()=>Ie,vZ:()=>Qe,w1:()=>nt,xO:()=>Dn,xb:()=>Qn,z$:()=>Re,zI:()=>U,zd:()=>Tr});const ne=function(B){const V=[];let R=0;for(let $=0;$<B.length;$++){let F=B.charCodeAt($);F<128?V[R++]=F:F<2048?(V[R++]=F>>6|192,V[R++]=63&F|128):55296==(64512&F)&&$+1<B.length&&56320==(64512&B.charCodeAt($+1))?(F=65536+((1023&F)<<10)+(1023&B.charCodeAt(++$)),V[R++]=F>>18|240,V[R++]=F>>12&63|128,V[R++]=F>>6&63|128,V[R++]=63&F|128):(V[R++]=F>>12|224,V[R++]=F>>6&63|128,V[R++]=63&F|128)}return V},pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,V){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const R=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,$=[];for(let F=0;F<B.length;F+=3){const ie=B[F],Ee=F+1<B.length,ze=Ee?B[F+1]:0,it=F+2<B.length,wt=it?B[F+2]:0;let qt=(15&ze)<<2|wt>>6,Nn=63&wt;it||(Nn=64,Ee||(qt=64)),$.push(R[ie>>2],R[(3&ie)<<4|ze>>4],R[qt],R[Nn])}return $.join("")},encodeString(B,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(B):this.encodeByteArray(ne(B),V)},decodeString(B,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(B):function(B){const V=[];let R=0,$=0;for(;R<B.length;){const F=B[R++];if(F<128)V[$++]=String.fromCharCode(F);else if(F>191&&F<224){const ie=B[R++];V[$++]=String.fromCharCode((31&F)<<6|63&ie)}else if(F>239&&F<365){const it=((7&F)<<18|(63&B[R++])<<12|(63&B[R++])<<6|63&B[R++])-65536;V[$++]=String.fromCharCode(55296+(it>>10)),V[$++]=String.fromCharCode(56320+(1023&it))}else{const ie=B[R++],Ee=B[R++];V[$++]=String.fromCharCode((15&F)<<12|(63&ie)<<6|63&Ee)}}return V.join("")}(this.decodeStringToByteArray(B,V))},decodeStringToByteArray(B,V){this.init_();const R=V?this.charToByteMapWebSafe_:this.charToByteMap_,$=[];for(let F=0;F<B.length;){const ie=R[B.charAt(F++)],ze=F<B.length?R[B.charAt(F)]:0;++F;const wt=F<B.length?R[B.charAt(F)]:64;++F;const ut=F<B.length?R[B.charAt(F)]:64;if(++F,null==ie||null==ze||null==wt||null==ut)throw Error();$.push(ie<<2|ze>>4),64!==wt&&($.push(ze<<4&240|wt>>2),64!==ut&&$.push(wt<<6&192|ut))}return $},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},ge=function(B){return function(B){const V=ne(B);return pe.encodeByteArray(V,!0)}(B).replace(/\./g,"")},ce=function(B){try{return pe.decodeString(B,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function H(B,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return V}for(const R in V)!V.hasOwnProperty(R)||!Y(R)||(B[R]=H(B[R],V[R]));return B}function Y(B){return"__proto__"!==B}function Re(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ie(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Re())}function De(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(B){return!1}}function Ye(){return"object"==typeof self&&self.self===self}function me(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function le(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function nt(){const B=Re();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function Ce(){return!De()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $e(){return"object"==typeof indexedDB}function Fe(){return new Promise((B,V)=>{try{let R=!0;const $="validate-browser-context-for-indexeddb-analytics-module",F=self.indexedDB.open($);F.onsuccess=()=>{F.result.close(),R||self.indexedDB.deleteDatabase($),B(!0)},F.onupgradeneeded=()=>{R=!1},F.onerror=()=>{var ie;V((null===(ie=F.error)||void 0===ie?void 0:ie.message)||"")}}catch(R){V(R)}})}function U(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const te=()=>{try{return function ye(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if("undefined"==typeof document)return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(R){return}const V=B&&ce(B[1]);return V&&JSON.parse(V)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},at=()=>{var B;return null===(B=te())||void 0===B?void 0:B.config},Zt=B=>{var V;return null===(V=te())||void 0===V?void 0:V[`_${B}`]};class Nt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,R)=>{this.resolve=V,this.reject=R})}wrapCallback(V){return(R,$)=>{R?this.reject(R):this.resolve($),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(R):V(R,$))}}}function He(B,V){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const $=V||"demo-project",F=B.iat||0,ie=B.sub||B.user_id;if(!ie)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ee=Object.assign({iss:`https://securetoken.google.com/${$}`,aud:$,iat:F,exp:F+3600,auth_time:F,sub:ie,user_id:ie,firebase:{sign_in_provider:"custom",identities:{}}},B);return[ge(JSON.stringify({alg:"none",type:"JWT"})),ge(JSON.stringify(Ee)),""].join(".")}class Rn extends Error{constructor(V,R,$){super(R),this.code=V,this.customData=$,this.name="FirebaseError",Object.setPrototypeOf(this,Rn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,on.prototype.create)}}class on{constructor(V,R,$){this.service=V,this.serviceName=R,this.errors=$}create(V,...R){const $=R[0]||{},F=`${this.service}/${V}`,ie=this.errors[V],Ee=ie?function Xt(B,V){return B.replace(Gn,(R,$)=>{const F=V[$];return null!=F?String(F):`<${$}?>`})}(ie,$):"Error";return new Rn(F,`${this.serviceName}: ${Ee} (${F}).`,$)}}const Gn=/\{\$([^}]+)}/g;function Yn(B,V){return Object.prototype.hasOwnProperty.call(B,V)}function Qn(B){for(const V in B)if(Object.prototype.hasOwnProperty.call(B,V))return!1;return!0}function Qe(B,V){if(B===V)return!0;const R=Object.keys(B),$=Object.keys(V);for(const F of R){if(!$.includes(F))return!1;const ie=B[F],Ee=V[F];if(yn(ie)&&yn(Ee)){if(!Qe(ie,Ee))return!1}else if(ie!==Ee)return!1}for(const F of $)if(!R.includes(F))return!1;return!0}function yn(B){return null!==B&&"object"==typeof B}function Dn(B){const V=[];for(const[R,$]of Object.entries(B))Array.isArray($)?$.forEach(F=>{V.push(encodeURIComponent(R)+"="+encodeURIComponent(F))}):V.push(encodeURIComponent(R)+"="+encodeURIComponent($));return V.length?"&"+V.join("&"):""}function Tr(B){const V={};return B.replace(/^\?/,"").split("&").forEach($=>{if($){const[F,ie]=$.split("=");V[decodeURIComponent(F)]=decodeURIComponent(ie)}}),V}function zn(B){const V=B.indexOf("?");if(!V)return"";const R=B.indexOf("#",V);return B.substring(V,R>0?R:void 0)}function Fn(B,V){const R=new tn(B,V);return R.subscribe.bind(R)}class tn{constructor(V,R){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=R,this.task.then(()=>{V(this)}).catch($=>{this.error($)})}next(V){this.forEachObserver(R=>{R.next(V)})}error(V){this.forEachObserver(R=>{R.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,R,$){let F;if(void 0===V&&void 0===R&&void 0===$)throw new Error("Missing Observer.");F=function st(B,V){if("object"!=typeof B||null===B)return!1;for(const R of V)if(R in B&&"function"==typeof B[R])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:R,complete:$},void 0===F.next&&(F.next=Lt),void 0===F.error&&(F.error=Lt),void 0===F.complete&&(F.complete=Lt);const ie=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?F.error(this.finalError):F.complete()}catch(Ee){}}),this.observers.push(F),ie}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let R=0;R<this.observers.length;R++)this.sendOne(R,V)}sendOne(V,R){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{R(this.observers[V])}catch($){"undefined"!=typeof console&&console.error&&console.error($)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Lt(){}function et(B,V=1e3,R=2){const $=V*Math.pow(R,B),F=Math.round(.5*$*(Math.random()-.5)*2);return Math.min(144e5,$+F)}function Pt(B){return B&&B._delegate?B._delegate:B}},9089:(tt,_e,N)=>{var g=N(5e3);let Q=null;function k(){return Q}const se=new g.OlP("DocumentToken");let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ce(){return(0,g.LFG)(H)}()},providedIn:"platform"}),n})();const j=new g.OlP("Location Initialized");let H=(()=>{class n extends ge{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Y()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Y()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(se))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Re(){return new H((0,g.LFG)(se))}()},providedIn:"platform"}),n})();function Y(){return!!window.history.pushState}function Ie(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function De(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ye(n){return n&&"?"!==n[0]?"?"+n:n}let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(ot)},providedIn:"root"}),n})();const le=new g.OlP("appBaseHref");let ot=(()=>{class n extends me{constructor(t,r){var o,u,c;super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=null!==(c=null!==(o=null!=r?r:this._platformLocation.getBaseHrefFromDOM())&&void 0!==o?o:null===(u=(0,g.f3M)(se).location)||void 0===u?void 0:u.origin)&&void 0!==c?c:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ie(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ye(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const c=this.prepareExternalUrl(o+Ye(u));this._platformLocation.pushState(t,r,c)}replaceState(t,r,o,u){const c=this.prepareExternalUrl(o+Ye(u));this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ge),g.LFG(le,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nt=(()=>{class n extends me{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ie(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let c=this.prepareExternalUrl(o+Ye(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,r,c)}replaceState(t,r,o,u){let c=this.prepareExternalUrl(o+Ye(u));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(ge),g.LFG(le,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),xe=(()=>{class n{constructor(t){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=De($e(r)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){var t;null===(t=this._urlChangeSubscription)||void 0===t||t.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ye(r))}normalize(t){return n.stripTrailingSlash(function Ce(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,$e(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ye(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ye(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._locationStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{var r;const o=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(o,1),0===this._urlChangeListeners.length&&(null===(r=this._urlChangeSubscription)||void 0===r||r.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=Ye,n.joinWithSlash=Ie,n.stripTrailingSlash=De,n.\u0275fac=function(t){return new(t||n)(g.LFG(me))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function we(){return new xe((0,g.LFG)(me))}()},providedIn:"root"}),n})();function $e(n){return n.replace(/\/index.html$/,"")}let gi=(()=>{class n{constructor(t,r,o,u){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=o,this._renderer=u,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,g.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,g.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Zr{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Hi=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,c)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Zr(o.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,c),ys(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{ys(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function ys(n,e){n.context.$implicit=e.item}let Fl=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Eo,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Sr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Sr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Eo{constructor(){this.$implicit=null,this.ngIf=null}}function Sr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let os=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();const Gs="browser";function Mr(n){return"server"===n}let ga=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new qs((0,g.LFG)(se),window)}),n})();class qs{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function si(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const c=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(c)return c}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=_s(this.window.history)||_s(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function _s(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Du extends class yp extends class pe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function he(n){Q||(Q=n)}(new Du)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Gd(){return va=va||document.querySelector("base"),va?va.getAttribute("href"):null}();return null==t?null:function yi(n){vr=vr||document.createElement("a"),vr.setAttribute("href",n);const e=vr.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){va=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function lr(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let vr,va=null;const Vn=new g.OlP("TRANSITION_ID"),py=[{provide:g.ip1,useFactory:function fy(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=k(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[Vn,se,g.zs3],multi:!0}];let my=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Wl=new g.OlP("EventManagerPlugins");let zd=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const c=o[u];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Wl),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class bu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=k().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Cu=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Ao=(()=>{class n extends Cu{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const c=this._doc.createElement("style");c.textContent=u,o.push(r.appendChild(c))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Wd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Wd))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(se))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function Wd(n){k().remove(n)}const qd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},vp=/%COMP%/g;function ql(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?ql(n,o,t):(o=o.replace(vp,n),t.push(o))}return t}function _p(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Kl=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new _a(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case g.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new wp(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case g.ifc.ShadowDom:return new Ep(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=ql(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(zd),g.LFG(Ao),g.LFG(g.AFp))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class _a{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(qd[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Au(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Au(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=qd[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=qd[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,_p(r)):this.eventManager.addEventListener(e,t,_p(r))}}function Au(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class wp extends _a{constructor(e,t,r,o){super(e),this.component=r;const u=ql(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Tu(n){return"_ngcontent-%COMP%".replace(vp,n)}(o+"-"+r.id),this.hostAttr=function Zd(n){return"_nghost-%COMP%".replace(vp,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Ep extends _a{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=ql(o.id,o.styles,[]);for(let c=0;c<u.length;c++){const m=document.createElement("style");m.textContent=u[c],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Mu=(()=>{class n extends bu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(se))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const xu=["alt","control","meta","shift"],Ru={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},us={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Yl=(()=>{class n extends bu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),c=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,u.domEventName,c))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let c="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),c="code."),xu.forEach(D=>{const T=r.indexOf(D);T>-1&&(r.splice(T,1),c+=D+".")}),c+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=o,w.fullKey=c,w}static matchEventFullKeyCode(t,r){let o=Ru[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),xu.forEach(c=>{c!==o&&(0,us[c])(t)&&(u+=c+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(se))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Jl=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:Gs},{provide:g.g9A,useValue:function Yd(){Du.makeCurrent()},multi:!0},{provide:se,useFactory:function Pu(){return(0,g.RDi)(document),document},deps:[]}]),wa=new g.OlP(""),Dp=[{provide:g.rWj,useClass:class gy{addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let u=o.length,c=!1;const m=function(w){c=c||w,u--,0==u&&r(c)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}},deps:[]},{provide:g.lri,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]}],Ea=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function Ou(){return new g.qLn},deps:[]},{provide:Wl,useClass:Mu,multi:!0,deps:[se,g.R0b,g.Lbi]},{provide:Wl,useClass:Yl,multi:!0,deps:[se]},{provide:Kl,useClass:Kl,deps:[zd,Ao,g.AFp]},{provide:g.FYo,useExisting:Kl},{provide:Cu,useExisting:Ao},{provide:Ao,useClass:Ao,deps:[se]},{provide:zd,useClass:zd,deps:[Wl,g.R0b]},{provide:class mi{},useClass:my,deps:[]},[]];let Qd=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:Vn,useExisting:g.AFp},py]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(wa,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[...Ea,...Dp],imports:[os,g.hGG]}),n})(),Js=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(se))},n.\u0275prov=g.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ia(){return new Js((0,g.LFG)(se))}(),r},providedIn:"root"}),n})();"undefined"!=typeof window&&window;var wn=N(8996),Br=N(9751);const{isArray:J0}=Array,{getPrototypeOf:rh,prototype:vi,keys:Wi}=Object;function ih(n){if(1===n.length){const e=n[0];if(J0(e))return{args:e,keys:null};if(function Ca(n){return n&&"object"==typeof n&&rh(n)===vi}(e)){const t=Wi(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var xi=N(8421),Ts=N(7669),wr=N(5403),At=N(4004);const{isArray:nc}=Array;function Bu(n){return(0,At.U)(e=>function Ta(n,e){return nc(e)?n(...e):n(e)}(n,e))}function oi(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let Ro=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),Xs=(()=>{class n extends Ro{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const Ri=new g.OlP("NgValueAccessor"),oh={provide:Ri,useExisting:(0,g.Gpc)(()=>rc),multi:!0},ah=new g.OlP("CompositionEventMode");let rc=(()=>{class n extends Ro{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ey(){const n=k()?k().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(ah,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[g._Bn([oh]),g.qOj]}),n})();const Un=new g.OlP("NgValidators"),ls=new g.OlP("NgAsyncValidators");function ac(n){return null!=n}function Sa(n){return(0,g.QGY)(n)?(0,wn.D)(n):n}function uc(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Mp(n,e){return e.map(t=>t(n))}function Aa(n){return n.map(e=>function Dy(n){return!n.validate}(e)?e:t=>e.validate(t))}function xa(n){return null!=n?function Ma(n){if(!n)return null;const e=n.filter(ac);return 0==e.length?null:function(t){return uc(Mp(t,e))}}(Aa(n)):null}function $u(n){return null!=n?function Ss(n){if(!n)return null;const e=n.filter(ac);return 0==e.length?null:function(t){return function sh(...n){const e=(0,Ts.jO)(n),{args:t,keys:r}=ih(n),o=new Br.y(u=>{const{length:c}=t;if(!c)return void u.complete();const m=new Array(c);let w=c,D=c;for(let T=0;T<c;T++){let A=!1;(0,xi.Xf)(t[T]).subscribe((0,wr.x)(u,L=>{A||(A=!0,D--),m[T]=L},()=>w--,void 0,()=>{(!w||!A)&&(D||u.next(r?oi(r,m):m),u.complete())}))}});return e?o.pipe(Bu(e)):o}(Mp(t,e).map(Sa)).pipe((0,At.U)(uc))}}(Aa(n)):null}function lc(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Gu(n){return n?Array.isArray(n)?n:[n]:[]}function zu(n,e){return Array.isArray(n)?n.includes(e):n===e}function dh(n,e){const t=Gu(e);return Gu(n).forEach(o=>{zu(t,o)||t.push(o)}),t}function Oo(n,e){return Gu(e).filter(t=>!zu(n,t))}class Po{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=xa(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=$u(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class cs extends Po{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ai extends Po{get formDirective(){return null}get path(){return null}}let xp=(()=>{class n extends class hh{constructor(e){this._cd=e}get isTouched(){var e,t;return!(null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t||!t.touched)}get isUntouched(){var e,t;return!(null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t||!t.untouched)}get isPristine(){var e,t;return!(null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t||!t.pristine)}get isDirty(){var e,t;return!(null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t||!t.dirty)}get isValid(){var e,t;return!(null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t||!t.valid)}get isInvalid(){var e,t;return!(null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t||!t.invalid)}get isPending(){var e,t;return!(null===(t=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===t||!t.pending)}get isSubmitted(){var e;return!(null===(e=this._cd)||void 0===e||!e.submitted)}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(cs,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[g.qOj]}),n})();const Vo="VALID",Ku="INVALID",Uo="PENDING",Ra="DISABLED";function Op(n){return Array.isArray(n)?xa(n):n||null}function Pp(n){return Array.isArray(n)?$u(n):n||null}function Yu(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Pa(n,e){var t,r;(function As(n,e){const t=function no(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(lc(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Hu(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(lc(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();hc(e._rawValidators,o),hc(e._rawAsyncValidators,o)})(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&(null===(r=(t=e.valueAccessor).setDisabledState)||void 0===r||r.call(t,!0)),function Ms(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&mh(n,e)})}(n,e),function fc(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Bo(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&mh(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function iw(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function hc(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function mh(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function mc(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Va(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const Fy={provide:cs,useExisting:(0,g.Gpc)(()=>jp)},Ju=(()=>Promise.resolve())();let jp=(()=>{class n extends cs{constructor(t,r,o,u,c){super(),this._changeDetectorRef=c,this.control=new class extends class Oa{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Op(this._rawValidators),this._composedAsyncValidatorFn=Pp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Vo}get invalid(){return this.status===Ku}get pending(){return this.status==Uo}get disabled(){return this.status===Ra}get enabled(){return this.status!==Ra}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Op(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Pp(e)}addValidators(e){this.setValidators(dh(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(dh(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Oo(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Oo(e,this._rawAsyncValidators))}hasValidator(e){return zu(this._rawValidators,e)}hasAsyncValidator(e){return zu(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Uo,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ra,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Vo,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Vo||this.status===Uo)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ra:Vo}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Uo,this._hasOwnPendingAsyncValidator=!0;const t=Sa(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?Ra:this.errors?Ku:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Uo)?Uo:this._anyControlsHaveStatus(Ku)?Ku:Vo}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Yu(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}{constructor(e=null,t,r){super(function Na(n){return(Yu(n)?n.validators:n)||null}(t),function Zu(n,e){return(Yu(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Yu(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Va(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){mc(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){mc(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Va(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},this._registered=!1,this.update=new g.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function _h(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===rc?t=u:function aw(n){return Object.getPrototypeOf(n.constructor)===Xs}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function Fp(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Pa(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Ju.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,g.D6c)(r);Ju.then(()=>{var u;o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}_getPath(t){return this._parent?function gh(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(ai,9),g.Y36(Un,10),g.Y36(ls,10),g.Y36(Ri,10),g.Y36(g.sBO,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([Fy]),g.qOj,g.TTD]}),n})(),Dh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})(),Rh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Dh]}),n})(),Gy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Rh]}),n})();var Ir=N(2011),Wp=N(4986);function ht(...n){const e=(0,Ts.yG)(n);return(0,wn.D)(n,e)}var Sn=N(880),Nh=N(8189);function tl(...n){return function qy(){return(0,Nh.J)(1)}()((0,wn.D)(n,(0,Ts.yG)(n)))}var ui=N(4482);function Oh(...n){const e=(0,Ts.yG)(n);return(0,ui.e)((t,r)=>{(e?tl(n,t,e):tl(n,t)).subscribe(r)})}function qp(){return(0,ui.e)((n,e)=>{let t,r=!1;n.subscribe((0,wr.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function fw(n,e,t,r,o){return(u,c)=>{let m=t,w=e,D=0;u.subscribe((0,wr.x)(c,T=>{const A=D++;w=m?n(w,T,A):(m=!0,T),r&&c.next(w)},o&&(()=>{m&&c.next(w),c.complete()})))}}function Ph(n,e){return(0,ui.e)(fw(n,e,arguments.length>=2,!0))}var kh=N(4671);function pw(n,e=kh.y){return n=null!=n?n:JD,(0,ui.e)((t,r)=>{let o,u=!0;t.subscribe((0,wr.x)(r,c=>{const m=e(c);(u||!n(o,m))&&(u=!1,o=m,r.next(c))}))})}function JD(n,e){return n===e}function wi(n,e){return(0,ui.e)((t,r)=>{let o=0;t.subscribe((0,wr.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}N(1277);var pt,XD=N(3942),be=N(5861),Ha=N(9681),Kp=N(4859),Ga=N(1877),Bt=N(2090),Ky="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ro={},jr=jr||{},Vt=Ky||self;function Fh(){}function Zp(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Lh(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Zy="closure_uid_"+(1e9*Math.random()>>>0),mw=0;function eb(n,e,t){return n.call.apply(n.bind,arguments)}function yw(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function li(n,e,t){return(li=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?eb:yw).apply(null,arguments)}function Yp(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Jr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,u){for(var c=Array(arguments.length-2),m=2;m<arguments.length;m++)c[m-2]=arguments[m];return e.prototype[o].apply(r,c)}}function za(){this.s=this.s,this.o=this.o}za.prototype.s=!1,za.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function gw(n){Object.prototype.hasOwnProperty.call(n,Zy)&&n[Zy]||(n[Zy]=++mw)}(this)},za.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const nl=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function xs(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function vw(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Zp(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let c=0;c<u;c++)n[o+c]=r[c]}else n.push(r)}}function ci(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ci.prototype.h=function(){this.defaultPrevented=!0};var PS=function(){if(!Vt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Vt.addEventListener("test",Fh,e),Vt.removeEventListener("test",Fh,e)}catch(t){}return n}();function Yy(n){return/^[\s\xa0]*$/.test(n)}var Qy=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function _w(n,e){return n<e?-1:n>e?1:0}function Zi(){var n=Vt.navigator;return n&&(n=n.userAgent)?n:""}function hs(n){return-1!=Zi().indexOf(n)}function Vh(n){return Vh[" "](n),n}Vh[" "]=Fh;var Uh,n,ww=hs("Opera"),Sc=hs("Trident")||hs("MSIE"),Ac=hs("Edge"),Jy=Ac||Sc,Ew=hs("Gecko")&&!(-1!=Zi().toLowerCase().indexOf("webkit")&&!hs("Edge"))&&!(hs("Trident")||hs("MSIE"))&&!hs("Edge"),Xy=-1!=Zi().toLowerCase().indexOf("webkit")&&!hs("Edge");function Qp(){var n=Vt.document;return n?n.documentMode:void 0}e:{var Iw="",Wa=(n=Zi(),Ew?/rv:([^\);]+)(\)|;)/.exec(n):Ac?/Edge\/([\d\.]+)/.exec(n):Sc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Xy?/WebKit\/(\S+)/.exec(n):ww?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Wa&&(Iw=Wa?Wa[1]:""),Sc){var Bh=Qp();if(null!=Bh&&Bh>parseFloat(Iw)){Uh=String(Bh);break e}}Uh=Iw}var Dw={};var ib=Vt.document&&Sc&&(Qp()||parseInt(Uh,10))||void 0;function $h(n,e){if(ci.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Ew){e:{try{Vh(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:sb[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&$h.X.h.call(this)}}Jr($h,ci);var sb={2:"touch",3:"pen",4:"mouse"};$h.prototype.h=function(){$h.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Hh="closure_listenable_"+(1e6*Math.random()|0),ob=0;function Cw(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++ob,this.ba=this.ea=!1}function Mc(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Jp(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Xp(n){const e={};for(const t in n)e[t]=n[t];return e}const Tw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Sw(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<Tw.length;u++)t=Tw[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Gh(n){this.src=n,this.g={},this.h=0}function eg(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=nl(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Mc(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Go(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}Gh.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=Go(n,e,r,o);return-1<c?(e=n[c],t||(e.ea=!1)):((e=new Cw(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var tg="closure_lm_"+(1e6*Math.random()|0),ng={};function Aw(n,e,t,r,o){if(r&&r.once)return Mw(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Aw(n,e[u],t,r,o);return null}return t=Rc(t),n&&n[Hh]?n.N(e,t,Lh(r)?!!r.capture:!!r,o):ab(n,e,t,!1,r,o)}function ab(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var c=Lh(o)?!!o.capture:!!o,m=sg(n);if(m||(n[tg]=m=new Gh(n)),(t=m.add(e,t,r,c,u)).proxy)return t;if(r=function rg(){const e=nv;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)PS||(o=c),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(tv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Mw(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Mw(n,e[u],t,r,o);return null}return t=Rc(t),n&&n[Hh]?n.O(e,t,Lh(r)?!!r.capture:!!r,o):ab(n,e,t,!0,r,o)}function ev(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)ev(n,e[u],t,r,o);else r=Lh(r)?!!r.capture:!!r,t=Rc(t),n&&n[Hh]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Go(u=n.g[e],t,r,o))&&(Mc(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=sg(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Go(e,t,r,o)),(t=-1<n?e[n]:null)&&ig(t))}function ig(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Hh])eg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(tv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=sg(e))?(eg(t,n),0==t.h&&(t.src=null,e[tg]=null)):Mc(n)}}}function tv(n){return n in ng?ng[n]:ng[n]="on"+n}function nv(n,e){if(n.ba)n=!0;else{e=new $h(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&ig(n),n=t.call(r,e)}return n}function sg(n){return(n=n[tg])instanceof Gh?n:null}var xc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Rc(n){return"function"==typeof n?n:(n[xc]||(n[xc]=function(e){return n.handleEvent(e)}),n[xc])}function Rr(){za.call(this),this.i=new Gh(this),this.P=this,this.I=null}function Nr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ci(e,n);else if(e instanceof ci)e.target=e.target||n;else{var o=e;Sw(e=new ci(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];o=zh(c,r,!0,e)&&o}if(o=zh(c=e.g=n,r,!0,e)&&o,o=zh(c,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=zh(c=e.g=t[u],r,!1,e)&&o}function zh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.ba&&c.capture==t){var m=c.listener,w=c.ha||c.src;c.ea&&eg(n.i,c),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}Jr(Rr,za),Rr.prototype[Hh]=!0,Rr.prototype.removeEventListener=function(n,e,t,r){ev(this,n,e,t,r)},Rr.prototype.M=function(){if(Rr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Mc(t[r]);delete n.g[e],n.h--}}this.I=null},Rr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Rr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Wh=Vt.JSON.stringify;function qh(){var n=sv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Kh,rv=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new lb,n=>n.reset());class lb{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function cb(n){Vt.setTimeout(()=>{throw n},0)}function iv(n,e){Kh||function xw(){var n=Vt.Promise.resolve(void 0);Kh=function(){n.then(db)}}(),Rw||(Kh(),Rw=!0),sv.add(n,e)}var Rw=!1,sv=new class ub{constructor(){this.h=this.g=null}add(e,t){const r=rv.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function db(){for(var n;n=qh();){try{n.h.call(n.g)}catch(t){cb(t)}var e=rv;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Rw=!1}function Zh(n,e){Rr.call(this),this.h=n||1,this.g=e||Vt,this.j=li(this.lb,this),this.l=Date.now()}function ov(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function av(n,e,t){if("function"==typeof n)t&&(n=li(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=li(n.handleEvent,n)}return 2147483647<Number(e)?-1:Vt.setTimeout(n,e||0)}function fs(n){n.g=av(()=>{n.g=null,n.i&&(n.i=!1,fs(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Jr(Zh,Rr),(pt=Zh.prototype).ca=!1,pt.R=null,pt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Nr(this,"tick"),this.ca&&(ov(this),this.start()))}},pt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},pt.M=function(){Zh.X.M.call(this),ov(this),delete this.g};class hb extends za{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:fs(this)}M(){super.M(),this.g&&(Vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Nc(n){za.call(this),this.h=n,this.g={}}Jr(Nc,za);var Nw=[];function Ow(n,e,t,r){Array.isArray(t)||(t&&(Nw[0]=t.toString()),t=Nw);for(var o=0;o<t.length;o++){var u=Aw(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function Pw(n){Jp(n.g,function(e,t){this.g.hasOwnProperty(t)&&ig(e)},n),n.g={}}function og(){this.g=!0}function Oc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Ht(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<o.length;c++)o[c]=""}}}return Wh(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}Nc.prototype.M=function(){Nc.X.M.call(this),Pw(this)},Nc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},og.prototype.Aa=function(){this.g=!1},og.prototype.info=function(){};var qa={},uv=null;function Yh(){return uv=uv||new Rr}function Fw(n){ci.call(this,qa.Pa,n)}function Qh(n){const e=Yh();Nr(e,new Fw(e))}function lv(n,e){ci.call(this,qa.STAT_EVENT,n),this.stat=e}function Ei(n){const e=Yh();Nr(e,new lv(e,n))}function cv(n,e){ci.call(this,qa.Qa,n),this.size=e}function Jh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Vt.setTimeout(function(){n()},e)}qa.Pa="serverreachability",Jr(Fw,ci),qa.STAT_EVENT="statevent",Jr(lv,ci),qa.Qa="timingevent",Jr(cv,ci);var ag={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},gb={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function ug(){}function Ka(){}ug.prototype.h=null;var hv,Xh={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function ef(){ci.call(this,"d")}function tf(){ci.call(this,"c")}function fv(){}function lg(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Nc(this),this.O=yb,this.T=new Zh(n=Jy?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new mb}function mb(){this.i=null,this.g="",this.h=!1}Jr(ef,ci),Jr(tf,ci),Jr(fv,ug),fv.prototype.g=function(){return new XMLHttpRequest},fv.prototype.i=function(){return{}},hv=new fv;var yb=45e3,cg={},pv={};function gv(n,e,t){n.K=1,n.v=sf(Za(e)),n.s=t,n.P=!0,rl(n,null)}function rl(n,e){n.F=Date.now(),nf(n),n.A=Za(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),Ib(t.i,"t",r),n.C=0,t=n.l.H,n.h=new mb,n.g=Qw(n.l,t?e:null,!n.s),0<n.N&&(n.L=new hb(li(n.La,n,n.g),n.N)),Ow(n.S,n.g,"readystatechange",n.ib),e=n.H?Xp(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Qh(),function kw(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var c="",m=u.split("&"),w=0;w<m.length;w++){var D=m[w].split("=");if(1<D.length){var T=D[0];D=D[1];var A=T.split("_");c=2<=A.length&&"type"==A[1]?c+(T+"=")+D+"&":c+(T+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Lw(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function mv(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=dg(n,t),o==pv){4==e&&(n.o=4,Ei(14),r=!1),Oc(n.j,n.m,null,"[Incomplete Response]");break}if(o==cg){n.o=4,Ei(15),Oc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Oc(n.j,n.m,o,null),vv(n,o)}Lw(n)&&o!=pv&&o!=cg&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ei(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),bg(e),e.K=!0,Ei(11))):(Oc(n.j,n.m,t,"[Invalid Chunked Response]"),il(n),rf(n))}function dg(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?pv:(t=Number(e.substring(t,r)),isNaN(t)?cg:(r+=1)+t>e.length?pv:(e=e.substr(r,t),n.C=r+t,e))}function nf(n){n.V=Date.now()+n.O,yv(n,n.O)}function yv(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Jh(li(n.gb,n),e)}function hg(n){n.B&&(Vt.clearTimeout(n.B),n.B=null)}function rf(n){0==n.l.G||n.I||Cg(n.l,n)}function il(n){hg(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,ov(n.T),Pw(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function vv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Tv(t.h,n)))if(!n.J&&Tv(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch(D){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Bc(t),cf(t)}Uc(t),Ei(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=Jh(li(t.cb,t),6e3));if(1>=jw(t.h)&&t.ja){try{t.ja()}catch(D){}t.ja=void 0}}else Zo(t,11)}else if((n.J||t.g==n)&&Bc(t),!Yy(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let D=o[e];if(t.T=D[0],D=D[1],2==t.G)if("c"==D[0]){t.I=D[1],t.ka=D[2];const T=D[3];null!=T&&(t.ma=T,t.j.info("VER="+t.ma));const A=D[4];null!=A&&(t.Ca=A,t.j.info("SVER="+t.Ca));const L=D[5];null!=L&&"number"==typeof L&&0<L&&(t.J=r=1.5*L,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const G=n.g;if(G){const X=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(X){var u=r.h;u.g||-1==X.indexOf("spdy")&&-1==X.indexOf("quic")&&-1==X.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Sv(u,u.h),u.h=null))}if(r.D){const Se=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;Se&&(r.za=Se,En(r.F,r.D,Se))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var c=n;if((r=t).sa=Sb(r,r.H?r.ka:null,r.V),c.J){$w(r.h,c);var m=c,w=r.J;w&&m.setTimeout(w),m.B&&(hg(m),nf(m)),r.g=c}else Dg(r);0<t.i.length&&Eg(t)}else"stop"!=D[0]&&"close"!=D[0]||Zo(t,7);else 3==t.G&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?Zo(t,7):Mv(t):"noop"!=D[0]&&t.l&&t.l.wa(D),t.A=0)}Qh()}catch(D){}}function Uw(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Zp(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Vw(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(Zp(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function vb(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Zp(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(pt=lg.prototype).setTimeout=function(n){this.O=n},pt.ib=function(n){n=n.target;const e=this.L;e&&3==so(n)?e.l():this.La(n)},pt.La=function(n){try{if(n==this.g)e:{const T=so(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>T)&&(3!=T||Jy||this.g&&(this.h.h||this.g.fa()||wg(this.g)))){this.I||4!=T||7==e||Qh(),hg(this);var t=this.g.aa();this.Y=t;t:if(Lw(this)){var r=wg(this.g);n="";var o=r.length,u=4==so(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){il(this),rf(this);var c="";break t}this.h.i=new Vt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==t,function fb(n,e,t,r,o,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.U,T,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yy(m)){var D=m;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,Ei(12),il(this),rf(this);break e}Oc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,vv(this,t)}this.P?(mv(this,T,c),Jy&&this.i&&3==T&&(Ow(this.S,this.T,"tick",this.hb),this.T.start())):(Oc(this.j,this.m,c,null),vv(this,c)),4==T&&il(this),this.i&&!this.I&&(4==T?Cg(this.l,this):(this.i=!1,nf(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,Ei(12)):(this.o=0,Ei(13)),il(this),rf(this)}}}catch(T){}},pt.hb=function(){if(this.g){var n=so(this.g),e=this.g.fa();this.C<e.length&&(hg(this),mv(this,n,e),this.i&&4!=n&&nf(this))}},pt.cancel=function(){this.I=!0,il(this)},pt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function pb(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Qh(),Ei(17)),il(this),this.o=2,rf(this)):yv(this,this.V-n)};var _v=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zo(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof zo){this.h=void 0!==e?e:n.h,Pc(this,n.j),this.s=n.s,this.g=n.g,fg(this,n.m),this.l=n.l,e=n.i;var t=new Fc;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),_b(this,t),this.o=n.o}else n&&(t=String(n).match(_v))?(this.h=!!e,Pc(this,t[1]||"",!0),this.s=kc(t[2]||""),this.g=kc(t[3]||"",!0),fg(this,t[4]),this.l=kc(t[5]||"",!0),_b(this,t[6]||"",!0),this.o=kc(t[7]||"")):(this.h=!!e,this.i=new Fc(null,this.h))}function Za(n){return new zo(n)}function Pc(n,e,t){n.j=t?kc(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function fg(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function _b(n,e,t){e instanceof Fc?(n.i=e,function pg(n,e){e&&!n.j&&(io(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(Eb(this,r),Ib(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Ya(e,Wo)),n.i=new Fc(e,n.h))}function En(n,e,t){n.i.set(e,t)}function sf(n){return En(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function kc(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ya(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Rs),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Rs(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}zo.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ya(e,wv,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ya(e,wv,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ya(t,"/"==t.charAt(0)?Ev:wb,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ya(t,Iv)),n.join("")};var wv=/[#\/\?@]/g,wb=/[#\?:]/g,Ev=/[#\?]/g,Wo=/[#\?@]/g,Iv=/#/g;function Fc(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function io(n){n.g||(n.g=new Map,n.h=0,n.i&&function Bw(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Eb(n,e){io(n),e=qo(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Dv(n,e){return io(n),e=qo(n,e),n.g.has(e)}function Ib(n,e,t){Eb(n,e),0<t.length&&(n.i=null,n.g.set(qo(n,e),xs(t)),n.h+=t.length)}function qo(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function gg(n){this.l=n||Cv,n=Vt.PerformanceNavigationTiming?0<(n=Vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Vt.g&&Vt.g.Ga&&Vt.g.Ga()&&Vt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(pt=Fc.prototype).add=function(n,e){io(this),this.i=null,n=qo(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},pt.forEach=function(n,e){io(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},pt.oa=function(){io(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},pt.W=function(n){io(this);let e=[];if("string"==typeof n)Dv(this,n)&&(e=e.concat(this.g.get(qo(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},pt.set=function(n,e){return io(this),this.i=null,Dv(this,n=qo(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},pt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},pt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),c=this.W(r);for(r=0;r<c.length;r++){var o=u;""!==c[r]&&(o+="="+encodeURIComponent(String(c[r]))),n.push(o)}}return this.i=n.join("&")};var Cv=10;function Db(n){return!!n.h||!!n.g&&n.g.size>=n.j}function jw(n){return n.h?1:n.g?n.g.size:0}function Tv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Sv(n,e){n.g?n.g.add(e):n.h=e}function $w(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Av(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return xs(n.i)}function Hw(){}function bb(){this.g=new Hw}function kS(n,e,t){const r=t||"";try{Uw(n,function(o,u){let c=o;Lh(o)&&(c=Wh(o)),e.push(r+u+"="+encodeURIComponent(c))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function af(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function uf(n){this.l=n.ac||null,this.j=n.jb||!1}function Lc(n,e){Rr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=zw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}gg.prototype.cancel=function(){if(this.i=Av(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Hw.prototype.stringify=function(n){return Vt.JSON.stringify(n,void 0)},Hw.prototype.parse=function(n){return Vt.JSON.parse(n,void 0)},Jr(uf,ug),uf.prototype.g=function(){return new Lc(this.l,this.j)},uf.prototype.i=function(n){return function(){return n}}({}),Jr(Lc,Rr);var zw=0;function Cb(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function mg(n){n.readyState=4,n.l=null,n.j=null,n.A=null,yg(n)}function yg(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(pt=Lc.prototype).open=function(n,e){if(this.readyState!=zw)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,yg(this)},pt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Vt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},pt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,mg(this)),this.readyState=zw},pt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,yg(this)),this.g&&(this.readyState=3,yg(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==Vt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Cb(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},pt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?mg(this):yg(this),3==this.readyState&&Cb(this)}},pt.Va=function(n){this.g&&(this.response=this.responseText=n,mg(this))},pt.Ua=function(n){this.g&&(this.response=n,mg(this))},pt.ga=function(){this.g&&mg(this)},pt.setRequestHeader=function(n,e){this.v.append(n,e)},pt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},pt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Lc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var FS=Vt.JSON.parse;function fr(n){Rr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Tb,this.K=this.L=!1}Jr(fr,Rr);var Tb="",LS=/^https?$/i,VS=["POST","PUT"];function Ko(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,vg(n),lf(n)}function vg(n){n.D||(n.D=!0,Nr(n,"complete"),Nr(n,"error"))}function Ww(n){if(n.h&&void 0!==jr&&(!n.C[1]||4!=so(n)||2!=n.aa()))if(n.v&&4==so(n))av(n.Ha,0,n);else if(Nr(n,"readystatechange"),4==so(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(_v)[1]||null;if(!o&&Vt.self&&Vt.self.location){var u=Vt.self.location.protocol;o=u.substr(0,u.length-1)}r=!LS.test(o?o.toLowerCase():"")}t=r}if(t)Nr(n,"complete"),Nr(n,"success");else{n.m=6;try{var c=2<so(n)?n.g.statusText:""}catch(w){c=""}n.j=c+" ["+n.aa()+"]",vg(n)}}finally{lf(n)}}}function lf(n,e){if(n.g){_g(n);const t=n.g,r=n.C[0]?Fh:null;n.g=null,n.C=null,e||Nr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function _g(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Vt.clearTimeout(n.A),n.A=null)}function so(n){return n.g?n.g.readyState:0}function wg(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Tb:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function qw(n){let e="";return Jp(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function oo(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=qw(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):En(n,e,t))}function Vc(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Kw(n){this.Ca=0,this.i=[],this.j=new og,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Vc("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Vc("baseRetryDelayMs",5e3,n),this.bb=Vc("retryDelaySeedMs",1e4,n),this.$a=Vc("forwardChannelMaxRetries",2,n),this.ta=Vc("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new gg(n&&n.concurrentRequestLimit),this.Fa=new bb,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Mv(n){if(Zw(n),3==n.G){var e=n.U++,t=Za(n.F);En(t,"SID",n.I),En(t,"RID",e),En(t,"TYPE","terminate"),ol(n,t),(e=new lg(n,n.j,e,void 0)).K=2,e.v=sf(Za(t)),t=!1,Vt.navigator&&Vt.navigator.sendBeacon&&(t=Vt.navigator.sendBeacon(e.v.toString(),"")),!t&&Vt.Image&&((new Image).src=e.v,t=!0),t||(e.g=Qw(e.l,null),e.g.da(e.v)),e.F=Date.now(),nf(e)}Yw(n)}function cf(n){n.g&&(bg(n),n.g.cancel(),n.g=null)}function Zw(n){cf(n),n.u&&(Vt.clearTimeout(n.u),n.u=null),Bc(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Vt.clearTimeout(n.m),n.m=null)}function Eg(n){Db(n.h)||n.m||(n.m=!0,iv(n.Ja,n),n.C=0)}function sl(n,e){var t;t=e?e.m:n.U++;const r=Za(n.F);En(r,"SID",n.I),En(r,"RID",t),En(r,"AID",n.T),ol(n,r),n.o&&n.s&&oo(r,n.o,n.s),t=new lg(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=al(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Sv(n.h,t),gv(t,r,e)}function ol(n,e){n.ia&&Jp(n.ia,function(t,r){En(e,r,t)}),n.l&&Uw({},function(t,r){En(e,r,t)})}function al(n,e,t){t=Math.min(n.i.length,t);var r=n.l?li(n.l.Ra,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=o[0].h,c.push("ofs="+u)):u=0:c.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let D=o[w].h;const T=o[w].g;if(D-=u,0>D)u=Math.max(0,o[w].h-100),m=!1;else try{kS(T,c,"req"+D+"_")}catch(A){r&&r(T)}}if(m){r=c.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Dg(n){n.g||n.u||(n.Z=1,iv(n.Ia,n),n.A=0)}function Uc(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Jh(li(n.Ia,n),Rv(n,n.A)),n.A++,0))}function bg(n){null!=n.B&&(Vt.clearTimeout(n.B),n.B=null)}function xv(n){n.g=new lg(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Za(n.sa);En(e,"RID","rpc"),En(e,"SID",n.I),En(e,"CI",n.L?"0":"1"),En(e,"AID",n.T),En(e,"TYPE","xmlhttp"),ol(n,e),n.o&&n.s&&oo(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=sf(Za(e)),t.s=null,t.P=!0,rl(t,n)}function Bc(n){null!=n.v&&(Vt.clearTimeout(n.v),n.v=null)}function Cg(n,e){var t=null;if(n.g==e){Bc(n),bg(n),n.g=null;var r=2}else{if(!Tv(n.h,e))return;t=e.D,$w(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Nr(r=Yh(),new cv(r,t)),Eg(n)}else Dg(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function Ig(n,e){return!(jw(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Jh(li(n.Ja,n,e),Rv(n,n.C)),n.C++,0)))}(n,e)||2==r&&Uc(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:Zo(n,5);break;case 4:Zo(n,10);break;case 3:Zo(n,6);break;default:Zo(n,2)}}function Rv(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Zo(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=li(n.kb,n);t||(t=new zo("//www.google.com/images/cleardot.gif"),Vt.location&&"http"==Vt.location.protocol||Pc(t,"https"),sf(t)),function Gw(n,e){const t=new og;if(Vt.Image){const r=new Image;r.onload=Yp(af,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Yp(af,t,r,"TestLoadImage: error",!1,e),r.onabort=Yp(af,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Yp(af,t,r,"TestLoadImage: timeout",!1,e),Vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ei(2);n.G=0,n.l&&n.l.va(e),Yw(n),Zw(n)}function Yw(n){if(n.G=0,n.la=[],n.l){const e=Av(n.h);(0!=e.length||0!=n.i.length)&&(vw(n.la,e),vw(n.la,n.i),n.h.i.length=0,xs(n.i),n.i.length=0),n.l.ua()}}function Sb(n,e,t){var r=t instanceof zo?Za(t):new zo(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),fg(r,r.m);else{var o=Vt.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new zo(null,void 0);r&&Pc(u,r),e&&(u.g=e),o&&fg(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&En(r,t,e),En(r,"VER",n.ma),ol(n,r),r}function Qw(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new fr(t&&n.Da&&!n.ra?new uf({jb:!0}):n.ra)).Ka(n.H),e}function Nv(){}function Tg(){if(Sc&&!(10<=Number(ib)))throw Error("Environmental error: no available transport.")}function Oi(n,e){Rr.call(this),this.g=new Kw(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Yy(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Yy(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new $r(this)}function Ov(n){ef.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Jw(){tf.call(this),this.status=1}function $r(n){this.g=n}(pt=fr.prototype).Ka=function(n){this.L=n},pt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():hv.g(),this.C=function dv(n){return n.h||(n.h=n.i())}(this.u?this.u:hv),this.g.onreadystatechange=li(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Ko(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Vt.FormData&&n instanceof Vt.FormData,!(0<=nl(VS,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,c]of t)this.g.setRequestHeader(u,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{_g(this),0<this.B&&((this.K=function US(n){return Sc&&function rb(){return function nb(n){var e=Dw;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Qy(String(Uh)).split("."),t=Qy("9").split("."),r=Math.max(e.length,t.length);for(let c=0;0==n&&c<r;c++){var o=e[c]||"",u=t[c]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=_w(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||_w(0==o[2].length,0==u[2].length)||_w(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=li(this.qa,this)):this.A=av(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Ko(this,u)}},pt.qa=function(){void 0!==jr&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Nr(this,"timeout"),this.abort(8))},pt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Nr(this,"complete"),Nr(this,"abort"),lf(this))},pt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),lf(this,!0)),fr.X.M.call(this)},pt.Ha=function(){this.s||(this.F||this.v||this.l?Ww(this):this.fb())},pt.fb=function(){Ww(this)},pt.aa=function(){try{return 2<so(this)?this.g.status:-1}catch(n){return-1}},pt.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},pt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),FS(e)}},pt.Ea=function(){return this.m},pt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(pt=Kw.prototype).ma=8,pt.G=1,pt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new lg(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=Xp(u),Sw(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=al(this,o,e),En(t=Za(this.F),"RID",n),En(t,"CVER",22),this.D&&En(t,"X-HTTP-Session-Id",this.D),ol(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(qw(u)))+"&"+e:this.o&&oo(t,this.o,u)),Sv(this.h,o),this.Ya&&En(t,"TYPE","init"),this.O?(En(t,"$req",e),En(t,"SID","null"),o.Z=!0,gv(o,t,null)):gv(o,t,e),this.G=2}}else 3==this.G&&(n?sl(this,n):0==this.i.length||Db(this.h)||sl(this))},pt.Ia=function(){if(this.u=null,xv(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Jh(li(this.eb,this),n)}},pt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Ei(10),cf(this),xv(this))},pt.cb=function(){null!=this.v&&(this.v=null,cf(this),Uc(this),Ei(19))},pt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Ei(2)):(this.j.info("Failed to ping google.com"),Ei(1))},(pt=Nv.prototype).xa=function(){},pt.wa=function(){},pt.va=function(){},pt.ua=function(){},pt.Ra=function(){},Tg.prototype.g=function(n,e){return new Oi(n,e)},Jr(Oi,Rr),Oi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Ei(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Sb(n,null,n.V),Eg(n)},Oi.prototype.close=function(){Mv(this.g)},Oi.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Wh(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Eg(e)},Oi.prototype.M=function(){this.g.l=null,delete this.j,Mv(this.g),delete this.g,Oi.X.M.call(this)},Jr(Ov,ef),Jr(Jw,tf),Jr($r,Nv),$r.prototype.xa=function(){Nr(this.g,"a")},$r.prototype.wa=function(n){Nr(this.g,new Ov(n))},$r.prototype.va=function(n){Nr(this.g,new Jw)},$r.prototype.ua=function(){Nr(this.g,"b")},Tg.prototype.createWebChannel=Tg.prototype.g,Oi.prototype.send=Oi.prototype.u,Oi.prototype.open=Oi.prototype.m,Oi.prototype.close=Oi.prototype.close,ag.NO_ERROR=0,ag.TIMEOUT=8,ag.HTTP_ERROR=6,gb.COMPLETE="complete",Ka.EventType=Xh,Xh.OPEN="a",Xh.CLOSE="b",Xh.ERROR="c",Xh.MESSAGE="d",Rr.prototype.listen=Rr.prototype.N,fr.prototype.listenOnce=fr.prototype.O,fr.prototype.getLastError=fr.prototype.Oa,fr.prototype.getLastErrorCode=fr.prototype.Ea,fr.prototype.getStatus=fr.prototype.aa,fr.prototype.getResponseJson=fr.prototype.Sa,fr.prototype.getResponseText=fr.prototype.fa,fr.prototype.send=fr.prototype.da,fr.prototype.setWithCredentials=fr.prototype.Ka;var Xw=ro.createWebChannelTransport=function(){return new Tg},Ab=ro.getStatEventTarget=function(){return Yh()},eE=ro.ErrorCode=ag,Mb=ro.EventType=gb,Pv=ro.Event=qa,kv=ro.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},xb=ro.FetchXmlHttpFactory=uf,Sg=ro.WebChannel=Ka,Rb=ro.XhrIo=fr;const Fv="@firebase/firestore";class Hr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Hr.UNAUTHENTICATED=new Hr(null),Hr.GOOGLE_CREDENTIALS=new Hr("google-credentials-uid"),Hr.FIRST_PARTY=new Hr("first-party-uid"),Hr.MOCK_USER=new Hr("mock-user");let ul="9.14.0";const Qa=new Ga.Yd("@firebase/firestore");function Lv(){return Qa.logLevel}function Ve(n,...e){if(Qa.logLevel<=Ga.in.DEBUG){const t=e.map(df);Qa.debug(`Firestore (${ul}): ${n}`,...t)}}function pr(n,...e){if(Qa.logLevel<=Ga.in.ERROR){const t=e.map(df);Qa.error(`Firestore (${ul}): ${n}`,...t)}}function di(n,...e){if(Qa.logLevel<=Ga.in.WARN){const t=e.map(df);Qa.warn(`Firestore (${ul}): ${n}`,...t)}}function df(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function dt(n="Unexpected state"){const e=`FIRESTORE (${ul}) INTERNAL ASSERTION FAILED: `+n;throw pr(e),new Error(e)}function Ft(n,e){n||dt()}function Xe(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends Bt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ag{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Nb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Hr.UNAUTHENTICATED))}shutdown(){}}class Ob{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Mg{constructor(e){this.t=e,this.currentUser=Hr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=D=>this.i!==o?(o=this.i,t(D)):Promise.resolve();let c=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Or,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const D=c;e.enqueueRetryable((0,be.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},w=D=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(D=>w(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?w(D):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Or)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ft("string"==typeof r.accessToken),new Ag(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ft(null===e||"string"==typeof e),new Hr(e)}}class Vv{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=Hr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ft(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class xg{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new Vv(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Hr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Pb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Uv{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.A;return this.A=u.token,Ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ft("string"==typeof t.token),this.A=t.token,new Pb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function nE(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Bv{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=nE(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function jt(n,e){return n<e?-1:n>e?1:0}function ll(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function Rg(n){return n+"\0"}class mn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Oe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Oe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Oe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mn.fromMillis(Date.now())}static fromDate(e){return mn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new mn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jt(this.nanoseconds,e.nanoseconds):jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Mt(e)}static min(){return new Mt(new mn(0,0))}static max(){return new Mt(new mn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Ja{constructor(e,t,r){void 0===t?t=0:t>e.length&&dt(),void 0===r?r=e.length-t:r>e.length-t&&dt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Ja.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ja?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),c=t.get(o);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nn extends Ja{construct(e,t,r){return new nn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Oe(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new nn(t)}static emptyPath(){return new nn([])}}const kb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qn extends Ja{construct(e,t,r){return new qn(e,t,r)}static isValidIdentifier(e){return kb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new qn(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Oe(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Oe(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Oe(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(c=!c,o++):"."!==m||c?(r+=m,o++):(u(),o++)}if(u(),c)throw new Oe(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qn(t)}static emptyPath(){return new qn([])}}class Ze{constructor(e){this.path=e}static fromPath(e){return new Ze(nn.fromString(e))}static fromName(e){return new Ze(nn.fromString(e).popFirst(5))}static empty(){return new Ze(nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ze(new nn(e.slice()))}}class Ng{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function jv(n){return n.fields.find(e=>2===e.kind)}function Ns(n){return n.fields.filter(e=>2!==e.kind)}Ng.UNKNOWN_ID=-1;class $v{constructor(e,t){this.fieldPath=e,this.kind=t}}class Og{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Og(0,Yi.min())}}function rE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Mt.fromTimestamp(1e9===r?new mn(t+1,0):new mn(t,r));return new Yi(o,Ze.empty(),e)}function iE(n){return new Yi(n.readTime,n.key,-1)}class Yi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Yi(Mt.min(),Ze.empty(),-1)}static max(){return new Yi(Mt.max(),Ze.empty(),-1)}}function Pg(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ze.comparator(n.documentKey,e.documentKey),0!==t?t:jt(n.largestBatchId,e.largestBatchId))}const kg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ao(n){return Hv.apply(this,arguments)}function Hv(){return Hv=(0,be.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==kg)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),Hv.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&dt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let o=0,u=0,c=!1;e.forEach(m=>{++o,m.next(()=>{++u,c&&u===o&&t()},w=>r(w))}),c=!0,u===o&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(o=>o?oe.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,o)=>{const u=e.length,c=new Array(u);let m=0;for(let w=0;w<u;w++){const D=w;t(e[D]).next(T=>{c[D]=T,++m,m===u&&r(c)},T=>o(T))}})}static doWhile(e,t){return new oe((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class Fg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Or,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new hf(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=Gv(r.target.error);this.P.reject(new hf(e,o))}}static open(e,t,r,o){try{return new Fg(t,e.transaction(o,r))}catch(u){throw new hf(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new cl(t)}}class Os{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Os.D((0,Bt.z$)())&&pr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),jc(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Bt.hl)())return!1;if(Os.N())return!0;const e=(0,Bt.z$)(),t=Os.D(e),r=0<t&&t<10,o=Os.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,be.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{o(new hf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const m=c.target.error;o("VersionError"===m.name?new Oe(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Oe(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new hf(e,m))},u.onupgradeneeded=c=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.$(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,be.Z)(function*(){const c="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.F(e);const w=Fg.open(u.db,e,c?"readonly":"readwrite",r),D=o(w).next(T=>(w.V(),T)).catch(T=>(w.abort(T),oe.reject(T))).toPromise();return D.catch(()=>{}),yield w.v,D}catch(w){const D=w,T="FirebaseError"!==D.name&&m<3;if(Ve("SimpleDb","Transaction failed with error:",D.message,"Retrying:",T),u.close(),!T)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Vb{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return jc(this.U.delete())}}class hf extends Oe{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Ps(n){return"IndexedDbTransactionError"===n.name}class cl{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),jc(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),jc(this.store.add(e))}get(e){return jc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),jc(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),jc(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(c,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new oe((u,c)=>{o.onerror=m=>{c(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((o,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{o(c.target.result)}})}Y(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(u,c,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new oe((r,o)=>{t.onerror=u=>{const c=Gv(u.target.error);o(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(m=>{m?c.continue():r()}):r()}})}H(e,t){const r=[];return new oe((o,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const m=c.target.result;if(!m)return void o();const w=new Vb(m),D=t(m.primaryKey,m.value,w);if(D instanceof oe){const T=D.catch(A=>(w.done(),oe.reject(A)));r.push(T)}w.isDone?o():null===w.G?m.continue():m.continue(w.G)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function jc(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Gv(r.target.error);t(o)}})}let $c=!1;function Gv(n){const e=Os.D((0,Bt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return $c||($c=!0,setTimeout(()=>{throw r},0)),r}}return n}class Ub{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,be.Z)(function*(){t.task=null;try{Ve("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Ps(r)?Ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ao(r)}yield t.nt(6e4)}))}}class zv{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,be.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return oe.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return Ve("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,o).next(m=>{o-=m,r.add(c)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(o,u)).next(m=>(Ve("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>c.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const c=iE(u);Pg(c,r)>0&&(r=c)}),new Yi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Pi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function ks(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Fs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Xr(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Pi.at=-1;class An{constructor(e,t){this.comparator=e,this.root=t||Mn.EMPTY}insert(e,t){return new An(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Mn.BLACK,null,null))}remove(e){return new An(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dl(this.root,e,this.comparator,!1)}getReverseIterator(){return new dl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dl(this.root,e,this.comparator,!0)}}class dl{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Mn{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:Mn.RED,this.left=null!=o?o:Mn.EMPTY,this.right=null!=u?u:Mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Mn(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Mn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw dt();const e=this.left.check();if(e!==this.right.check())throw dt();return e+(this.isRed()?0:1)}}Mn.EMPTY=null,Mn.RED=!0,Mn.BLACK=!1,Mn.EMPTY=new class{constructor(){this.size=0}get key(){throw dt()}get value(){throw dt()}get color(){throw dt()}get left(){throw dt()}get right(){throw dt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Mn(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _n{constructor(e){this.comparator=e,this.data=new An(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hl(this.data.getIterator())}getIteratorFrom(e){return new hl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof _n)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _n(this.comparator);return t.data=e,t}}class hl{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ls(n){return n.hasNext()?n.getNext():void 0}class Gr{constructor(e){this.fields=e,e.sort(qn.comparator)}static empty(){return new Gr([])}unionWith(e){let t=new _n(qn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Gr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ll(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Kn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Kn(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Kn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kn.EMPTY_BYTE_STRING=new Kn("");const Gc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qi(n){if(Ft(!!n),"string"==typeof n){let e=0;const t=Gc.exec(n);if(Ft(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pn(n.seconds),nanos:Pn(n.nanos)}}function Pn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ps(n){return"string"==typeof n?Kn.fromBase64String(n):Kn.fromUint8Array(n)}function Lg(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Wv(n){const e=n.mapValue.fields.__previous_value__;return Lg(e)?Wv(e):e}function zc(n){const e=Qi(n.mapValue.fields.__local_write_time__.timestampValue);return new mn(e.seconds,e.nanos)}class oE{constructor(e,t,r,o,u,c,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Yo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Yo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Yo&&e.projectId===this.projectId&&e.database===this.database}}function Wc(n){return null==n}function qc(n){return 0===n&&1/n==-1/0}function qv(n){return"number"==typeof n&&Number.isInteger(n)&&!qc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Qo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Vg={nullValue:"NULL_VALUE"};function fl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Lg(n)?4:Zv(n)?9007199254740991:10:dt()}function Vs(n,e){if(n===e)return!0;const t=fl(n);if(t!==fl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zc(n).isEqual(zc(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Qi(r.timestampValue),c=Qi(o.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,ps(n.bytesValue).isEqual(ps(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Pn(r.geoPointValue.latitude)===Pn(o.geoPointValue.latitude)&&Pn(r.geoPointValue.longitude)===Pn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Pn(r.integerValue)===Pn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Pn(r.doubleValue),c=Pn(o.doubleValue);return u===c?qc(u)===qc(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return ll(n.arrayValue.values||[],e.arrayValue.values||[],Vs);case 10:return function(r,o){const u=r.mapValue.fields||{},c=o.mapValue.fields||{};if(ks(u)!==ks(c))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===c[m]||!Vs(u[m],c[m])))return!1;return!0}(n,e);default:return dt()}var o}function ff(n,e){return void 0!==(n.values||[]).find(t=>Vs(t,e))}function Xa(n,e){if(n===e)return 0;const t=fl(n),r=fl(e);if(t!==r)return jt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return jt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const c=Pn(o.integerValue||o.doubleValue),m=Pn(u.integerValue||u.doubleValue);return c<m?-1:c>m?1:c===m?0:isNaN(c)?isNaN(m)?0:-1:1}(n,e);case 3:return Ug(n.timestampValue,e.timestampValue);case 4:return Ug(zc(n),zc(e));case 5:return jt(n.stringValue,e.stringValue);case 6:return function(o,u){const c=ps(o),m=ps(u);return c.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const c=o.split("/"),m=u.split("/");for(let w=0;w<c.length&&w<m.length;w++){const D=jt(c[w],m[w]);if(0!==D)return D}return jt(c.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const c=jt(Pn(o.latitude),Pn(u.latitude));return 0!==c?c:jt(Pn(o.longitude),Pn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const c=o.values||[],m=u.values||[];for(let w=0;w<c.length&&w<m.length;++w){const D=Xa(c[w],m[w]);if(D)return D}return jt(c.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Qo.mapValue&&u===Qo.mapValue)return 0;if(o===Qo.mapValue)return 1;if(u===Qo.mapValue)return-1;const c=o.fields||{},m=Object.keys(c),w=u.fields||{},D=Object.keys(w);m.sort(),D.sort();for(let T=0;T<m.length&&T<D.length;++T){const A=jt(m[T],D[T]);if(0!==A)return A;const L=Xa(c[m[T]],w[D[T]]);if(0!==L)return L}return jt(m.length,D.length)}(n.mapValue,e.mapValue);default:throw dt()}}function Ug(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return jt(n,e);const t=Qi(n),r=Qi(e),o=jt(t.seconds,r.seconds);return 0!==o?o:jt(t.nanos,r.nanos)}function eu(n){return Kv(n)}function Kv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Qi(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ps(n.bytesValue).toBase64():"referenceValue"in n?Ze.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const c of r.values||[])u?u=!1:o+=",",o+=Kv(c);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const m of o)c?c=!1:u+=",",u+=`${m}:${Kv(r.fields[m])}`;return u+"}"}(n.mapValue):dt();var e}function uo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Kc(n){return!!n&&"integerValue"in n}function pl(n){return!!n&&"arrayValue"in n}function aE(n){return!!n&&"nullValue"in n}function Bg(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Zc(n){return!!n&&"mapValue"in n}function Yc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Fs(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Yc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Zv(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Yv(n){return"nullValue"in n?Vg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?uo(Yo.empty(),Ze.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:dt()}function uE(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?uo(Yo.empty(),Ze.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Qo:dt()}function Qv(n,e){const t=Xa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function jg(n,e){const t=Xa(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class zr{constructor(e){this.value=e}static empty(){return new zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Zc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yc(t)}setAll(e){let t=qn.emptyPath(),r={},o=[];e.forEach((c,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}c?r[m.lastSegment()]=Yc(c):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Zc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vs(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Zc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Fs(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new zr(Yc(this.value))}}function lE(n){const e=[];return Fs(n.fields,(t,r)=>{const o=new qn([t]);if(Zc(r)){const u=lE(r.mapValue).fields;if(0===u.length)e.push(o);else for(const c of u)e.push(o.child(c))}else e.push(o)}),new Gr(e)}class kn{constructor(e,t,r,o,u,c){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=c}static newInvalidDocument(e){return new kn(e,0,Mt.min(),Mt.min(),zr.empty(),0)}static newFoundDocument(e,t,r){return new kn(e,1,t,Mt.min(),r,0)}static newNoDocument(e,t){return new kn(e,2,t,Mt.min(),zr.empty(),0)}static newUnknownDocument(e,t){return new kn(e,3,t,Mt.min(),zr.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof kn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new kn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class cE{constructor(e,t=null,r=[],o=[],u=null,c=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=c,this.endAt=m,this.ht=null}}function Jv(n,e=null,t=[],r=[],o=null,u=null,c=null){return new cE(n,e,t,r,o,u,c)}function tu(n){const e=Xe(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+eu(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Wc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>eu(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>eu(r)).join(",")),e.ht=t}return e.ht}function pf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!$b(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Vs(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!t_(n.startAt,e.startAt)&&t_(n.endAt,e.endAt)}function $g(n){return Ze.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function gf(n,e){return n.filters.filter(t=>t instanceof Wr&&t.field.isEqual(e))}function Hg(n,e,t){let r=Vg,o=!0;for(const u of gf(n,e)){let c=Vg,m=!0;switch(u.op){case"<":case"<=":c=Yv(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,m=!1;break;case"!=":case"not-in":c=Vg}Qv({value:r,inclusive:o},{value:c,inclusive:m})<0&&(r=c,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];Qv({value:r,inclusive:o},{value:c,inclusive:t.inclusive})<0&&(r=c,o=t.inclusive);break}return{value:r,inclusive:o}}function Xv(n,e,t){let r=Qo,o=!0;for(const u of gf(n,e)){let c=Qo,m=!0;switch(u.op){case">=":case">":c=uE(u.value),m=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,m=!1;break;case"!=":case"not-in":c=Qo}jg({value:r,inclusive:o},{value:c,inclusive:m})>0&&(r=c,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];jg({value:r,inclusive:o},{value:c,inclusive:t.inclusive})>0&&(r=c,o=t.inclusive);break}return{value:r,inclusive:o}}class Wr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new dE(e,t,r):"array-contains"===t?new pE(e,r):"in"===t?new gE(e,r):"not-in"===t?new jS(e,r):"array-contains-any"===t?new jb(e,r):new Wr(e,t,r)}static lt(e,t,r){return"in"===t?new hE(e,r):new fE(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Xa(t,this.value)):null!==t&&fl(this.value)===fl(t)&&this.ft(Xa(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return dt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class dE extends Wr{constructor(e,t,r){super(e,t,r),this.key=Ze.fromName(r.referenceValue)}matches(e){const t=Ze.comparator(e.key,this.key);return this.ft(t)}}class hE extends Wr{constructor(e,t){super(e,"in",t),this.keys=e_(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class fE extends Wr{constructor(e,t){super(e,"not-in",t),this.keys=e_(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function e_(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ze.fromName(r.referenceValue))}class pE extends Wr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pl(t)&&ff(t.arrayValue,this.value)}}class gE extends Wr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ff(this.value.arrayValue,t)}}class jS extends Wr{constructor(e,t){super(e,"not-in",t)}matches(e){if(ff(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ff(this.value.arrayValue,t)}}class jb extends Wr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>ff(this.value.arrayValue,r))}}class nu{constructor(e,t){this.position=e,this.inclusive=t}}class gl{constructor(e,t="asc"){this.field=e,this.dir=t}}function $b(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Dr(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],c=n.position[o];if(r=u.field.isKeyField()?Ze.comparator(Ze.fromName(c.referenceValue),t.key):Xa(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function t_(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Vs(n.position[t],e.position[t]))return!1;return!0}class Jo{constructor(e,t=null,r=[],o=[],u=null,c="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=c,this.startAt=m,this.endAt=w,this._t=null,this.wt=null}}function mE(n,e,t,r,o,u,c,m){return new Jo(n,e,t,r,o,u,c,m)}function ml(n){return new Jo(n)}function yE(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Gg(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function zg(n){for(const e of n.filters)if(e.dt())return e.field;return null}function ru(n){return null!==n.collectionGroup}function Qc(n){const e=Xe(n);if(null===e._t){e._t=[];const t=zg(e),r=Gg(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new gl(t)),e._t.push(new gl(qn.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new gl(qn.keyField(),u))}}}return e._t}function Ii(n){const e=Xe(n);if(!e.wt)if("F"===e.limitType)e.wt=Jv(e.path,e.collectionGroup,Qc(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Qc(e))t.push(new gl(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new nu(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new nu(e.startAt.position,e.startAt.inclusive):null;e.wt=Jv(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.wt}function mf(n,e,t){return new Jo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yf(n,e){return pf(Ii(n),Ii(e))&&n.limitType===e.limitType}function n_(n){return`${tu(Ii(n))}|lt:${n.limitType}`}function vE(n){return`Query(target=${function Bb(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${eu(r.value)}`;var r}).join(", ")}]`),Wc(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>eu(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>eu(t)).join(",")),`Target(${e})`}(Ii(n))}; limitType=${n.limitType})`}function Wg(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ze.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,c){const m=Dr(o,u,c);return o.inclusive?m<=0:m<0}(t.startAt,Qc(t),r)||t.endAt&&!function(o,u,c){const m=Dr(o,u,c);return o.inclusive?m>=0:m>0}(t.endAt,Qc(t),r)));var t,r}function qg(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Us(n){return(e,t)=>{let r=!1;for(const o of Qc(n)){const u=Hb(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function Hb(n,e,t){const r=n.field.isKeyField()?Ze.comparator(e.key,t.key):function(o,u,c){const m=u.data.field(o),w=c.data.field(o);return null!==m&&null!==w?Xa(m,w):dt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return dt()}}function _E(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qc(e)?"-0":e}}function Bs(n){return{integerValue:""+n}}function gs(n,e){return qv(e)?Bs(e):_E(n,e)}class ki{constructor(){this._=void 0}}function wE(n,e,t){return n instanceof Jc?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof yl?DE(n,e):n instanceof Xo?Xc(n,e):function(r,o){const u=IE(r,o),c=r_(u)+r_(r.yt);return Kc(u)&&Kc(r.yt)?Bs(c):_E(r.It,c)}(n,e)}function EE(n,e,t){return n instanceof yl?DE(n,e):n instanceof Xo?Xc(n,e):t}function IE(n,e){return n instanceof ed?Kc(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Jc extends ki{}class yl extends ki{constructor(e){super(),this.elements=e}}function DE(n,e){const t=bE(e);for(const r of n.elements)t.some(o=>Vs(o,r))||t.push(r);return{arrayValue:{values:t}}}class Xo extends ki{constructor(e){super(),this.elements=e}}function Xc(n,e){let t=bE(e);for(const r of n.elements)t=t.filter(o=>!Vs(o,r));return{arrayValue:{values:t}}}class ed extends ki{constructor(e,t){super(),this.It=e,this.yt=t}}function r_(n){return Pn(n.integerValue||n.doubleValue)}function bE(n){return pl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class td{constructor(e,t){this.field=e,this.transform=t}}class Kg{constructor(e,t){this.version=e,this.transformResults=t}}class Zn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Zn}static exists(e){return new Zn(void 0,e)}static updateTime(e){return new Zn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class _f{}function i_(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new rd(n.key,Zn.none()):new vl(n.key,n.data,Zn.none());{const t=n.data,r=zr.empty();let o=new _n(qn.comparator);for(let u of e.fields)if(!o.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),o=o.add(u)}return new lo(n.key,r,new Gr(o.toArray()),Zn.none())}}function Zg(n,e,t){n instanceof vl?function(r,o,u){const c=r.value.clone(),m=a_(r.fieldTransforms,o,u.transformResults);c.setAll(m),o.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof lo?function(r,o,u){if(!vf(r.precondition,o))return void o.convertToUnknownDocument(u.version);const c=a_(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(o_(r)),m.setAll(c),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function nd(n,e,t,r){return n instanceof vl?function(o,u,c,m){if(!vf(o.precondition,u))return c;const w=o.value.clone(),D=u_(o.fieldTransforms,m,u);return w.setAll(D),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof lo?function(o,u,c,m){if(!vf(o.precondition,u))return c;const w=u_(o.fieldTransforms,m,u),D=u.data;return D.setAll(o_(o)),D.setAll(w),u.convertToFoundDocument(u.version,D).setHasLocalMutations(),null===c?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(T=>T.field))}(n,e,t,r):(c=t,vf(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c);var u,c}function TE(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=IE(r.transform,o||null);null!=u&&(null===t&&(t=zr.empty()),t.set(r.field,u))}return t||null}function s_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ll(t,r,(o,u)=>function CE(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof yl&&r instanceof yl||t instanceof Xo&&r instanceof Xo?ll(t.elements,r.elements,Vs):t instanceof ed&&r instanceof ed?Vs(t.yt,r.yt):t instanceof Jc&&r instanceof Jc);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class vl extends _f{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class lo extends _f{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function o_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function a_(n,e,t){const r=new Map;Ft(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],c=u.transform,m=e.data.field(u.field);r.set(u.field,EE(c,m,t[o]))}return r}function u_(n,e,t){const r=new Map;for(const o of n){const u=o.transform,c=t.data.field(o.field);r.set(o.field,wE(u,c,e))}return r}class rd extends _f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class l_ extends _f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Gb{constructor(e){this.count=e}}var br,pn;function SE(n){switch(n){default:return dt();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function AE(n){if(void 0===n)return pr("GRPC error has no .code"),fe.UNKNOWN;switch(n){case br.OK:return fe.OK;case br.CANCELLED:return fe.CANCELLED;case br.UNKNOWN:return fe.UNKNOWN;case br.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case br.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case br.INTERNAL:return fe.INTERNAL;case br.UNAVAILABLE:return fe.UNAVAILABLE;case br.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case br.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case br.NOT_FOUND:return fe.NOT_FOUND;case br.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case br.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case br.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case br.ABORTED:return fe.ABORTED;case br.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case br.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case br.DATA_LOSS:return fe.DATA_LOSS;default:return dt()}}(pn=br||(br={}))[pn.OK=0]="OK",pn[pn.CANCELLED=1]="CANCELLED",pn[pn.UNKNOWN=2]="UNKNOWN",pn[pn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pn[pn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pn[pn.NOT_FOUND=5]="NOT_FOUND",pn[pn.ALREADY_EXISTS=6]="ALREADY_EXISTS",pn[pn.PERMISSION_DENIED=7]="PERMISSION_DENIED",pn[pn.UNAUTHENTICATED=16]="UNAUTHENTICATED",pn[pn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pn[pn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pn[pn.ABORTED=10]="ABORTED",pn[pn.OUT_OF_RANGE=11]="OUT_OF_RANGE",pn[pn.UNIMPLEMENTED=12]="UNIMPLEMENTED",pn[pn.INTERNAL=13]="INTERNAL",pn[pn.UNAVAILABLE=14]="UNAVAILABLE",pn[pn.DATA_LOSS=15]="DATA_LOSS";class iu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Fs(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return Xr(this.inner)}size(){return this.innerSize}}const zb=new An(Ze.comparator);function Fi(){return zb}const ME=new An(Ze.comparator);function wf(...n){let e=ME;for(const t of n)e=e.insert(t.key,t);return e}function xE(n){let e=ME;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function co(){return Ef()}function RE(){return Ef()}function Ef(){return new iu(n=>n.toString(),(n,e)=>n.isEqual(e))}const Wb=new An(Ze.comparator),qb=new _n(Ze.comparator);function Wt(...n){let e=qb;for(const t of n)e=e.add(t);return e}const NE=new _n(jt);function If(){return NE}class id{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,sd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new id(Mt.min(),o,If(),Fi(),Wt())}}class sd{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new sd(r,t,Wt(),Wt(),Wt())}}class Df{constructor(e,t,r,o){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=o}}class c_{constructor(e,t){this.targetId=e,this.At=t}}class d_{constructor(e,t,r=Kn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class h_{constructor(){this.Rt=0,this.bt=su(),this.Pt=Kn.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Wt(),t=Wt(),r=Wt();return this.bt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:dt()}}),new sd(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=su()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class OE{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Fi(),this.qt=f_(),this.Kt=new _n(jt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:dt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,o)=>{this.Ht(o)&&t(o)})}Yt(e){const t=e.targetId,r=e.At.count,o=this.Xt(t);if(o){const u=o.target;if($g(u))if(0===r){const c=new Ze(u.path);this.jt(t,c,kn.newNoDocument(c,Mt.min()))}else Ft(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,c)=>{const m=this.Xt(c);if(m){if(u.current&&$g(m.target)){const w=new Ze(m.target.path);null!==this.Ut.get(w)||this.ee(c,w)||this.jt(c,w,kn.newNoDocument(w,e))}u.Dt&&(t.set(c,u.xt()),u.Nt())}});let r=Wt();this.qt.forEach((u,c)=>{let m=!0;c.forEachWhile(w=>{const D=this.Xt(w);return!D||2===D.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Ut.forEach((u,c)=>c.setReadTime(e));const o=new id(e,t,this.Kt,this.Ut,r);return this.Ut=Fi(),this.qt=f_(),this.Kt=new _n(jt),o}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const o=this.zt(e);this.ee(e,t)?o.kt(t,1):o.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new h_,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new _n(jt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new h_),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function f_(){return new An(Ze.comparator)}function su(){return new An(Ze.comparator)}const Kb={asc:"ASCENDING",desc:"DESCENDING"},Zb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class od{constructor(e,t){this.databaseId=e,this.gt=t}}function Yg(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qg(n,e){return n.gt?e.toBase64():e.toUint8Array()}function $S(n,e){return Yg(n,e.toTimestamp())}function Pr(n){return Ft(!!n),Mt.fromTimestamp(function(e){const t=Qi(e);return new mn(t.seconds,t.nanos)}(n))}function Jg(n,e){return(t=n,new nn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Yb(n){const e=nn.fromString(n);return Ft(y_(e)),e}function bt(n,e){return Jg(n.databaseId,e.path)}function ho(n,e){const t=Yb(e);if(t.get(1)!==n.databaseId.projectId)throw new Oe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Oe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ze(kE(t))}function p_(n,e){return Jg(n.databaseId,e)}function PE(n){const e=Yb(n);return 4===e.length?nn.emptyPath():kE(e)}function fo(n){return new nn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function kE(n){return Ft(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function bf(n,e,t){return{name:bt(n,e),fields:t.value.mapValue.fields}}function Cf(n,e,t){const r=ho(n,e.name),o=Pr(e.updateTime),u=new zr({mapValue:{fields:e.fields}}),c=kn.newFoundDocument(r,o,u);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function ad(n,e){let t;if(e instanceof vl)t={update:bf(n,e.key,e.value)};else if(e instanceof rd)t={delete:bt(n,e.key)};else if(e instanceof lo)t={update:bf(n,e.key,e.data),updateMask:tm(e.fieldMask)};else{if(!(e instanceof l_))return dt();t={verify:bt(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const c=u.transform;if(c instanceof Jc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof yl)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Xo)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof ed)return{fieldPath:u.field.canonicalString(),increment:c.yt};throw dt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:$S(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:dt()),t;var o}function Xg(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Zn.updateTime(Pr(o.updateTime)):void 0!==o.exists?Zn.exists(o.exists):Zn.none():Zn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,c){let m=null;"setToServerValue"in c?(Ft("REQUEST_TIME"===c.setToServerValue),m=new Jc):"appendMissingElements"in c?m=new yl(c.appendMissingElements.values||[]):"removeAllFromArray"in c?m=new Xo(c.removeAllFromArray.values||[]):"increment"in c?m=new ed(u,c.increment):dt();const w=qn.fromServerFormat(c.fieldPath);return new td(w,m)}(n,o)):[];var o;if(e.update){const o=ho(n,e.update.name),u=new zr({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Gr((e.updateMask.fieldPaths||[]).map(D=>qn.fromServerFormat(D)));return new lo(o,u,c,t,r)}return new vl(o,u,t,r)}if(e.delete){const o=ho(n,e.delete);return new rd(o,t)}if(e.verify){const o=ho(n,e.verify);return new l_(o,t)}return dt()}function g_(n,e){return{documents:[p_(n,e.path)]}}function em(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=p_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=p_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const D=w.map(T=>function(A){if("=="===A.op){if(Bg(A.value))return{unaryFilter:{field:po(A.field),op:"IS_NAN"}};if(aE(A.value))return{unaryFilter:{field:po(A.field),op:"IS_NULL"}}}else if("!="===A.op){if(Bg(A.value))return{unaryFilter:{field:po(A.field),op:"IS_NOT_NAN"}};if(aE(A.value))return{unaryFilter:{field:po(A.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:po(A.field),op:Xb(A.op),value:A.value}}}(T));return 1===D.length?D[0]:{compositeFilter:{op:"AND",filters:D}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(D=>{return{field:po((T=D).field),direction:Jb(T.dir)};var T})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=(D=e.limit,n.gt||Wc(D)?D:{value:D});var D,m,w;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function m_(n){let e=PE(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Ft(1===r);const T=t.from[0];T.allDescendants?o=T.collectionId:e=e.child(T.collectionId)}let u=[];t.where&&(u=LE(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(T=>{return new gl(ud((A=T).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction));var A}));let m=null;t.limit&&(m=function(T){let A;return A="object"==typeof T?T.value:T,Wc(A)?null:A}(t.limit));let w=null;var T;t.startAt&&(w=new nu((T=t.startAt).values||[],!!T.before));let D=null;return t.endAt&&(D=function(T){return new nu(T.values||[],!T.before)}(t.endAt)),mE(e,o,c,u,m,"F",w,D)}function LE(n){return n?void 0!==n.unaryFilter?[tC(n)]:void 0!==n.fieldFilter?[eC(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>LE(e)).reduce((e,t)=>e.concat(t)):dt():[]}function Jb(n){return Kb[n]}function Xb(n){return Zb[n]}function po(n){return{fieldPath:n.canonicalString()}}function ud(n){return qn.fromServerFormat(n.fieldPath)}function eC(n){return Wr.create(ud(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return dt()}}(n.fieldFilter.op),n.fieldFilter.value)}function tC(n){switch(n.unaryFilter.op){case"IS_NAN":const e=ud(n.unaryFilter.field);return Wr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=ud(n.unaryFilter.field);return Wr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ud(n.unaryFilter.field);return Wr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ud(n.unaryFilter.field);return Wr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return dt()}}function tm(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function y_(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function hi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=UE(e)),e=VE(n.get(t),e);return UE(e)}function VE(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function UE(n){return n+"\x01\x01"}function Li(n){const e=n.length;if(Ft(e>=2),2===e)return Ft("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),nn.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&dt(),n.charAt(c+1)){case"\x01":const m=n.substring(u,c);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,c),o+="\0";break;case"\x11":o+=n.substring(u,c+1);break;default:dt()}u=c+2}return new nn(r)}const ld=["userId","batchId"];function nm(n,e){return[n,hi(e)]}function BE(n,e,t){return[n,hi(e),t]}const nC={},jE=["prefixPath","collectionGroup","readTime","documentId"],$E=["prefixPath","collectionGroup","documentId"],HE=["collectionGroup","readTime","prefixPath","documentId"],rC=["canonicalId","targetId"],GE=["targetId","path"],iC=["path","targetId"],sC=["collectionId","parent"],GS=["indexId","uid"],zS=["uid","sequenceNumber"],WS=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],qS=["indexId","uid","orderedDocumentKey"],zE=["userId","collectionPath","documentId"],rm=["userId","collectionPath","largestBatchId"],oC=["userId","collectionGroup","largestBatchId"],WE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],qE=[...WE,"documentOverlays"],cd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],KE=cd,aC=[...KE,"indexConfiguration","indexState","indexEntries"];class v_ extends sE{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function qr(n,e){const t=Xe(n);return Os.M(t.ie,e)}class __{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Zg(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=nd(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=nd(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=RE();return this.mutations.forEach(o=>{const u=e.get(o.key),c=u.overlayedDocument;let m=this.applyToLocalView(c,u.mutatedFields);m=t.has(o.key)?null:m;const w=i_(c,m);null!==w&&r.set(o.key,w),c.isValidDocument()||c.convertToNoDocument(Mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Wt())}isEqual(e){return this.batchId===e.batchId&&ll(this.mutations,e.mutations,(t,r)=>s_(t,r))&&ll(this.baseMutations,e.baseMutations,(t,r)=>s_(t,r))}}class im{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Ft(e.mutations.length===r.length);let o=Wb;const u=e.mutations;for(let c=0;c<u.length;c++)o=o.insert(u[c].key,r[c].version);return new im(e,t,r,o)}}class w_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ou{constructor(e,t,r,o,u=Mt.min(),c=Mt.min(),m=Kn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=m}withSequenceNumber(e){return new ou(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ou(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ou(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class dd{constructor(e){this.re=e}}function E_(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:sm(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:bt(o=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Yg(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:au(e.version)};else{if(!e.isUnknownDocument())return dt();r.unknownDocument={path:t.path.toArray(),version:au(e.version)}}var o,u;return r}function sm(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function au(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _l(n){const e=new mn(n.seconds,n.nanoseconds);return Mt.fromTimestamp(e)}function uu(n,e){const t=(e.baseMutations||[]).map(u=>Xg(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const c=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(c.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>Xg(n.re,u)),o=mn.fromMillis(e.localWriteTimeMs);return new __(e.batchId,o,t,r)}function Tf(n){const e=_l(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?_l(n.lastLimboFreeSnapshotVersion):Mt.min();let r;var o;return void 0!==n.query.documents?(Ft(1===(o=n.query).documents.length),r=Ii(ml(PE(o.documents[0])))):r=Ii(m_(n.query)),new ou(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Kn.fromBase64String(n.resumeToken))}function om(n,e){const t=au(e.snapshotVersion),r=au(e.lastLimboFreeSnapshotVersion);let o;o=$g(e.target)?g_(n.re,e.target):em(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:tu(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function I_(n){const e=m_({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?mf(e,e.limit,"L"):e}function am(n,e){return new w_(e.largestBatchId,Xg(n.re,e.overlayMutation))}function D_(n,e){const t=e.path.lastSegment();return[n,hi(e.path.popLast()),t]}function ZE(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:au(r.readTime),documentKey:hi(r.documentKey.path),largestBatchId:r.largestBatchId}}class lC{getBundleMetadata(e,t){return YE(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:_l(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return YE(e).put({bundleId:(r=t).id,createTime:au(Pr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return um(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:I_(o.bundledQuery),readTime:_l(o.readTime)};var o})}saveNamedQuery(e,t){return um(e).put({name:(r=t).name,readTime:au(Pr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function YE(n){return qr(n,"bundles")}function um(n){return qr(n,"namedQueries")}class lm{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new lm(e,t.uid||"")}getOverlay(e,t){return hd(e).get(D_(this.userId,t)).next(r=>r?am(this.It,r):null)}getOverlays(e,t){const r=co();return oe.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,c)=>{const m=new w_(t,c);o.push(this.ue(e,m))}),oe.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(c=>o.add(hi(c.getCollectionPath())));const u=[];return o.forEach(c=>{const m=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(hd(e).Y("collectionPathOverlayIndex",m))}),oe.waitFor(u)}getOverlaysForCollection(e,t,r){const o=co(),u=hi(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return hd(e).W("collectionPathOverlayIndex",c).next(m=>{for(const w of m){const D=am(this.It,w);o.set(D.getKey(),D)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=co();let c;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return hd(e).Z({index:"collectionGroupOverlayIndex",range:m},(w,D,T)=>{const A=am(this.It,D);u.size()<o||A.largestBatchId===c?(u.set(A.getKey(),A),c=A.largestBatchId):T.done()}).next(()=>u)}ue(e,t){return hd(e).put(function(r,o,u){const[c,m,w]=D_(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:ad(r.re,u.mutation)}}(this.It,this.userId,t))}}function hd(n){return qr(n,"documentOverlays")}class wl{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Pn(e.integerValue));else if("doubleValue"in e){const r=Pn(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),qc(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(ps(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?Zv(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):dt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const o of Object.keys(r))this._e(o,t),this.ae(r[o],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const o of r)this.ae(o,t)}ge(e,t){this.le(t,37),Ze.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function cC(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function QE(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=cC(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}wl.Te=new wl;class dC{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const o=t.codePointAt(0);this.Pe(240|o>>>18),this.Pe(128|63&o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o)}}this.ve()}De(e){const t=this.Ce(e),r=QE(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ne(e){const t=this.Ce(e),r=QE(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class hC{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class fC{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Sf{constructor(){this.Be=new dC,this.Le=new hC(this.Be),this.Ue=new fC(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class El{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new El(this.indexId,this.documentKey,this.arrayValue,r)}}function lu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=b_(n.arrayValue,e.arrayValue),0!==t?t:(t=b_(n.directionalValue,e.directionalValue),0!==t?t:Ze.comparator(n.documentKey,e.documentKey)))}function b_(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class pC{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=jv(e);if(void 0!==t&&!this.ze(t))return!1;const r=Ns(e);let o=0,u=0;for(;o<r.length&&this.ze(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.je){const c=r[o];if(!this.He(this.je,c)||!this.Je(this.Ge[u++],c))return!1;++o}for(;o<r.length;++o){const c=r[o];if(u>=this.Ge.length||!this.Je(this.Ge[u++],c))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class gC{constructor(){this.Ye=new cm}addToCollectionParentIndex(e,t){return this.Ye.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Yi.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Yi.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class cm{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new _n(nn.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new _n(nn.comparator)).toArray()}}const dm=new Uint8Array(0);class mC{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new cm,this.Ze=new iu(r=>tu(r),(r,o)=>pf(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:hi(o)};return JE(e).put(u)}return oe.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Rg(t),""],!1,!0);return JE(e).W(o).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Li(c.parent))}return r})}addFieldIndex(e,t){const r=fd(e),o={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var c;delete o.indexId;const u=r.add(o);if(t.indexState){const c=pd(e);return u.next(m=>{c.put(ZE(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=fd(e),o=pd(e),u=Il(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Il(e);let o=!0;const u=new Map;return oe.forEach(this.tn(t),c=>this.en(e,c).next(m=>{o&&(o=!!m),u.set(c,m)})).next(()=>{if(o){let c=Wt();const m=[];return oe.forEach(u,(w,D)=>{var T;Ve("IndexedDbIndexManager",`Using index ${T=w,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(Gt=>`${Gt.fieldPath}:${Gt.kind}`).join(",")}`} to execute ${tu(t)}`);const A=function(Gt,Tt){const $t=jv(Tt);if(void 0===$t)return null;for(const rn of gf(Gt,$t.fieldPath))switch(rn.op){case"array-contains-any":return rn.value.arrayValue.values||[];case"array-contains":return[rn.value]}return null}(D,w),L=function(Gt,Tt){const $t=new Map;for(const rn of Ns(Tt))for(const ni of gf(Gt,rn.fieldPath))switch(ni.op){case"==":case"in":$t.set(rn.fieldPath.canonicalString(),ni.value);break;case"not-in":case"!=":return $t.set(rn.fieldPath.canonicalString(),ni.value),Array.from($t.values())}return null}(D,w),G=function(Gt,Tt){const $t=[];let rn=!0;for(const ni of Ns(Tt)){const z0=0===ni.kind?Hg(Gt,ni.fieldPath,Gt.startAt):Xv(Gt,ni.fieldPath,Gt.startAt);$t.push(z0.value),rn&&(rn=z0.inclusive)}return new nu($t,rn)}(D,w),X=function(Gt,Tt){const $t=[];let rn=!0;for(const ni of Ns(Tt)){const z0=0===ni.kind?Xv(Gt,ni.fieldPath,Gt.endAt):Hg(Gt,ni.fieldPath,Gt.endAt);$t.push(z0.value),rn&&(rn=z0.inclusive)}return new nu($t,rn)}(D,w),Se=this.nn(w,D,G),Me=this.nn(w,D,X),mt=this.sn(w,D,L),Rt=this.rn(w.indexId,A,Se,G.inclusive,Me,X.inclusive,mt);return oe.forEach(Rt,Gt=>r.J(Gt,t.limit).next(Tt=>{Tt.forEach($t=>{const rn=Ze.fromSegments($t.documentKey);c.has(rn)||(c=c.add(rn),m.push(rn))})}))}).next(()=>m)}return oe.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,o,u,c,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),D=w/(null!=t?t.length:1),T=[];for(let A=0;A<w;++A){const L=t?this.on(t[A/D]):dm,G=this.un(e,L,r[A%D],o),X=this.cn(e,L,u[A%D],c),Se=m.map(Me=>this.un(e,L,Me,!0));T.push(...this.createRange(G,X,Se))}return T}un(e,t,r,o){const u=new El(e,Ze.empty(),t,r);return o?u:u.Ke()}cn(e,t,r,o){const u=new El(e,Ze.empty(),t,r);return o?u.Ke():u}en(e,t){const r=new pC(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let c=null;for(const m of u)r.We(m)&&(!c||m.fields.length>c.fields.length)&&(c=m);return c})}getIndexType(e,t){let r=2;return oe.forEach(this.tn(t),o=>this.en(e,o).next(u=>{u?0!==r&&u.fields.length<function(c){let m=new _n(qn.comparator),w=!1;for(const D of c.filters){const T=D;T.field.isKeyField()||("array-contains"===T.op||"array-contains-any"===T.op?w=!0:m=m.add(T.field))}for(const D of c.orderBy)D.field.isKeyField()||(m=m.add(D.field));return m.size+(w?1:0)}(o)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Sf;for(const o of Ns(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const c=r.qe(o.kind);wl.Te.ce(u,c)}return r.$e()}on(e){const t=new Sf;return wl.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Sf;return wl.Te.ce(uo(this.databaseId,t),r.qe(function(o){const u=Ns(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let o=[];o.push(new Sf);let u=0;for(const c of Ns(e)){const m=r[u++];for(const w of o)if(this.ln(t,c.fieldPath)&&pl(m))o=this.fn(o,c,m);else{const D=w.qe(c.kind);wl.Te.ce(m,D)}}return this.dn(o)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const o=[...e],u=[];for(const c of r.arrayValue.values||[])for(const m of o){const w=new Sf;w.seed(m.$e()),wl.Te.ce(c,w.qe(t.kind)),u.push(w)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof Wr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=fd(e),o=pd(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const c=[];return oe.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{c.push(function(D,T){const A=T?new Og(T.sequenceNumber,new Yi(_l(T.readTime),new Ze(Li(T.documentKey)),T.largestBatchId)):Og.empty(),L=D.fields.map(([G,X])=>new $v(qn.fromServerFormat(G),X));return new Ng(D.indexId,D.collectionGroup,L,A)}(m,w))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:jt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=fd(e),u=pd(e);return this._n(e).next(c=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>oe.forEach(m,w=>u.put(ZE(w.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(o,u)=>{const c=r.get(o.collectionGroup);return(c?oe.resolve(c):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),oe.forEach(m,w=>this.wn(e,o,w).next(D=>{const T=this.mn(u,w);return D.isEqual(T)?oe.resolve():this.gn(e,u,w,D,T)}))))})}yn(e,t,r,o){return Il(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,o){return Il(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const o=Il(e);let u=new _n(lu);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(c,m)=>{u=u.add(new El(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}mn(e,t){let r=new _n(lu);const o=this.an(t,e);if(null==o)return r;const u=jv(t);if(null!=u){const c=e.data.field(u.fieldPath);if(pl(c))for(const m of c.arrayValue.values||[])r=r.add(new El(t.indexId,e.key,this.on(m),o))}else r=r.add(new El(t.indexId,e.key,dm,o));return r}gn(e,t,r,o,u){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(m,w,D,T,A){const L=m.getIterator(),G=w.getIterator();let X=Ls(L),Se=Ls(G);for(;X||Se;){let Me=!1,mt=!1;if(X&&Se){const Rt=D(X,Se);Rt<0?mt=!0:Rt>0&&(Me=!0)}else null!=X?mt=!0:Me=!0;Me?(T(Se),Se=Ls(G)):mt?(A(X),X=Ls(L)):(X=Ls(L),Se=Ls(G))}}(o,u,lu,m=>{c.push(this.yn(e,t,r,m))},m=>{c.push(this.pn(e,t,r,m))}),oe.waitFor(c)}_n(e){let t=1;return pd(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,m)=>lu(c,m)).filter((c,m,w)=>!m||0!==lu(c,w[m-1]));const o=[];o.push(e);for(const c of r){const m=lu(c,e),w=lu(c,t);if(0===m)o[0]=e.Ke();else if(m>0&&w<0)o.push(c),o.push(c.Ke());else if(w>0)break}o.push(t);const u=[];for(let c=0;c<o.length;c+=2)u.push(IDBKeyRange.bound([o[c].indexId,this.uid,o[c].arrayValue,o[c].directionalValue,dm,[]],[o[c+1].indexId,this.uid,o[c+1].arrayValue,o[c+1].directionalValue,dm,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(hm)}getMinOffset(e,t){return oe.mapArray(this.tn(t),r=>this.en(e,r).next(o=>o||dt())).next(hm)}}function JE(n){return qr(n,"collectionParents")}function Il(n){return qr(n,"indexEntries")}function fd(n){return qr(n,"indexConfiguration")}function pd(n){return qr(n,"indexState")}function hm(n){Ft(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;Pg(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Yi(e.readTime,e.documentKey,t)}const XE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Vi(e,Vi.DEFAULT_COLLECTION_PERCENTILE,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fm(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let m=0;const w=r.Z({range:c},(T,A,L)=>(m++,L.delete()));u.push(w.next(()=>{Ft(1===m)}));const D=[];for(const T of t.mutations){const A=BE(e,T.key.path,t.batchId);u.push(o.delete(A)),D.push(T.key)}return oe.waitFor(u).next(()=>D)}function pm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw dt();e=n.noDocument}return JSON.stringify(e).length}Vi.DEFAULT_COLLECTION_PERCENTILE=10,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vi.DEFAULT=new Vi(41943040,Vi.DEFAULT_COLLECTION_PERCENTILE,Vi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vi.DISABLED=new Vi(-1,0,0);class Af{constructor(e,t,r,o){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static oe(e,t,r,o){Ft(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new Af(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ea(e).Z({index:"userMutationsIndex",range:r},(o,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=gd(e),c=ea(e);return c.add({}).next(m=>{Ft("number"==typeof m);const w=new __(m,t,r,o),D=function(L,G,X){const Se=X.baseMutations.map(mt=>ad(L.re,mt)),Me=X.mutations.map(mt=>ad(L.re,mt));return{userId:G,batchId:X.batchId,localWriteTimeMs:X.localWriteTime.toMillis(),baseMutations:Se,mutations:Me}}(this.It,this.userId,w),T=[];let A=new _n((L,G)=>jt(L.canonicalString(),G.canonicalString()));for(const L of o){const G=BE(this.userId,L.key.path,m);A=A.add(L.key.path.popLast()),T.push(c.put(D)),T.push(u.put(G,nC))}return A.forEach(L=>{T.push(this.indexManager.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.In[m]=w.keys()}),oe.waitFor(T).next(()=>w)})}lookupMutationBatch(e,t){return ea(e).get(t).next(r=>r?(Ft(r.userId===this.userId),uu(this.It,r)):null)}Tn(e,t){return this.In[t]?oe.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return ea(e).Z({index:"userMutationsIndex",range:o},(c,m,w)=>{m.userId===this.userId&&(Ft(m.batchId>=r),u=uu(this.It,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ea(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ea(e).W("userMutationsIndex",t).next(r=>r.map(o=>uu(this.It,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=nm(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return gd(e).Z({range:o},(c,m,w)=>{const[D,T,A]=c,L=Li(T);if(D===this.userId&&t.path.isEqual(L))return ea(e).get(A).next(G=>{if(!G)throw dt();Ft(G.userId===this.userId),u.push(uu(this.It,G))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(jt);const o=[];return t.forEach(u=>{const c=nm(this.userId,u.path),m=IDBKeyRange.lowerBound(c),w=gd(e).Z({range:m},(D,T,A)=>{const[L,G,X]=D,Se=Li(G);L===this.userId&&u.path.isEqual(Se)?r=r.add(X):A.done()});o.push(w)}),oe.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=nm(this.userId,r),c=IDBKeyRange.lowerBound(u);let m=new _n(jt);return gd(e).Z({range:c},(w,D,T)=>{const[A,L,G]=w,X=Li(L);A===this.userId&&r.isPrefixOf(X)?X.length===o&&(m=m.add(G)):T.done()}).next(()=>this.En(e,m))}En(e,t){const r=[],o=[];return t.forEach(u=>{o.push(ea(e).get(u).next(c=>{if(null===c)throw dt();Ft(c.userId===this.userId),r.push(uu(this.It,c))}))}),oe.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return fm(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),oe.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return gd(e).Z({range:r},(u,c,m)=>{if(u[0]===this.userId){const w=Li(u[1]);o.push(w)}else m.done()}).next(()=>{Ft(0===o.length)})})}containsKey(e,t){return Dl(e,this.userId,t)}Rn(e){return yC(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Dl(n,e,t){const r=nm(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return gd(n).Z({range:u,X:!0},(m,w,D)=>{const[T,A,L]=m;T===e&&A===o&&(c=!0),D.done()}).next(()=>c)}function ea(n){return qr(n,"mutations")}function gd(n){return qr(n,"documentMutations")}function yC(n){return qr(n,"mutationQueues")}class cu{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new cu(0)}static vn(){return new cu(-1)}}class C_{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new cu(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Mt.fromTimestamp(new mn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>md(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Ft(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return md(e).Z((c,m)=>{const w=Tf(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>oe.waitFor(u)).next(()=>o)}forEachTarget(e,t){return md(e).Z((r,o)=>{const u=Tf(o);t(u)})}Vn(e){return gm(e).get("targetGlobalKey").next(t=>(Ft(null!==t),t))}Sn(e,t){return gm(e).put("targetGlobalKey",t)}Dn(e,t){return md(e).put(om(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=tu(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return md(e).Z({range:o,index:"queryTargetsIndex"},(c,m,w)=>{const D=Tf(m);pf(t,D.target)&&(u=D,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=du(e);return t.forEach(c=>{const m=hi(c.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,c))}),oe.waitFor(o)}removeMatchingKeys(e,t,r){const o=du(e);return oe.forEach(t,u=>{const c=hi(u.path);return oe.waitFor([o.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=du(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=du(e);let u=Wt();return o.Z({range:r,X:!0},(c,m,w)=>{const D=Li(c[1]),T=new Ze(D);u=u.add(T)}).next(()=>u)}containsKey(e,t){const r=hi(t.path),o=IDBKeyRange.bound([r],[Rg(r)],!1,!0);let u=0;return du(e).Z({index:"documentTargetsIndex",X:!0,range:o},([c,m],w,D)=>{0!==c&&(u++,D.done())}).next(()=>u>0)}se(e,t){return md(e).get(t).next(r=>r?Tf(r):null)}}function md(n){return qr(n,"targets")}function gm(n){return qr(n,"targetGlobal")}function du(n){return qr(n,"targetDocuments")}function T_([n,e],[t,r]){const o=jt(n,t);return 0===o?jt(e,r):o}class S_{constructor(e){this.xn=e,this.buffer=new _n(T_),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();T_(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class eI{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,be.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Ps(r)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ao(r)}yield t.Fn(3e5)}))}}class tI{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(Pi.at);const r=new S_(t);return this.$n.forEachTarget(e,o=>r.On(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.On(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(XE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),XE):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,o,u,c,m,w,D;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(A=>(A>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,c=Date.now(),this.nthSequenceNumber(e,o))).next(A=>(r=A,m=Date.now(),this.removeTargets(e,r,t))).next(A=>(u=A,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(A=>(D=Date.now(),Lv()<=Ga.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-T}ms\n\tDetermined least recently used ${o} in `+(m-c)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${A} documents in `+(D-w)+`ms\nTotal Duration: ${D-T}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:A})))}}class nI{constructor(e,t){this.db=e,this.garbageCollector=new tI(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return Mf(e,r)}removeReference(e,t,r){return Mf(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Mf(e,t)}Gn(e,t){return function(r,o){let u=!1;return yC(r).tt(c=>Dl(r,c,o).next(m=>(m&&(u=!0),oe.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Kn(e,(c,m)=>{if(m<=t){const w=this.Gn(e,c).next(D=>{if(!D)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Mt.min()),du(e).delete([0,hi(c.path)])))});o.push(w)}}).next(()=>oe.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Mf(e,t)}Kn(e,t){const r=du(e);let o,u=Pi.at;return r.Z({index:"documentTargetsIndex"},([c,m],{path:w,sequenceNumber:D})=>{0===c?(u!==Pi.at&&t(new Ze(Li(o)),u),u=D,o=w):u=Pi.at}).next(()=>{u!==Pi.at&&t(new Ze(Li(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Mf(n,e){return du(n).put((r=n.currentSequenceNumber,{targetId:0,path:hi(e.path),sequenceNumber:r}));var r}class rI{constructor(){this.changes=new iu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,kn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class vC{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return yd(e).put(r)}removeEntry(e,t,r){return yd(e).delete(function(o,u){const c=o.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],sm(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=kn.newInvalidDocument(t);return yd(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(vd(t))},(o,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:kn.newInvalidDocument(t)};return yd(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(vd(t))},(o,u)=>{r={document:this.jn(t,u),size:pm(u)}}).next(()=>r)}getEntries(e,t){let r=Fi();return this.zn(e,t,(o,u)=>{const c=this.jn(o,u);r=r.insert(o,c)}).next(()=>r)}Hn(e,t){let r=Fi(),o=new An(Ze.comparator);return this.zn(e,t,(u,c)=>{const m=this.jn(u,c);r=r.insert(u,m),o=o.insert(u,pm(c))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return oe.resolve();let o=new _n(oI);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(vd(o.first()),vd(o.last())),c=o.getIterator();let m=c.getNext();return yd(e).Z({index:"documentKeyIndex",range:u},(w,D,T)=>{const A=Ze.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;m&&oI(m,A)<0;)r(m,null),m=c.getNext();m&&m.isEqual(A)&&(r(m,D),m=c.hasNext()?c.getNext():null),m?T.j(vd(m)):T.done()}).next(()=>{for(;m;)r(m,null),m=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),sm(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return yd(e).W(IDBKeyRange.bound(o,u,!0)).next(c=>{let m=Fi();for(const w of c){const D=this.jn(Ze.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(D.key,D)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=Fi();const c=sI(t,r),m=sI(t,Yi.max());return yd(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,m,!0)},(w,D,T)=>{const A=this.jn(Ze.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(A.key,A),u.size===o&&T.done()}).next(()=>u)}newChangeBuffer(e){return new _C(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return A_(e).get("remoteDocumentGlobalKey").next(t=>(Ft(!!t),t))}Qn(e,t){return A_(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function uC(n,e){let t;if(e.document)t=Cf(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ze.fromSegments(e.noDocument.path),o=_l(e.noDocument.readTime);t=kn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return dt();{const r=Ze.fromSegments(e.unknownDocument.path),o=_l(e.unknownDocument.version);t=kn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new mn(r[0],r[1]);return Mt.fromTimestamp(o)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Mt.min()))return r}return kn.newInvalidDocument(e)}}function iI(n){return new vC(n)}class _C extends rI{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new iu(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new _n((u,c)=>jt(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const m=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,m.readTime)),c.isValidDocument()){const w=E_(this.Yn.It,c);o=o.add(u.path.popLast()),r+=pm(w)-m.size,t.push(this.Yn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=E_(this.Yn.It,c.convertToNoDocument(Mt.min()));t.push(this.Yn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((u,c)=>{this.Xn.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function A_(n){return qr(n,"remoteDocumentGlobal")}function yd(n){return qr(n,"remoteDocumentsV14")}function vd(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function sI(n,e){const t=e.documentKey.path.toArray();return[n,sm(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function oI(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=jt(t[u],r[u]),o)return o;return o=jt(t.length,r.length),o||(o=jt(t[t.length-2],r[r.length-2]),o||jt(t[t.length-1],r[r.length-1]))}class KS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class wC{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&nd(r.mutation,o,Gr.empty(),mn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Wt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Wt()){const o=co();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let c=wf();return u.forEach((m,w)=>{c=c.insert(m,w.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=co();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Wt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((c,m)=>{t.set(c,m)})})}computeViews(e,t,r,o){let u=Fi();const c=Ef(),m=Ef();return t.forEach((w,D)=>{const T=r.get(D.key);o.has(D.key)&&(void 0===T||T.mutation instanceof lo)?u=u.insert(D.key,D):void 0!==T&&(c.set(D.key,T.mutation.getFieldMask()),nd(T.mutation,D,T.mutation.getFieldMask(),mn.now()))}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((D,T)=>c.set(D,T)),t.forEach((D,T)=>{var A;return m.set(D,new KS(T,null!==(A=c.get(D))&&void 0!==A?A:null))}),m))}recalculateAndSaveOverlays(e,t){const r=Ef();let o=new An((c,m)=>c-m),u=Wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const m of c)m.keys().forEach(w=>{const D=t.get(w);if(null===D)return;let T=r.get(w)||Gr.empty();T=m.applyToLocalView(D,T),r.set(w,T);const A=(o.get(m.batchId)||Wt()).add(w);o=o.insert(m.batchId,A)})}).next(()=>{const c=[],m=o.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),D=w.key,T=w.value,A=RE();T.forEach(L=>{if(!u.has(L)){const G=i_(t.get(L),r.get(L));null!==G&&A.set(L,G),u=u.add(L)}}),c.push(this.documentOverlayCache.saveOverlays(e,D,A))}return oe.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ze.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ru(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const c=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):oe.resolve(co());let m=-1,w=u;return c.next(D=>oe.forEach(D,(T,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),u.get(T)?oe.resolve():this.getBaseDocument(e,T,A).next(L=>{w=w.insert(T,L)}))).next(()=>this.populateOverlays(e,D,u)).next(()=>this.computeViews(e,w,D,Wt())).next(T=>({batchId:m,changes:xE(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ze(t)).next(r=>{let o=wf();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=wf();return this.indexManager.getCollectionParents(e,o).next(c=>oe.forEach(c,m=>{const w=(D=t,T=m.child(o),new Jo(T,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,T;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(D=>{D.forEach((T,A)=>{u=u.insert(T,A)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((m,w)=>{const D=w.getKey();null===o.get(D)&&(o=o.insert(D,kn.newInvalidDocument(D)))});let c=wf();return o.forEach((m,w)=>{const D=u.get(m);void 0!==D&&nd(D.mutation,w,Gr.empty(),mn.now()),Wg(t,w)&&(c=c.insert(m,w))}),c})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):oe.resolve(kn.newInvalidDocument(t))}}class EC{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return oe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Pr(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:I_(r.bundledQuery),readTime:Pr(r.readTime)}),oe.resolve();var r}}class IC{constructor(){this.overlays=new An(Ze.comparator),this.es=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=co();return oe.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ue(e,t,u)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const o=co(),u=t.length+1,c=new Ze(t.child("")),m=this.overlays.getIteratorFrom(c);for(;m.hasNext();){const w=m.getNext().value,D=w.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return oe.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new An((D,T)=>D-T);const c=this.overlays.getIterator();for(;c.hasNext();){const D=c.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let T=u.get(D.largestBatchId);null===T&&(T=co(),u=u.insert(D.largestBatchId,T)),T.set(D.getKey(),D)}}const m=co(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((D,T)=>m.set(D,T)),!(m.size()>=o)););return oe.resolve(m)}ue(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const c=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new w_(t,r));let u=this.es.get(t);void 0===u&&(u=Wt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class M_{constructor(){this.ns=new _n(kr.ss),this.rs=new _n(kr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new kr(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new kr(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ze(new nn([])),r=new kr(t,e),o=new kr(t,e+1),u=[];return this.rs.forEachInRange([r,o],c=>{this.cs(c),u.push(c.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ze(new nn([])),r=new kr(t,e),o=new kr(t,e+1);let u=Wt();return this.rs.forEachInRange([r,o],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new kr(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class kr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ze.comparator(e.key,t.key)||jt(e._s,t._s)}static os(e,t){return jt(e._s,t._s)||Ze.comparator(e.key,t.key)}}class aI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new _n(kr.ss)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const c=new __(u,t,r,o);this.mutationQueue.push(c);for(const m of o)this.gs=this.gs.add(new kr(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return oe.resolve(c)}lookupMutationBatch(e,t){return oe.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),u=o<0?0:o;return oe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new kr(t,0),o=new kr(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,o],c=>{const m=this.ys(c._s);u.push(m)}),oe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _n(jt);return t.forEach(o=>{const u=new kr(o,0),c=new kr(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,c],m=>{r=r.add(m._s)})}),oe.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Ze.isDocumentKey(u)||(u=u.child(""));const c=new kr(new Ze(u),0);let m=new _n(jt);return this.gs.forEachWhile(w=>{const D=w.key.path;return!!r.isPrefixOf(D)&&(D.length===o&&(m=m.add(w._s)),!0)},c),oe.resolve(this.Is(m))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Ft(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return oe.forEach(t.mutations,o=>{const u=new kr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new kr(t,0),o=this.gs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return oe.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class DC{constructor(e){this.Es=e,this.docs=new An(Ze.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,c=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():kn.newInvalidDocument(t))}getEntries(e,t){let r=Fi();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():kn.newInvalidDocument(o))}),oe.resolve(r)}getAllFromCollection(e,t,r){let o=Fi();const u=new Ze(t.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:m,value:{document:w}}=c.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||Pg(iE(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return oe.resolve(o)}getAllFromCollectionGroup(e,t,r,o){dt()}As(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new bC(this)}getSize(e){return oe.resolve(this.size)}}class bC extends rI{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class CC{constructor(e){this.persistence=e,this.Rs=new iu(t=>tu(t),pf),this.lastRemoteSnapshotVersion=Mt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new M_,this.targetCount=0,this.vs=cu.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),oe.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new cu(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Dn(t),oe.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Rs.forEach((c,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Rs.delete(c),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),oe.waitFor(u).next(()=>o)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(c=>{u.push(o.markPotentiallyOrphaned(e,c))}),oe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.Ps.containsKey(t))}}class uI{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Pi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new CC(this),this.indexManager=new gC,this.remoteDocumentCache=new DC(r=>this.referenceDelegate.xs(r)),this.It=new dd(t),this.Ns=new EC(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new IC,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new aI(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const o=new TC(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(u=>this.referenceDelegate.Os(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ms(e,t){return oe.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class TC extends sE{constructor(e){super(),this.currentSequenceNumber=e}}class mm{constructor(e){this.persistence=e,this.Fs=new M_,this.$s=null}static Bs(e){return new mm(e)}get Ls(){if(this.$s)return this.$s;throw dt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ls,r=>{const o=Ze.fromPath(r);return this.Us(e,o).next(u=>{u||t.removeEntry(o,Mt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return oe.or([()=>oe.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class SC{constructor(e){this.It=e}$(e,t,r,o){const u=new Fg("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ld,{unique:!0}),m.createObjectStore("documentMutations"),_d(e),function(m){m.createObjectStore("remoteDocuments")}(e));let c=oe.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),_d(e)),c=c.next(()=>function(m){const w=m.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Mt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",D)}(u))),r<4&&o>=4&&(0!==r&&(c=c.next(()=>function(m,w){return w.store("mutations").W().next(D=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ld,{unique:!0});const T=w.store("mutations"),A=D.map(L=>T.put(L));return oe.waitFor(A)})}(e,u))),c=c.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(c=c.next(()=>this.qs(u))),r<6&&o>=6&&(c=c.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&o>=7&&(c=c.next(()=>this.Gs(u))),r<8&&o>=8&&(c=c.next(()=>this.Qs(e,u))),r<9&&o>=9&&(c=c.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(c=c.next(()=>this.js(u))),r<11&&o>=11&&(c=c.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(c=c.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:zE});w.createIndex("collectionPathOverlayIndex",rm,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",oC,{unique:!1})}(e)})),r<13&&o>=13&&(c=c.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:jE});w.createIndex("documentKeyIndex",$E),w.createIndex("collectionGroupIndex",HE)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(c=c.next(()=>this.zs(e,u))),r<15&&o>=15&&(c=c.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:GS}).createIndex("sequenceNumberIndex",zS,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:WS}).createIndex("documentKeyIndex",qS,{unique:!1})}(e))),c}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=pm(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>oe.forEach(o,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",c).next(m=>oe.forEach(m,w=>{Ft(w.userId===u.userId);const D=uu(this.It,w);return fm(e,u.userId,D).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((c,m)=>{const w=new nn(c),D=[0,hi(w)];u.push(t.get(D).next(T=>T?oe.resolve():t.put({targetId:0,path:hi(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>oe.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:sC});const r=t.store("collectionParents"),o=new cm,u=c=>{if(o.add(c)){const m=c.lastSegment(),w=c.popLast();return r.put({collectionId:m,parent:hi(w)})}};return t.store("remoteDocuments").Z({X:!0},(c,m)=>{const w=new nn(c);return u(w.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([c,m,w],D)=>{const T=Li(m);return u(T.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const u=Tf(o),c=om(this.It,u);return t.put(c)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,c)=>{const m=t.store("remoteDocumentsV14"),w=(D=c,D.document?new Ze(nn.fromString(D.document.name).popFirst(5)):D.noDocument?Ze.fromSegments(D.noDocument.path):D.unknownDocument?Ze.fromSegments(D.unknownDocument.path):dt()).path.toArray();var D;const T={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};o.push(m.put(T))}).next(()=>oe.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=iI(this.It),u=new uI(mm.Bs,this.It.re);return r.W().next(c=>{const m=new Map;return c.forEach(w=>{var D;let T=null!==(D=m.get(w.userId))&&void 0!==D?D:Wt();uu(this.It,w).keys().forEach(A=>T=T.add(A)),m.set(w.userId,T)}),oe.forEach(m,(w,D)=>{const T=new Hr(D),A=lm.oe(this.It,T),L=u.getIndexManager(T),G=Af.oe(T,this.It,L,u.referenceDelegate);return new wC(o,G,A,L).recalculateAndSaveOverlaysForDocumentKeys(new v_(t,Pi.at),w).next()})})}}function _d(n){n.createObjectStore("targetDocuments",{keyPath:GE}).createIndex("documentTargetsIndex",iC,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",rC,{unique:!0}),n.createObjectStore("targetGlobal")}const ym="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class vm{constructor(e,t,r,o,u,c,m,w,D,T,A=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=c,this.document=m,this.Js=D,this.Ys=T,this.Xs=A,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=L=>Promise.resolve(),!vm.C())throw new Oe(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nI(this,o),this.ii=t+"main",this.It=new dd(w),this.ri=new Os(this.ii,this.Xs,new SC(this.It)),this.Cs=new C_(this.referenceDelegate,this.It),this.remoteDocumentCache=iI(this.It),this.Ns=new lC,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===T&&pr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Oe(fe.FAILED_PRECONDITION,ym);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Pi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,be.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,be.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,be.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>xf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Ps(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return wd(e).get("owner").next(t=>oe.resolve(this.mi(t)))}gi(e){return xf(e).delete(this.clientId)}yi(){var e=this;return(0,be.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=qr(r,"clientMetadata");return o.W().next(u=>{const c=e.Ii(u,18e5),m=u.filter(w=>-1===c.indexOf(w));return oe.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?oe.resolve(!0):wd(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Oe(fe.FAILED_PRECONDITION,ym);return!1}}return!(!this.networkEnabled||!this.inForeground)||xf(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>{if(this.clientId!==o.clientId){const c=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||c&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,be.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new v_(t,Pi.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>xf(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Af.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new mC(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return lm.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(c=this.Xs)?aC:14===c?KE:13===c?cd:12===c?qE:11===c?WE:void dt();var c;let m;return this.ri.runTransaction(e,o,u,w=>(m=new v_(w,this.Ss?this.Ss.next():Pi.at),"readwrite-primary"===t?this.fi(m).next(D=>!!D||this.di(m)).next(D=>{if(!D)throw pr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Oe(fe.FAILED_PRECONDITION,kg);return r(m)}).next(D=>this.wi(m).next(()=>D)):this.Vi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Vi(e){return wd(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Oe(fe.FAILED_PRECONDITION,ym)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wd(e).put("owner",t)}static C(){return Os.C()}_i(e){const t=wd(e);return t.get("owner").next(r=>this.mi(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(pr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Bt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return pr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){pr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function wd(n){return qr(n,"owner")}function xf(n){return qr(n,"clientMetadata")}function _m(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class x_{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=Wt(),o=Wt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new x_(e,t.fromCache,r,o)}}class lI{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(u=>u||this.Oi(e,t,o,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(yE(t))return oe.resolve(null);let r=Ii(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=mf(t,null,"F"),r=Ii(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=Wt(...u);return this.Ni.getDocuments(e,c).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const D=this.Fi(t,m);return this.$i(t,D,c,w.readTime)?this.ki(e,mf(t,null,"F")):this.Bi(e,D,t,w)}))})))}Oi(e,t,r,o){return yE(t)||o.isEqual(Mt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const c=this.Fi(t,u);return this.$i(t,c,r,o)?this.Mi(e,t):(Lv()<=Ga.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),vE(t)),this.Bi(e,c,t,rE(o,-1)))})}Fi(e,t){let r=new _n(Us(e));return t.forEach((o,u)=>{Wg(e,u)&&(r=r.add(u))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Mi(e,t){return Lv()<=Ga.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",vE(t)),this.Ni.getDocumentsMatchingQuery(e,t,Yi.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class ZS{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.It=o,this.Ui=new An(jt),this.qi=new iu(u=>tu(u),pf),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wC(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function cI(n,e,t,r){return new ZS(n,e,t,r)}function dI(n,e){return R_.apply(this,arguments)}function R_(){return R_=(0,be.Z)(function*(n,e){const t=Xe(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],m=[];let w=Wt();for(const D of o){c.push(D.batchId);for(const T of D.mutations)w=w.add(T.key)}for(const D of u){m.push(D.batchId);for(const T of D.mutations)w=w.add(T.key)}return t.localDocuments.getDocuments(r,w).next(D=>({ji:D,removedBatchIds:c,addedBatchIds:m}))})})}),R_.apply(this,arguments)}function AC(n,e){const t=Xe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(c,m,w,D){const T=w.batch,A=T.keys();let L=oe.resolve();return A.forEach(G=>{L=L.next(()=>D.getEntry(m,G)).next(X=>{const Se=w.docVersions.get(G);Ft(null!==Se),X.version.compareTo(Se)<0&&(T.applyToRemoteDocument(X,w),X.isValidDocument()&&(X.setReadTime(w.commitVersion),D.addEntry(X)))})}),L.next(()=>c.mutationQueue.removeMutationBatch(m,T))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let m=Wt();for(let w=0;w<c.mutationResults.length;++w)c.mutationResults[w].transformResults.length>0&&(m=m.add(c.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function hI(n){const e=Xe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function Rf(n,e){const t=Xe(n),r=e.snapshotVersion;let o=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.Ui;const m=[];e.targetChanges.forEach((T,A)=>{const L=o.get(A);if(!L)return;m.push(t.Cs.removeMatchingKeys(u,T.removedDocuments,A).next(()=>t.Cs.addMatchingKeys(u,T.addedDocuments,A)));let G=L.withSequenceNumber(u.currentSequenceNumber);var X,Se,Me;e.targetMismatches.has(A)?G=G.withResumeToken(Kn.EMPTY_BYTE_STRING,Mt.min()).withLastLimboFreeSnapshotVersion(Mt.min()):T.resumeToken.approximateByteSize()>0&&(G=G.withResumeToken(T.resumeToken,r)),o=o.insert(A,G),Se=G,Me=T,(0===(X=L).resumeToken.approximateByteSize()||Se.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=3e8||Me.addedDocuments.size+Me.modifiedDocuments.size+Me.removedDocuments.size>0)&&m.push(t.Cs.updateTargetData(u,G))});let w=Fi(),D=Wt();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,T))}),m.push(fI(u,c,e.documentUpdates).next(T=>{w=T.Wi,D=T.zi})),!r.isEqual(Mt.min())){const T=t.Cs.getLastRemoteSnapshotVersion(u).next(A=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(T)}return oe.waitFor(m).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,D)).next(()=>w)}).then(u=>(t.Ui=o,u))}function fI(n,e,t){let r=Wt(),o=Wt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=Fi();return t.forEach((m,w)=>{const D=u.get(m);w.isFoundDocument()!==D.isFoundDocument()&&(o=o.add(m)),w.isNoDocument()&&w.version.isEqual(Mt.min())?(e.removeEntry(m,w.readTime),c=c.insert(m,w)):!D.isValidDocument()||w.version.compareTo(D.version)>0||0===w.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(w),c=c.insert(m,w)):Ve("LocalStore","Ignoring outdated watch update for ",m,". Current version:",D.version," Watch version:",w.version)}),{Wi:c,zi:o}})}function N_(n,e){const t=Xe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Di(n,e){const t=Xe(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(u=>u?(o=u,oe.resolve(o)):t.Cs.allocateTargetId(r).next(c=>(o=new ou(e,c,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function Ed(n,e,t){return Nf.apply(this,arguments)}function Nf(){return Nf=(0,be.Z)(function*(n,e,t){const r=Xe(n),o=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!Ps(c))throw c;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ui=r.Ui.remove(e),r.qi.delete(o.target)}),Nf.apply(this,arguments)}function hu(n,e,t){const r=Xe(n);let o=Mt.min(),u=Wt();return r.persistence.runTransaction("Execute query","readonly",c=>function(m,w,D){const T=Xe(m),A=T.qi.get(D);return void 0!==A?oe.resolve(T.Ui.get(A)):T.Cs.getTargetData(w,D)}(r,c,Ii(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(c,m.targetId).next(w=>{u=w})}).next(()=>r.Li.getDocumentsMatchingQuery(c,e,t?o:Mt.min(),t?u:Wt())).next(m=>(mI(r,qg(e),m),{documents:m,Hi:u})))}function pI(n,e){const t=Xe(n),r=Xe(t.Cs),o=t.Ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(c=>c?c.target:null))}function gI(n,e){const t=Xe(n),r=t.Ki.get(e)||Mt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,rE(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(mI(t,e,o),o))}function mI(n,e,t){let r=n.Ki.get(e)||Mt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function Id(){return Id=(0,be.Z)(function*(n,e,t,r){const o=Xe(n);let u=Wt(),c=Fi();for(const D of t){const T=e.Ji(D.metadata.name);D.document&&(u=u.add(T));const A=e.Yi(D);A.setReadTime(e.Xi(D.metadata.readTime)),c=c.insert(T,A)}const m=o.Gi.newChangeBuffer({trackRemovals:!0}),w=yield Di(o,(D=r,Ii(ml(nn.fromString(`__bundle__/docs/${D}`)))));var D;return o.persistence.runTransaction("Apply bundle documents","readwrite",D=>fI(D,m,c).next(T=>(m.apply(D),T)).next(T=>o.Cs.removeMatchingKeysForTargetId(D,w.targetId).next(()=>o.Cs.addMatchingKeys(D,u,w.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(D,T.Wi,T.zi)).next(()=>T.Wi)))}),Id.apply(this,arguments)}function MC(n,e){return O_.apply(this,arguments)}function O_(){return O_=(0,be.Z)(function*(n,e,t=Wt()){const r=yield Di(n,Ii(I_(e.bundledQuery))),o=Xe(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const c=Pr(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return o.Ns.saveNamedQuery(u,e);const m=r.withResumeToken(Kn.EMPTY_BYTE_STRING,c);return o.Ui=o.Ui.insert(m.targetId,m),o.Cs.updateTargetData(u,m).next(()=>o.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(u,e))})}),O_.apply(this,arguments)}function P_(n,e){return`firestore_clients_${n}_${e}`}function k_(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Of(n,e){return`firestore_targets_${n}_${e}`}class Pf{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,c="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return c&&o.error&&(c="string"==typeof o.error.message&&"string"==typeof o.error.code,c&&(u=new Oe(o.error.code,o.error.message))),c?new Pf(e,t,o.state,u):(pr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kf{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Oe(r.error.code,r.error.message))),u?new kf(e,r.state,o):(pr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Em{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=If();for(let c=0;o&&c<r.activeTargetIds.length;++c)o=qv(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return o?new Em(e,u):(pr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class yI{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new yI(t.clientId,t.onlineState):(pr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ff{constructor(){this.activeTargetIds=If()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lf{constructor(e,t,r,o,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new An(jt),this.started=!1,this.cr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=P_(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Ff),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,be.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const u=e.getItem(P_(e.persistenceKey,o));if(u){const c=Em.Zi(o,u);c&&(e.ur=e.ur.insert(c.clientId,c))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Of(this.persistenceKey,e));if(r){const o=kf.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Of(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void pr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,be.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(u){let c=Pi.at;if(null!=u)try{const m=JSON.parse(u);Ft("number"==typeof m),c=m}catch(m){pr("SharedClientState","Failed to read sequence number from WebStorage",m)}return c}(r.newValue);o!==Pi.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new Pf(this.currentUser,e,t,r),u=k_(this.persistenceKey,this.currentUser,e);this.setItem(u,o.tr())}Er(e){const t=k_(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=Of(this.persistenceKey,e),u=new kf(e,t,r);this.setItem(o,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return Em.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return Pf.Zi(new Hr(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return kf.Zi(o,t)}yr(e){return yI.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,be.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),u=this.Ir(r),c=[],m=[];return u.forEach(w=>{o.has(w)||c.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Br(c,m).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=If();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class F_{constructor(){this.Lr=new Ff,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Ff,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class L_{qr(e){}shutdown(){}}class Im{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const xC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class RC{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class NC extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,o,u){const c=this.ho(e,t);Ve("RestConnection","Sending: ",c,r);const m={};return this.lo(m,o,u),this.fo(e,c,m,r).then(w=>(Ve("RestConnection","Received: ",w),w),w=>{throw di("RestConnection",`${e} failed with error: `,w,"url: ",c,"request:",r),w})}_o(e,t,r,o,u,c){return this.ao(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+ul,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.oo}/v1/${t}:${xC[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,c)=>{const m=new Rb;m.setWithCredentials(!0),m.listenOnce(Mb.COMPLETE,()=>{var D;try{switch(m.getLastErrorCode()){case eE.NO_ERROR:const T=m.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(T)),u(T);break;case eE.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),c(new Oe(fe.DEADLINE_EXCEEDED,"Request time out"));break;case eE.HTTP_ERROR:const A=m.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',A,"response text:",m.getResponseText()),A>0){let L=m.getResponseJson();Array.isArray(L)&&(L=L[0]);const G=null===(D=L)||void 0===D?void 0:D.error;if(G&&G.status&&G.message){const X=function(Se){const Me=Se.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(Me)>=0?Me:fe.UNKNOWN}(G.status);c(new Oe(X,G.message))}else c(new Oe(fe.UNKNOWN,"Server responded with status "+m.getStatus()))}else c(new Oe(fe.UNAVAILABLE,"Connection failed."));break;default:dt()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}wo(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=Xw(),c=Ab(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new xb({})),this.lo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const w=o.join("");Ve("Connection","Creating WebChannel: "+w,m);const D=u.createWebChannel(w,m);let T=!1,A=!1;const L=new RC({Hr:X=>{A?Ve("Connection","Not sending because WebChannel is closed:",X):(T||(Ve("Connection","Opening WebChannel transport."),D.open(),T=!0),Ve("Connection","WebChannel sending:",X),D.send(X))},Jr:()=>D.close()}),G=(X,Se,Me)=>{X.listen(Se,mt=>{try{Me(mt)}catch(Rt){setTimeout(()=>{throw Rt},0)}})};return G(D,Sg.EventType.OPEN,()=>{A||Ve("Connection","WebChannel transport opened.")}),G(D,Sg.EventType.CLOSE,()=>{A||(A=!0,Ve("Connection","WebChannel transport closed"),L.io())}),G(D,Sg.EventType.ERROR,X=>{A||(A=!0,di("Connection","WebChannel transport errored:",X),L.io(new Oe(fe.UNAVAILABLE,"The operation could not be completed")))}),G(D,Sg.EventType.MESSAGE,X=>{var Se;if(!A){const Me=X.data[0];Ft(!!Me);const mt=Me,Rt=mt.error||(null===(Se=mt[0])||void 0===Se?void 0:Se.error);if(Rt){Ve("Connection","WebChannel received error:",Rt);const Gt=Rt.status;let Tt=function(rn){const ni=br[rn];if(void 0!==ni)return AE(ni)}(Gt),$t=Rt.message;void 0===Tt&&(Tt=fe.INTERNAL,$t="Unknown error status: "+Gt+" with message "+Rt.message),A=!0,L.io(new Oe(Tt,$t)),D.close()}else Ve("Connection","WebChannel received:",Me),L.ro(Me)}}),G(c,Pv.STAT_EVENT,X=>{X.stat===kv.PROXY?Ve("Connection","Detected buffering proxy"):X.stat===kv.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{L.so()},0),L}}function vI(){return"undefined"!=typeof window?window:null}function Vf(){return"undefined"!=typeof document?document:null}function bl(n){return new od(n,!0)}class Dm{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class _I{constructor(e,t,r,o,u,c,m,w){this.Hs=e,this.vo=r,this.Vo=o,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Dm(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,be.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,be.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,be.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(pr(t.toString()),pr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.So===t&&this.Go(r,o)},r=>{e(()=>{const o=new Oe(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(o)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.Qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,be.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wI extends _I{constructor(e,t,r,o,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,c),this.It=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function HS(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:dt(),o=e.targetChange.targetIds||[],u=function(w,D){return w.gt?(Ft(void 0===D||"string"==typeof D),Kn.fromBase64String(D||"")):(Ft(void 0===D||D instanceof Uint8Array),Kn.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,m=c&&function(w){const D=void 0===w.code?fe.UNKNOWN:AE(w.code);return new Oe(D,w.message||"")}(c);t=new d_(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=ho(n,r.document.name),u=Pr(r.document.updateTime),c=new zr({mapValue:{fields:r.document.fields}}),m=kn.newFoundDocument(o,u,c);t=new Df(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=ho(n,r.document),u=r.readTime?Pr(r.readTime):Mt.min(),c=kn.newNoDocument(o,u);t=new Df([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,o=ho(n,r.document);t=new Df([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return dt();{const r=e.filter,u=new Gb(r.count||0);t=new c_(r.targetId,u)}}var w;return t}(this.It,e),r=function(o){if(!("targetChange"in o))return Mt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Mt.min():u.readTime?Pr(u.readTime):Mt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=fo(this.It),t.addTarget=function(o,u){let c;const m=u.target;return c=$g(m)?{documents:g_(o,m)}:{query:em(o,m)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?c.resumeToken=Qg(o,u.resumeToken):u.snapshotVersion.compareTo(Mt.min())>0&&(c.readTime=Yg(o,u.snapshotVersion.toTimestamp())),c}(this.It,e);const r=function FE(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return dt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=fo(this.It),t.removeTarget=e,this.Bo(t)}}class EI extends _I{constructor(e,t,r,o,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,c),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Ft(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Qb(n,e){return n&&n.length>0?(Ft(void 0!==e),n.map(t=>function(r,o){let u=Pr(r.updateTime?r.updateTime:o);return u.isEqual(Mt.min())&&(u=Pr(o)),new Kg(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Pr(e.commitTime);return this.listener.Zo(r,t)}return Ft(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=fo(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>ad(this.It,r))};this.Bo(t)}}class OC extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=o,this.nu=!1}su(){if(this.nu)throw new Oe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.ao(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Oe(fe.UNKNOWN,o.toString())})}_o(e,t,r,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection._o(e,t,r,u,c,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Oe(fe.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class PC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(pr(t),this.ou=!1):Ve("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class DI{constructor(e,t,r,o,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(m=>{r.enqueueAndForget((0,be.Z)(function*(){var w;ta(c)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,be.Z)(function*(D){const T=Xe(D);T._u.add(4),yield js(T),T.gu.set("Unknown"),T._u.delete(4),yield Uf(T)}),function(D){return w.apply(this,arguments)})(c))}))}),this.gu=new PC(r,o)}}function Uf(n){return ei.apply(this,arguments)}function ei(){return ei=(0,be.Z)(function*(n){if(ta(n))for(const e of n.wu)yield e(!0)}),ei.apply(this,arguments)}function js(n){return V_.apply(this,arguments)}function V_(){return V_=(0,be.Z)(function*(n){for(const e of n.wu)yield e(!1)}),V_.apply(this,arguments)}function Cm(n,e){const t=Xe(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Cl(t)?Sm(t):Sl(t).ko()&&bI(t,e))}function Tm(n,e){const t=Xe(n),r=Sl(t);t.du.delete(e),r.ko()&&U_(t,e),0===t.du.size&&(r.ko()?r.Fo():ta(t)&&t.gu.set("Unknown"))}function bI(n,e){n.yu.Mt(e.targetId),Sl(n).zo(e)}function U_(n,e){n.yu.Mt(e),Sl(n).Ho(e)}function Sm(n){n.yu=new OE({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Sl(n).start(),n.gu.uu()}function Cl(n){return ta(n)&&!Sl(n).No()&&n.du.size>0}function ta(n){return 0===Xe(n)._u.size}function Am(n){n.yu=void 0}function kC(n){return Mm.apply(this,arguments)}function Mm(){return Mm=(0,be.Z)(function*(n){n.du.forEach((e,t)=>{bI(n,e)})}),Mm.apply(this,arguments)}function FC(n,e){return B_.apply(this,arguments)}function B_(){return B_=(0,be.Z)(function*(n,e){Am(n),Cl(n)?(n.gu.hu(e),Sm(n)):n.gu.set("Unknown")}),B_.apply(this,arguments)}function LC(n,e,t){return Bf.apply(this,arguments)}function Bf(){return Bf=(0,be.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof d_&&2===e.state&&e.cause)try{yield(r=(0,be.Z)(function*(o,u){const c=u.cause;for(const m of u.targetIds)o.du.has(m)&&(yield o.remoteSyncer.rejectListen(m,c),o.du.delete(m),o.yu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield jf(n,r)}else if(e instanceof Df?n.yu.Gt(e):e instanceof c_?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Mt.min()))try{const r=yield hI(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const c=o.yu.te(u);return c.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const D=o.du.get(w);D&&o.du.set(w,D.withResumeToken(m.resumeToken,u))}}),c.targetMismatches.forEach(m=>{const w=o.du.get(m);if(!w)return;o.du.set(m,w.withResumeToken(Kn.EMPTY_BYTE_STRING,w.snapshotVersion)),U_(o,m);const D=new ou(w.target,m,1,w.sequenceNumber);bI(o,D)}),o.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield jf(n,r)}var r}),Bf.apply(this,arguments)}function jf(n,e,t){return xm.apply(this,arguments)}function xm(){return xm=(0,be.Z)(function*(n,e,t){if(!Ps(e))throw e;n._u.add(1),yield js(n),n.gu.set("Offline"),t||(t=()=>hI(n.localStore)),n.asyncQueue.enqueueRetryable((0,be.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Uf(n)}))}),xm.apply(this,arguments)}function $f(n,e){return e().catch(t=>jf(n,t,e))}function fu(n){return CI.apply(this,arguments)}function CI(){return CI=(0,be.Z)(function*(n){const e=Xe(n),t=na(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;TI(e);)try{const o=yield N_(e.localStore,r);if(null===o){0===e.fu.length&&t.Fo();break}r=o.batchId,VC(e,o)}catch(o){yield jf(e,o)}j_(e)&&Tl(e)}),CI.apply(this,arguments)}function TI(n){return ta(n)&&n.fu.length<10}function VC(n,e){n.fu.push(e);const t=na(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function j_(n){return ta(n)&&!na(n).No()&&n.fu.length>0}function Tl(n){na(n).start()}function UC(n){return Rm.apply(this,arguments)}function Rm(){return Rm=(0,be.Z)(function*(n){na(n).eu()}),Rm.apply(this,arguments)}function $_(n){return SI.apply(this,arguments)}function SI(){return SI=(0,be.Z)(function*(n){const e=na(n);for(const t of n.fu)e.Xo(t.mutations)}),SI.apply(this,arguments)}function BC(n,e,t){return AI.apply(this,arguments)}function AI(){return AI=(0,be.Z)(function*(n,e,t){const r=n.fu.shift(),o=im.from(r,e,t);yield $f(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield fu(n)}),AI.apply(this,arguments)}function jC(n,e){return H_.apply(this,arguments)}function H_(){return H_=(0,be.Z)(function*(n,e){var t;e&&na(n).Yo&&(yield(t=(0,be.Z)(function*(r,o){if(SE(u=o.code)&&u!==fe.ABORTED){const c=r.fu.shift();na(r).Mo(),yield $f(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,o)),yield fu(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),j_(n)&&Tl(n)}),H_.apply(this,arguments)}function MI(n,e){return Nm.apply(this,arguments)}function Nm(){return Nm=(0,be.Z)(function*(n,e){const t=Xe(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=ta(t);t._u.add(3),yield js(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Uf(t)}),Nm.apply(this,arguments)}function Om(n,e){return G_.apply(this,arguments)}function G_(){return G_=(0,be.Z)(function*(n,e){const t=Xe(n);e?(t._u.delete(2),yield Uf(t)):e||(t._u.add(2),yield js(t),t.gu.set("Unknown"))}),G_.apply(this,arguments)}function Sl(n){return n.pu||(n.pu=function(e,t,r){const o=Xe(e);return o.su(),new wI(t,o.connection,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:kC.bind(null,n),Zr:FC.bind(null,n),Wo:LC.bind(null,n)}),n.wu.push(function(){var e=(0,be.Z)(function*(t){t?(n.pu.Mo(),Cl(n)?Sm(n):n.gu.set("Unknown")):(yield n.pu.stop(),Am(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function na(n){return n.Iu||(n.Iu=function(e,t,r){const o=Xe(e);return o.su(),new EI(t,o.connection,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:UC.bind(null,n),Zr:jC.bind(null,n),tu:$_.bind(null,n),Zo:BC.bind(null,n)}),n.wu.push(function(){var e=(0,be.Z)(function*(t){t?(n.Iu.Mo(),yield fu(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class z_{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,o,u){const c=Date.now()+r,m=new z_(e,t,c,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Oe(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dd(n,e){if(pr("AsyncQueue",`${e}: ${n}`),Ps(n))return new Oe(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class Al{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ze.comparator(t.key,r.key):(t,r)=>Ze.comparator(t.key,r.key),this.keyedMap=wf(),this.sortedSet=new An(this.comparator)}static emptySet(e){return new Al(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Al)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Al;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class xI{constructor(){this.Tu=new An(Ze.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):dt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ml{constructor(e,t,r,o,u,c,m,w,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,o,u){const c=[];return t.forEach(m=>{c.push({type:0,doc:m})}),new Ml(e,t,Al.emptySet(t),c,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class RI{constructor(){this.Au=void 0,this.listeners=[]}}class NI{constructor(){this.queries=new iu(e=>n_(e),yf),this.onlineState="Unknown",this.Ru=new Set}}function Pm(n,e){return W_.apply(this,arguments)}function W_(){return W_=(0,be.Z)(function*(n,e){const t=Xe(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new RI),o)try{u.Au=yield t.onListen(r)}catch(c){const m=Dd(c,`Initialization of query '${vE(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&kI(t)}),W_.apply(this,arguments)}function q_(n,e){return OI.apply(this,arguments)}function OI(){return OI=(0,be.Z)(function*(n,e){const t=Xe(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),OI.apply(this,arguments)}function PI(n,e){const t=Xe(n);let r=!1;for(const o of e){const c=t.queries.get(o.query);if(c){for(const m of c.listeners)m.Pu(o)&&(r=!0);c.Au=o}}r&&kI(t)}function YS(n,e,t){const r=Xe(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function kI(n){n.Ru.forEach(e=>{e.next()})}class FI{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Ml(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class QS{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class $C{constructor(e){this.It=e}Ji(e){return ho(this.It,e)}Yi(e){return e.metadata.exists?Cf(this.It,e.document,!1):kn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Pr(e)}}class JS{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=HC(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=nn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new $C(this.It);for(const o of e)if(o.metadata.queries){const u=r.Ji(o.metadata.name);for(const c of o.metadata.queries){const m=(t.get(c)||Wt()).add(u);t.set(c,m)}}return t}complete(){var e=this;return(0,be.Z)(function*(){const t=yield function wm(n,e,t,r){return Id.apply(this,arguments)}(e.localStore,new $C(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const o of e.queries)yield MC(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function HC(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class GC{constructor(e){this.key=e}}class Hf{constructor(e){this.key=e}}class zC{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Wt(),this.mutatedKeys=Wt(),this.Gu=Us(e),this.Qu=new Al(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new xI,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,c=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,D="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((T,A)=>{const L=o.get(T),G=Wg(this.query,A)?A:null,X=!!L&&this.mutatedKeys.has(L.key),Se=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let Me=!1;L&&G?L.data.isEqual(G.data)?X!==Se&&(r.track({type:3,doc:G}),Me=!0):this.Hu(L,G)||(r.track({type:2,doc:G}),Me=!0,(w&&this.Gu(G,w)>0||D&&this.Gu(G,D)<0)&&(m=!0)):!L&&G?(r.track({type:0,doc:G}),Me=!0):L&&!G&&(r.track({type:1,doc:L}),Me=!0,(w||D)&&(m=!0)),Me&&(G?(c=c.add(G),u=Se?u.add(T):u.delete(T)):(c=c.delete(T),u=u.delete(T)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const T="F"===this.query.limitType?c.last():c.first();c=c.delete(T.key),u=u.delete(T.key),r.track({type:1,doc:T})}return{Qu:c,zu:r,$i:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((D,T)=>function(A,L){const G=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return dt()}};return G(A)-G(L)}(D.type,T.type)||this.Gu(D.doc,T.doc)),this.Ju(r);const c=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,w=m!==this.qu;return this.qu=m,0!==u.length||w?{snapshot:new Ml(this.query,e.Qu,o,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:c}:{Xu:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new xI,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Wt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new Hf(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new GC(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Wt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Ml.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class LI{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class km{constructor(e){this.key=e,this.nc=!1}}class VI{constructor(e,t,r,o,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.sc={},this.ic=new iu(m=>n_(m),yf),this.rc=new Map,this.oc=new Set,this.uc=new An(Ze.comparator),this.cc=new Map,this.ac=new M_,this.hc={},this.lc=new Map,this.fc=cu.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function UI(n,e){return BI.apply(this,arguments)}function BI(){return BI=(0,be.Z)(function*(n,e){const t=ZI(n);let r,o;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ec();else{const c=yield Di(t.localStore,Ii(e));t.isPrimaryClient&&Cm(t.remoteStore,c);const m=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,o=yield Gf(t,e,r,"current"===m,c.resumeToken)}return o}),BI.apply(this,arguments)}function Gf(n,e,t,r,o){return Fm.apply(this,arguments)}function Fm(){return Fm=(0,be.Z)(function*(n,e,t,r,o){n._c=(A,L,G)=>{return(X=(0,be.Z)(function*(Se,Me,mt,Rt){let Gt=Me.view.Wu(mt);Gt.$i&&(Gt=yield hu(Se.localStore,Me.query,!1).then(({documents:rn})=>Me.view.Wu(rn,Gt)));const Tt=Rt&&Rt.targetChanges.get(Me.targetId),$t=Me.view.applyChanges(Gt,Se.isPrimaryClient,Tt);return Ji(Se,Me.targetId,$t.Xu),$t.snapshot}),function(Se,Me,mt,Rt){return X.apply(this,arguments)})(n,A,L,G);var X};const u=yield hu(n.localStore,e,!0),c=new zC(e,u.Hi),m=c.Wu(u.documents),w=sd.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),D=c.applyChanges(m,n.isPrimaryClient,w);Ji(n,t,D.Xu);const T=new LI(e,t,c);return n.ic.set(e,T),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),D.snapshot}),Fm.apply(this,arguments)}function WC(n,e){return Lm.apply(this,arguments)}function Lm(){return Lm=(0,be.Z)(function*(n,e){const t=Xe(n),r=t.ic.get(e),o=t.rc.get(r.targetId);if(o.length>1)return t.rc.set(r.targetId,o.filter(u=>!yf(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ed(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Tm(t.remoteStore,r.targetId),xl(t,r.targetId)}).catch(ao))):(xl(t,r.targetId),yield Ed(t.localStore,r.targetId,!0))}),Lm.apply(this,arguments)}function jI(){return jI=(0,be.Z)(function*(n,e,t){const r=t0(n);try{const o=yield function(u,c){const m=Xe(u),w=mn.now(),D=c.reduce((L,G)=>L.add(G.key),Wt());let T,A;return m.persistence.runTransaction("Locally write mutations","readwrite",L=>{let G=Fi(),X=Wt();return m.Gi.getEntries(L,D).next(Se=>{G=Se,G.forEach((Me,mt)=>{mt.isValidDocument()||(X=X.add(Me))})}).next(()=>m.localDocuments.getOverlayedDocuments(L,G)).next(Se=>{T=Se;const Me=[];for(const mt of c){const Rt=TE(mt,T.get(mt.key).overlayedDocument);null!=Rt&&Me.push(new lo(mt.key,Rt,lE(Rt.value.mapValue),Zn.exists(!0)))}return m.mutationQueue.addMutationBatch(L,w,Me,c)}).next(Se=>{A=Se;const Me=Se.applyToLocalDocumentSet(T,X);return m.documentOverlayCache.saveOverlays(L,Se.batchId,Me)})}).then(()=>({batchId:A.batchId,changes:xE(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,c,m){let w=u.hc[u.currentUser.toKey()];w||(w=new An(jt)),w=w.insert(c,m),u.hc[u.currentUser.toKey()]=w}(r,o.batchId,t),yield ra(r,o.changes),yield fu(r.remoteStore)}catch(o){const u=Dd(o,"Failed to persist write");t.reject(u)}}),jI.apply(this,arguments)}function $I(n,e){return K_.apply(this,arguments)}function K_(){return K_=(0,be.Z)(function*(n,e){const t=Xe(n);try{const r=yield Rf(t.localStore,e);e.targetChanges.forEach((o,u)=>{const c=t.cc.get(u);c&&(Ft(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?c.nc=!0:o.modifiedDocuments.size>0?Ft(c.nc):o.removedDocuments.size>0&&(Ft(c.nc),c.nc=!1))}),yield ra(t,r,e)}catch(r){yield ao(r)}}),K_.apply(this,arguments)}function zf(n,e,t){const r=Xe(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ic.forEach((u,c)=>{const m=c.view.bu(e);m.snapshot&&o.push(m.snapshot)}),function(u,c){const m=Xe(u);m.onlineState=c;let w=!1;m.queries.forEach((D,T)=>{for(const A of T.listeners)A.bu(c)&&(w=!0)}),w&&kI(m)}(r.eventManager,e),o.length&&r.sc.Wo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function qC(n,e,t){return HI.apply(this,arguments)}function HI(){return HI=(0,be.Z)(function*(n,e,t){const r=Xe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.cc.get(e),u=o&&o.key;if(u){let c=new An(Ze.comparator);c=c.insert(u,kn.newNoDocument(u,Mt.min()));const m=Wt().add(u),w=new id(Mt.min(),new Map,new _n(jt),c,m);yield $I(r,w),r.uc=r.uc.remove(u),r.cc.delete(e),Wf(r)}else yield Ed(r.localStore,e,!1).then(()=>xl(r,e,t)).catch(ao)}),HI.apply(this,arguments)}function eA(n,e){return GI.apply(this,arguments)}function GI(){return GI=(0,be.Z)(function*(n,e){const t=Xe(n),r=e.batch.batchId;try{const o=yield AC(t.localStore,e);Vm(t,r,null),Y_(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield ra(t,o)}catch(o){yield ao(o)}}),GI.apply(this,arguments)}function KC(n,e,t){return Z_.apply(this,arguments)}function Z_(){return Z_=(0,be.Z)(function*(n,e,t){const r=Xe(n);try{const o=yield function(u,c){const m=Xe(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let D;return m.mutationQueue.lookupMutationBatch(w,c).next(T=>(Ft(null!==T),D=T.keys(),m.mutationQueue.removeMutationBatch(w,T))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,D,c)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,D)).next(()=>m.localDocuments.getDocuments(w,D))})}(r.localStore,e);Vm(r,e,t),Y_(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield ra(r,o)}catch(o){yield ao(o)}}),Z_.apply(this,arguments)}function zI(){return zI=(0,be.Z)(function*(n,e){const t=Xe(n);ta(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Xe(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>c.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.lc.get(r)||[];o.push(e),t.lc.set(r,o)}catch(r){const o=Dd(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),zI.apply(this,arguments)}function Y_(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function Vm(n,e,t){const r=Xe(n);let o=r.hc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.hc[r.currentUser.toKey()]=o}}function xl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||YC(n,r)})}function YC(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Tm(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),Wf(n))}function Ji(n,e,t){for(const r of t)r instanceof GC?(n.ac.addReference(r.key,e),QC(n,r)):r instanceof Hf?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||YC(n,r.key)):dt()}function QC(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.oc.add(r),Wf(n))}function Wf(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ze(nn.fromString(e)),r=n.fc.next();n.cc.set(r,new km(t)),n.uc=n.uc.insert(t,r),Cm(n.remoteStore,new ou(Ii(ml(t.path)),r,2,Pi.at))}}function ra(n,e,t){return Ui.apply(this,arguments)}function Ui(){return Ui=(0,be.Z)(function*(n,e,t){const r=Xe(n),o=[],u=[],c=[];var m;r.ic.isEmpty()||(r.ic.forEach((m,w)=>{c.push(r._c(w,e,t).then(D=>{if((D||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,null!=D&&D.fromCache?"not-current":"current"),D){o.push(D);const T=x_.Ci(w.targetId,D);u.push(T)}}))}),yield Promise.all(c),r.sc.Wo(o),yield(m=(0,be.Z)(function*(w,D){const T=Xe(w);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",A=>oe.forEach(D,L=>oe.forEach(L.Si,G=>T.persistence.referenceDelegate.addReference(A,L.targetId,G)).next(()=>oe.forEach(L.Di,G=>T.persistence.referenceDelegate.removeReference(A,L.targetId,G)))))}catch(A){if(!Ps(A))throw A;Ve("LocalStore","Failed to update sequence numbers: "+A)}for(const A of D){const L=A.targetId;if(!A.fromCache){const G=T.Ui.get(L),Se=G.withLastLimboFreeSnapshotVersion(G.snapshotVersion);T.Ui=T.Ui.insert(L,Se)}}}),function(w,D){return m.apply(this,arguments)})(r.localStore,u))}),Ui.apply(this,arguments)}function JC(n,e){return qf.apply(this,arguments)}function qf(){return qf=(0,be.Z)(function*(n,e){const t=Xe(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield dI(t.localStore,e);t.currentUser=e,(o=t).lc.forEach(c=>{c.forEach(m=>{m.reject(new Oe(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield ra(t,r.ji)}var o}),qf.apply(this,arguments)}function XC(n,e){const t=Xe(n),r=t.cc.get(e);if(r&&r.nc)return Wt().add(r.key);{let o=Wt();const u=t.rc.get(e);if(!u)return o;for(const c of u){const m=t.ic.get(c);o=o.unionWith(m.view.ju)}return o}}function eT(n,e){return Kf.apply(this,arguments)}function Kf(){return Kf=(0,be.Z)(function*(n,e){const t=Xe(n),r=yield hu(t.localStore,e.query,!0),o=e.view.tc(r);return t.isPrimaryClient&&Ji(t,e.targetId,o.Xu),o}),Kf.apply(this,arguments)}function WI(n,e){return Um.apply(this,arguments)}function Um(){return Um=(0,be.Z)(function*(n,e){const t=Xe(n);return gI(t.localStore,e).then(r=>ra(t,r))}),Um.apply(this,arguments)}function tT(n,e,t,r){return Bm.apply(this,arguments)}function Bm(){return Bm=(0,be.Z)(function*(n,e,t,r){const o=Xe(n),u=yield function(c,m){const w=Xe(c),D=Xe(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",T=>D.Tn(T,m).next(A=>A?w.localDocuments.getDocuments(T,A):oe.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield fu(o.remoteStore):"acknowledged"===t||"rejected"===t?(Vm(o,e,r||null),Y_(o,e),m=e,Xe(Xe(o.localStore).mutationQueue).An(m)):dt(),yield ra(o,u)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),Bm.apply(this,arguments)}function Q_(){return Q_=(0,be.Z)(function*(n,e){const t=Xe(n);if(ZI(t),t0(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield J_(t,r.toArray());t.dc=!0,yield Om(t.remoteStore,!0);for(const u of o)Cm(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let o=Promise.resolve();t.rc.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):o=o.then(()=>(xl(t,c),Ed(t.localStore,c,!0))),Tm(t.remoteStore,c)}),yield o,yield J_(t,r),function(u){const c=Xe(u);c.cc.forEach((m,w)=>{Tm(c.remoteStore,w)}),c.ac.fs(),c.cc=new Map,c.uc=new An(Ze.comparator)}(t),t.dc=!1,yield Om(t.remoteStore,!1)}}),Q_.apply(this,arguments)}function J_(n,e,t){return X_.apply(this,arguments)}function X_(){return X_=(0,be.Z)(function*(n,e,t){const r=Xe(n),o=[],u=[];for(const c of e){let m;const w=r.rc.get(c);if(w&&0!==w.length){m=yield Di(r.localStore,Ii(w[0]));for(const D of w){const T=r.ic.get(D),A=yield eT(r,T);A.snapshot&&u.push(A.snapshot)}}else{const D=yield pI(r.localStore,c);m=yield Di(r.localStore,D),yield Gf(r,bd(D),c,!1,m.resumeToken)}o.push(m)}return r.sc.Wo(u),o}),X_.apply(this,arguments)}function bd(n){return mE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function go(n){const e=Xe(n);return Xe(Xe(e.localStore).persistence).vi()}function KI(n,e,t,r){return Zf.apply(this,arguments)}function Zf(){return Zf=(0,be.Z)(function*(n,e,t,r){const o=Xe(n);if(o.dc)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const u=o.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield gI(o.localStore,qg(u[0])),m=id.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Kn.EMPTY_BYTE_STRING);yield ra(o,c,m);break}case"rejected":yield Ed(o.localStore,e,!0),xl(o,e,r);break;default:dt()}}),Zf.apply(this,arguments)}function ia(n,e,t){return e0.apply(this,arguments)}function e0(){return e0=(0,be.Z)(function*(n,e,t){const r=ZI(n);if(r.dc){for(const o of e){if(r.rc.has(o)){Ve("SyncEngine","Adding an already active target "+o);continue}const u=yield pI(r.localStore,o),c=yield Di(r.localStore,u);yield Gf(r,bd(u),c.targetId,!1,c.resumeToken),Cm(r.remoteStore,c)}for(const o of t)r.rc.has(o)&&(yield Ed(r.localStore,o,!1).then(()=>{Tm(r.remoteStore,o),xl(r,o)}).catch(ao))}}),e0.apply(this,arguments)}function ZI(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$I.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=XC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qC.bind(null,e),e.sc.Wo=PI.bind(null,e.eventManager),e.sc.wc=YS.bind(null,e.eventManager),e}function t0(n){const e=Xe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=KC.bind(null,e),e}class YI{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,be.Z)(function*(){t.It=bl(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return cI(this.persistence,new lI,e.initialUser,this.It)}yc(e){return new uI(mm.Bs,this.It)}gc(e){return new F_}terminate(){var e=this;return(0,be.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class QI extends YI{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield t0(r.Ac.syncEngine),yield fu(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return cI(this.persistence,new lI,e.initialUser,this.It)}Tc(e,t){return new eI(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new zv(t,this.persistence);return new Ub(e.asyncQueue,r)}yc(e){const t=_m(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Vi.withCacheSize(this.cacheSizeBytes):Vi.DEFAULT;return new vm(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,vI(),Vf(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new F_}}class JI extends QI{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,be.Z)(function*(){yield t().call(r,e);const o=r.Ac.syncEngine;r.sharedClientState instanceof Lf&&(r.sharedClientState.syncEngine={Fr:tT.bind(null,o),$r:KI.bind(null,o),Br:ia.bind(null,o),vi:go.bind(null,o),Mr:WI.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,be.Z)(function*(c){yield function qI(n,e){return Q_.apply(this,arguments)}(r.Ac.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}gc(e){const t=vI();if(!Lf.C(t))throw new Oe(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=_m(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Lf(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class XI{initialize(e,t){var r=this;return(0,be.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>zf(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=JC.bind(null,r.syncEngine),yield Om(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new NI}createDatastore(e){const t=bl(e.databaseInfo.databaseId),r=new NC(e.databaseInfo);return new OC(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>zf(this.syncEngine,m,0),c=Im.C()?new Im:new L_,new DI(t,r,o,u,c);var t,r,o,u,c}createSyncEngine(e,t){return function(r,o,u,c,m,w,D){const T=new VI(r,o,u,c,m,w);return D&&(T.dc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,be.Z)(function*(t){const r=Xe(t);Ve("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield js(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function jm(n,e,t){if(!t)throw new Oe(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function eD(n,e,t,r){if(!0===e&&!0===r)throw new Oe(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function n0(n){if(!Ze.isDocumentKey(n))throw new Oe(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function rT(n){if(Ze.isDocumentKey(n))throw new Oe(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Cd(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":dt()}function an(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Oe(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Cd(n);throw new Oe(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function r0(n,e){if(e<=0)throw new Oe(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const s0=new Map;class o0{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Oe(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Oe(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,eD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Td{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new o0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Oe(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Oe(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new o0(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Nb;switch(t.type){case"gapi":return new xg(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Oe(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=s0.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),s0.delete(e),t.terminate())}(this),Promise.resolve()}}class xn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xn(this.firestore,e,this._key)}}class ti{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ti(this.firestore,e,this._query)}}class mo extends ti{constructor(e,t,r){super(e,t,ml(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xn(this.firestore,null,new Ze(e))}withConverter(e){return new mo(this.firestore,e,this._path)}}function a0(n,e,...t){if(n=(0,Bt.m9)(n),jm("collection","path",e),n instanceof Td){const r=nn.fromString(e,...t);return rT(r),new mo(n,null,r)}{if(!(n instanceof xn||n instanceof mo))throw new Oe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nn.fromString(e,...t));return rT(r),new mo(n.firestore,null,r)}}function $m(n,e,...t){if(n=(0,Bt.m9)(n),1===arguments.length&&(e=Bv.R()),jm("doc","path",e),n instanceof Td){const r=nn.fromString(e,...t);return n0(r),new xn(n,null,new Ze(r))}{if(!(n instanceof xn||n instanceof mo))throw new Oe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nn.fromString(e,...t));return n0(r),new xn(n.firestore,n instanceof mo?n.converter:null,new Ze(r))}}function nD(n,e){return n=(0,Bt.m9)(n),e=(0,Bt.m9)(e),(n instanceof xn||n instanceof mo)&&(e instanceof xn||e instanceof mo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function rD(n,e){return n=(0,Bt.m9)(n),e=(0,Bt.m9)(e),n instanceof ti&&e instanceof ti&&n.firestore===e.firestore&&yf(n._query,e._query)&&n.converter===e.converter}function iT(n,e=10240){let t=0;return{read:()=>(0,be.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,be.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Qf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):pr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class sT{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Or,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,be.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,be.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,be.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),o=Number(r);isNaN(o)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(o);return new QS(JSON.parse(u),t.length+o)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,be.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,be.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,be.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class rA{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,be.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Oe(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,be.Z)(function*(u,c){const m=Xe(u),w=fo(m.It)+"/documents",D={documents:c.map(G=>bt(m.It,G))},T=yield m._o("BatchGetDocuments",w,D,c.length),A=new Map;T.forEach(G=>{const X=function ir(n,e){return"found"in e?function(t,r){Ft(!!r.found);const o=ho(t,r.found.name),u=Pr(r.found.updateTime),c=new zr({mapValue:{fields:r.found.fields}});return kn.newFoundDocument(o,u,c)}(n,e):"missing"in e?function(t,r){Ft(!!r.missing),Ft(!!r.readTime);const o=ho(t,r.missing),u=Pr(r.readTime);return kn.newNoDocument(o,u)}(n,e):dt()}(m.It,G);A.set(X.key.toString(),X)});const L=[];return c.forEach(G=>{const X=A.get(G.toString());Ft(!!X),L.push(X)}),L}),function(u,c){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new rd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,be.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Ze.fromPath(o);e.mutations.push(new l_(u,e.precondition(u)))}),yield(r=(0,be.Z)(function*(o,u){const c=Xe(o),m=fo(c.It)+"/documents",w={writes:u.map(D=>ad(c.It,D))};yield c.ao("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw dt();t=Mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Oe(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Mt.min())?Zn.exists(!1):Zn.updateTime(t):Zn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Mt.min()))throw new Oe(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Zn.updateTime(t)}return Zn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class iA{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.kc=r.maxAttempts,this.xo=new Dm(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,be.Z)(function*(){const t=new rA(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Fc(u)}))}).catch(o=>{e.Fc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!Wc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!SE(t)}return!1}}class sA{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=Hr.UNAUTHENTICATED,this.clientId=Bv.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,be.Z)(function*(m){Ve("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(Ve("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,be.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Oe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Dd(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function aT(n,e){return u0.apply(this,arguments)}function u0(){return u0=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,be.Z)(function*(u){r.isEqual(u)||(yield dI(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),u0.apply(this,arguments)}function Jf(n,e){return l0.apply(this,arguments)}function l0(){return l0=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield c0(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>MI(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>MI(e.remoteStore,u)),n.onlineComponents=e}),l0.apply(this,arguments)}function c0(n){return Hm.apply(this,arguments)}function Hm(){return Hm=(0,be.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield aT(n,new YI)),n.offlineComponents}),Hm.apply(this,arguments)}function yo(n){return Gm.apply(this,arguments)}function Gm(){return Gm=(0,be.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield Jf(n,new XI)),n.onlineComponents}),Gm.apply(this,arguments)}function zm(n){return c0(n).then(e=>e.persistence)}function Sd(n){return c0(n).then(e=>e.localStore)}function d0(n){return yo(n).then(e=>e.remoteStore)}function Xf(n){return yo(n).then(e=>e.syncEngine)}function sa(n){return iD.apply(this,arguments)}function iD(){return iD=(0,be.Z)(function*(n){const e=yield yo(n),t=e.eventManager;return t.onListen=UI.bind(null,e.syncEngine),t.onUnlisten=WC.bind(null,e.syncEngine),t}),iD.apply(this,arguments)}function h0(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(o,u,c,m,w){const D=new Qf({next:A=>{u.enqueueAndForget(()=>q_(o,T));const L=A.docs.has(c);!L&&A.fromCache?w.reject(new Oe(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&A.fromCache&&m&&"server"===m.source?w.reject(new Oe(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(A)},error:A=>w.reject(A)}),T=new FI(ml(c.path),D,{includeMetadataChanges:!0,Nu:!0});return Pm(o,T)}(yield sa(n),n.asyncQueue,e,t,r)})),r.promise}function sD(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(o,u,c,m,w){const D=new Qf({next:A=>{u.enqueueAndForget(()=>q_(o,T)),A.fromCache&&"server"===m.source?w.reject(new Oe(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(A)},error:A=>w.reject(A)}),T=new FI(c,D,{includeMetadataChanges:!0,Nu:!0});return Pm(o,T)}(yield sa(n),n.asyncQueue,e,t,r)})),r.promise}class aD{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Dm(this,"async_queue_retry"),this.Wc=()=>{const t=Vf();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=Vf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=Vf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Or;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,be.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Ps(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,pr("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const o=z_.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(o),o}zc(){this.Kc&&dt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,be.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function qm(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class dT{constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Bn extends Td{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new aD,this._persistenceKey=(null==o?void 0:o.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Km(this),this._firestoreClient.terminate()}}function sr(n){return n._firestoreClient||Km(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Km(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new oE(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new sA(n._authCredentials,n._appCheckCredentials,n._queue,r)}function gT(n,e,t){const r=new Or;return n.asyncQueue.enqueue((0,be.Z)(function*(){try{yield aT(n,t),yield Jf(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(c=u).name?c.code===fe.FAILED_PRECONDITION||c.code===fe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw u;di("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var c})).then(()=>r.promise)}function _T(n){if(n._initialized||n._terminated)throw new Oe(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class oa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oa(Kn.fromBase64String(e))}catch(t){throw new Oe(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new oa(Kn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class aa{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Oe(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ad{constructor(e){this._methodName=e}}class f0{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Oe(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Oe(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jt(this._lat,e._lat)||jt(this._long,e._long)}}const hA=/^__.*__$/;class fA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new lo(e,this.data,this.fieldMask,t,this.fieldTransforms):new vl(e,this.data,t,this.fieldTransforms)}}class wT{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new lo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function i(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw dt()}}class s{constructor(e,t,r,o,u,c){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=o,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new s(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.ua(e),o}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.na(),o}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return un(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(i(this.sa)&&hA.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class a{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||bl(e)}da(e,t,r,o=!1){return new s({sa:e,methodName:t,fa:r,path:qn.emptyPath(),oa:!1,la:o},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function l(n){const e=n._freezeSettings(),t=bl(n._databaseId);return new a(n._databaseId,!!e.ignoreUndefinedProperties,t)}function d(n,e,t,r,o,u={}){const c=n.da(u.merge||u.mergeFields?2:0,e,t,o);ct("Data must be an object, but it was:",c,r);const m=Be(r,c);let w,D;if(u.merge)w=new Gr(c.fieldMask),D=c.fieldTransforms;else if(u.mergeFields){const T=[];for(const A of u.mergeFields){const L=Ct(e,A,t);if(!c.contains(L))throw new Oe(fe.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);Hn(T,L)||T.push(L)}w=new Gr(T),D=c.fieldTransforms.filter(A=>w.covers(A.field))}else w=null,D=c.fieldTransforms;return new fA(new zr(m),w,D)}class f extends Ad{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof f}}function v(n,e,t){return new s({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class E extends Ad{_toFieldTransform(e){return new td(e.path,new Jc)}isEqual(e){return e instanceof E}}class I extends Ad{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=v(this,e,!0),r=this._a.map(u=>ve(u,t)),o=new yl(r);return new td(e.path,o)}isEqual(e){return this===e}}class b extends Ad{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=v(this,e,!0),r=this._a.map(u=>ve(u,t)),o=new Xo(r);return new td(e.path,o)}isEqual(e){return this===e}}class S extends Ad{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new ed(e.It,gs(e.It,this.wa));return new td(e.path,t)}isEqual(e){return this===e}}function P(n,e,t,r){const o=n.da(1,e,t);ct("Data must be an object, but it was:",o,r);const u=[],c=zr.empty();Fs(r,(w,D)=>{const T=xt(e,w,t);D=(0,Bt.m9)(D);const A=o.ca(T);if(D instanceof f)u.push(T);else{const L=ve(D,A);null!=L&&(u.push(T),c.set(T,L))}});const m=new Gr(u);return new wT(c,m,o.fieldTransforms)}function z(n,e,t,r,o,u){const c=n.da(1,e,t),m=[Ct(e,r,t)],w=[o];if(u.length%2!=0)throw new Oe(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<u.length;L+=2)m.push(Ct(e,u[L])),w.push(u[L+1]);const D=[],T=zr.empty();for(let L=m.length-1;L>=0;--L)if(!Hn(D,m[L])){const G=m[L];let X=w[L];X=(0,Bt.m9)(X);const Se=c.ca(G);if(X instanceof f)D.push(G);else{const Me=ve(X,Se);null!=Me&&(D.push(G),T.set(G,Me))}}const A=new Gr(D);return new wT(T,A,c.fieldTransforms)}function ee(n,e,t,r=!1){return ve(t,n.da(r?4:3,e))}function ve(n,e){if(Ke(n=(0,Bt.m9)(n)))return ct("Unsupported field value:",e,n),Be(n,e);if(n instanceof Ad)return function(t,r){if(!i(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const c of t){let m=ve(c,r.aa(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Bt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return gs(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=mn.fromDate(t);return{timestampValue:Yg(r.It,o)}}if(t instanceof mn){const o=new mn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Yg(r.It,o)}}if(t instanceof f0)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof oa)return{bytesValue:Qg(r.It,t._byteString)};if(t instanceof xn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Jg(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${Cd(t)}`)}(n,e)}function Be(n,e){const t={};return Xr(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fs(n,(r,o)=>{const u=ve(o,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Ke(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof mn||n instanceof f0||n instanceof oa||n instanceof xn||n instanceof Ad)}function ct(n,e,t){if(!Ke(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Cd(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function Ct(n,e,t){if((e=(0,Bt.m9)(e))instanceof aa)return e._internalPath;if("string"==typeof e)return xt(n,e);throw un("Field path arguments must be of type string or ",n,!1,void 0,t)}const Ne=new RegExp("[~\\*/\\[\\]]");function xt(n,e,t){if(e.search(Ne)>=0)throw un(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new aa(...e.split("."))._internalPath}catch(r){throw un(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function un(n,e,t,r,o){const u=r&&!r.isEmpty(),c=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||c)&&(w+=" (found",u&&(w+=` in field ${r}`),c&&(w+=` in document ${o}`),w+=")"),new Oe(fe.INVALID_ARGUMENT,m+n+w)}function Hn(n,e){return n.some(t=>t.isEqual(e))}class $s{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new xn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new p0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Md("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class p0 extends $s{data(){return super.data()}}function Md(n,e){return"string"==typeof e?xt(n,e):e instanceof aa?e._internalPath:e._delegate._internalPath}function Zm(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Oe(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rl{}function vo(n,...e){for(const t of e)n=t._apply(n);return n}class g0 extends Rl{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=l(e.firestore),r=function(o,u,c,m,w,D,T){let A;if(w.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new Oe(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){_A(T,D);const G=[];for(const X of T)G.push(vA(m,o,X));A={arrayValue:{values:G}}}else A=vA(m,o,T)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||_A(T,D),A=ee(c,"where",T,"in"===D||"not-in"===D);const L=Wr.create(w,D,A);return function(G,X){if(X.dt()){const Me=zg(G);if(null!==Me&&!Me.isEqual(X.field))throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Me.toString()}' and '${X.field.toString()}'`);const mt=Gg(G);null!==mt&&wA(0,X.field,mt)}const Se=function(Me,mt){for(const Rt of Me.filters)if(mt.indexOf(Rt.op)>=0)return Rt.op;return null}(G,function(Me){switch(Me){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(X.op));if(null!==Se)throw new Oe(fe.INVALID_ARGUMENT,Se===X.op?`Invalid query. You cannot use more than one '${X.op.toString()}' filter.`:`Invalid query. You cannot use '${X.op.toString()}' filters with '${Se.toString()}' filters.`)}(o,L),L}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new ti(e.firestore,e.converter,function(o,u){const c=o.filters.concat([u]);return new Jo(o.path,o.collectionGroup,o.explicitOrderBy.slice(),c,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class y0 extends Rl{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Oe(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Oe(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new gl(o,u);return function(m,w){if(null===Gg(m)){const D=zg(m);null!==D&&wA(0,D,w.field)}}(r,c),c}(e._query,this.ma,this.pa);return new ti(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new Jo(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class pA extends Rl{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new ti(e.firestore,e.converter,mf(e._query,this.Ia,this.Ta))}}class gA extends Rl{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=yA(e,this.type,this.Ea,this.Aa);return new ti(e.firestore,e.converter,(o=t,new Jo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class mA extends Rl{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=yA(e,this.type,this.Ea,this.Aa);return new ti(e.firestore,e.converter,(o=t,new Jo((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function yA(n,e,t,r){if(t[0]=(0,Bt.m9)(t[0]),t[0]instanceof $s)return function(o,u,c,m,w){if(!m)throw new Oe(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const D=[];for(const T of Qc(o))if(T.field.isKeyField())D.push(uo(u,m.key));else{const A=m.data.field(T.field);if(Lg(A))throw new Oe(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===A){const L=T.field.canonicalString();throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}D.push(A)}return new nu(D,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=l(n.firestore);return function(u,c,m,w,D,T){const A=u.explicitOrderBy;if(D.length>A.length)throw new Oe(fe.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let G=0;G<D.length;G++){const X=D[G];if(A[G].field.isKeyField()){if("string"!=typeof X)throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof X}`);if(!ru(u)&&-1!==X.indexOf("/"))throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${X}' contains a slash.`);const Se=u.path.child(nn.fromString(X));if(!Ze.isDocumentKey(Se))throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Se}' is not because it contains an odd number of segments.`);const Me=new Ze(Se);L.push(uo(c,Me))}else{const Se=ee(m,w,X);L.push(Se)}}return new nu(L,T)}(n._query,n.firestore._databaseId,o,e,t,r)}}function vA(n,e,t){if("string"==typeof(t=(0,Bt.m9)(t))){if(""===t)throw new Oe(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ru(e)&&-1!==t.indexOf("/"))throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(nn.fromString(t));if(!Ze.isDocumentKey(r))throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return uo(n,new Ze(r))}if(t instanceof xn)return uo(n,t._key);throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Cd(t)}.`)}function _A(n,e){if(!Array.isArray(n)||0===n.length)throw new Oe(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Oe(fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function wA(n,e,t){if(!t.isEqual(e))throw new Oe(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class ET{convertValue(e,t="none"){switch(fl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw dt()}}convertObject(e,t){const r={};return Fs(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new f0(Pn(e.latitude),Pn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Wv(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(zc(e));default:return null}}convertTimestamp(e){const t=Qi(e);return new mn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=nn.fromString(e);Ft(y_(r));const o=new Yo(r.get(1),r.get(3)),u=new Ze(r.popFirst(5));return o.isEqual(t)||pr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function lD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class nR extends ET{constructor(e){super(),this.firestore=e}convertBytes(e){return new oa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,t)}}class ep{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Nl extends $s{constructor(e,t,r,o,u,c){super(e,t,r,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Md("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class _0 extends Nl{data(e={}){return super.data(e)}}class xd{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new ep(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new _0(this._firestore,this._userDataWriter,r.key,r,new ep(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Oe(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new _0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ep(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>o||3!==c.type).map(c=>{const m=new _0(r._firestore,r._userDataWriter,c.doc.key,c.doc,new ep(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,D=-1;return 0!==c.type&&(w=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),D=u.indexOf(c.doc.key)),{type:rR(c.type),doc:m,oldIndex:w,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function rR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return dt()}}function EA(n,e){return n instanceof Nl&&e instanceof Nl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof xd&&e instanceof xd&&n._firestore===e._firestore&&rD(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Rd extends ET{constructor(e){super(),this.firestore=e}convertBytes(e){return new oa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xn(this.firestore,null,t)}}function IA(n,e,t){n=an(n,xn);const r=an(n.firestore,Bn),o=lD(n.converter,e,t);return Ym(r,[d(l(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Zn.none())])}function DA(n,e,t,...r){n=an(n,xn);const o=an(n.firestore,Bn),u=l(o);let c;return c="string"==typeof(e=(0,Bt.m9)(e))||e instanceof aa?z(u,"updateDoc",n._key,e,t,r):P(u,"updateDoc",n._key,e),Ym(o,[c.toMutation(n._key,Zn.exists(!0))])}function bA(n,...e){var t,r,o;n=(0,Bt.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||qm(e[c])||(u=e[c],c++);const m={includeMetadataChanges:u.includeMetadataChanges};if(qm(e[c])){const A=e[c];e[c]=null===(t=A.next)||void 0===t?void 0:t.bind(A),e[c+1]=null===(r=A.error)||void 0===r?void 0:r.bind(A),e[c+2]=null===(o=A.complete)||void 0===o?void 0:o.bind(A)}let w,D,T;if(n instanceof xn)D=an(n.firestore,Bn),T=ml(n._key.path),w={next:A=>{e[c]&&e[c](IT(D,n,A))},error:e[c+1],complete:e[c+2]};else{const A=an(n,ti);D=an(A.firestore,Bn),T=A._query;const L=new Rd(D);w={next:G=>{e[c]&&e[c](new xd(D,L,A,G))},error:e[c+1],complete:e[c+2]},Zm(n._query)}return function(A,L,G,X){const Se=new Qf(X),Me=new FI(L,Se,G);return A.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return Pm(yield sa(A),Me)})),()=>{Se.bc(),A.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return q_(yield sa(A),Me)}))}}(sr(D),T,m,w)}function Ym(n,e){return function(t,r){const o=new Or;return t.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function XS(n,e,t){return jI.apply(this,arguments)}(yield Xf(t),r,o)})),o.promise}(sr(n),e)}function IT(n,e,t){const r=t.docs.get(e._key),o=new Rd(n);return new Nl(n,o,e._key,r,new ep(t.hasPendingWrites,t.fromCache),e.converter)}const fR={maxAttempts:5};class CA{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=l(e)}set(e,t,r){this._verifyNotCommitted();const o=Nd(e,this._firestore),u=lD(o.converter,t,r),c=d(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(c.toMutation(o._key,Zn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Nd(e,this._firestore);let c;return c="string"==typeof(t=(0,Bt.m9)(t))||t instanceof aa?z(this._dataReader,"WriteBatch.update",u._key,t,r,o):P(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Zn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Nd(e,this._firestore);return this._mutations=this._mutations.concat(new rd(t._key,Zn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Oe(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Nd(n,e){if((n=(0,Bt.m9)(n)).firestore!==e)throw new Oe(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class pR extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=l(e)}get(e){const t=Nd(e,this._firestore),r=new nR(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return dt();const u=o[0];if(u.isFoundDocument())return new $s(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new $s(this._firestore,r,t._key,null,t.converter);throw dt()})}set(e,t,r){const o=Nd(e,this._firestore),u=lD(o.converter,t,r),c=d(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,c),this}update(e,t,r,...o){const u=Nd(e,this._firestore);let c;return c="string"==typeof(t=(0,Bt.m9)(t))||t instanceof aa?z(this._dataReader,"Transaction.update",u._key,t,r,o):P(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=Nd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Nd(e,this._firestore),r=new Rd(this._firestore);return super.get(e).then(o=>new Nl(this._firestore,r,t._key,o._document,new ep(!1,!1),t.converter))}}function DT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Oe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function SA(){if("undefined"==typeof Uint8Array)throw new Oe("unimplemented","Uint8Arrays are not available in this environment.")}function AA(){if(!function Hc(){return"undefined"!=typeof atob}())throw new Oe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ul=Ha.SDK_VERSION,(0,Ha._registerComponent)(new Kp.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),c=new Bn(new Mg(t.getProvider("auth-internal")),new Uv(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Oe(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yo(m.options.projectId,w)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),(0,Ha.registerVersion)(Fv,"3.7.3",n),(0,Ha.registerVersion)(Fv,"3.7.3","esm2017")}();class w0{constructor(e){this._delegate=e}static fromBase64String(e){return AA(),new w0(oa.fromBase64String(e))}static fromUint8Array(e){return SA(),new w0(oa.fromUint8Array(e))}toBase64(){return AA(),this._delegate.toBase64()}toUint8Array(){return SA(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function bT(n){return function DR(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class bR{enableIndexedDbPersistence(e,t){return function fT(n,e){_T(n=an(n,Bn));const t=sr(n),r=n._freezeSettings(),o=new XI;return gT(t,o,new QI(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function pT(n){_T(n=an(n,Bn));const e=sr(n),t=n._freezeSettings(),r=new XI;return gT(e,r,new JI(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function lA(n){if(n._initialized&&!n._terminated)throw new Oe(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{yield(t=(0,be.Z)(function*(r){if(!Os.C())return Promise.resolve();const o=r+"main";yield Os.delete(o)}),function(r){return t.apply(this,arguments)})(_m(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class MA{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Yo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&di("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Yf(n,e,t,r={}){var o;const u=(n=an(n,Td))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&di("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let c,m;if("string"==typeof r.mockUserToken)c=r.mockUserToken,m=Hr.MOCK_USER;else{c=(0,Bt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Oe(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Hr(w)}n._authCredentials=new Ob(new Ag(c,m))}}(this._delegate,e,t,r)}enableNetwork(){return function yT(n){return function oA(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield zm(n),t=yield d0(n);return e.setNetworkEnabled(!0),function(r){const o=Xe(r);return o._u.delete(0),Uf(o)}(t)}))}(sr(n=an(n,Bn)))}(this._delegate)}disableNetwork(){return function vT(n){return function aA(n){return n.asyncQueue.enqueue((0,be.Z)(function*(){const e=yield zm(n),t=yield d0(n);return e.setNetworkEnabled(!1),(r=(0,be.Z)(function*(o){const u=Xe(o);u._u.add(0),yield js(u),u.gu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(sr(n=an(n,Bn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,eD("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function mT(n){return function(e){const t=new Or;return e.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function ZC(n,e){return zI.apply(this,arguments)}(yield Xf(e),t)})),t.promise}(sr(n=an(n,Bn)))}(this._delegate)}onSnapshotsInSync(e){return function hR(n,e){return function lT(n,e){const t=new Qf(e);return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield sa(n),o=t,Xe(r).Ru.add(o),void o.next();var r,o})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return r=yield sa(n),o=t,void Xe(r).Ru.delete(o);var r,o}))}}(sr(n=an(n,Bn)),qm(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Oe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Qm(this,a0(this._delegate,e))}catch(t){throw Xi(t,"collection()","Firestore.collection()")}}doc(e){try{return new _o(this,$m(this._delegate,e))}catch(t){throw Xi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new es(this,function tD(n,e){if(n=an(n,Td),jm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Oe(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ti(n,null,(t=e,new Jo(nn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Xi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function gR(n,e,t){n=an(n,Bn);const r=Object.assign(Object.assign({},fR),t);return function(o){if(o.maxAttempts<1)throw new Oe(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,c){const m=new Or;return o.asyncQueue.enqueueAndForget((0,be.Z)(function*(){const w=yield function Wm(n){return yo(n).then(e=>e.datastore)}(o);new iA(o.asyncQueue,w,c,u,m).run()})),m.promise}(sr(n),o=>e(new pR(n,o)),r)}(this._delegate,t=>e(new xA(this,t)))}batch(){return sr(this._delegate),new RA(new CA(this._delegate,e=>Ym(this._delegate,e)))}loadBundle(e){return function cA(n,e){const t=sr(n=an(n,Bn)),r=new dT;return function cT(n,e,t,r){const o=function(u,c){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,D){if(w instanceof Uint8Array)return iT(w,D);if(w instanceof ArrayBuffer)return iT(new Uint8Array(w),D);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new sT(w,c);var w}(t,bl(e));n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){!function nT(n,e,t){const r=Xe(n);var o;(o=(0,be.Z)(function*(u,c,m){try{const w=yield c.getMetadata();if(yield function(L,G){const X=Xe(L),Se=Pr(G.createTime);return X.persistence.runTransaction("hasNewerBundle","readonly",Me=>X.Ns.getBundleMetadata(Me,G.id)).then(Me=>!!Me&&Me.createTime.compareTo(Se)>=0)}(u.localStore,w))return yield c.close(),m._completeWith({taskState:"Success",documentsLoaded:(L=w).totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}),Promise.resolve(new Set);m._updateProgress(HC(w));const D=new JS(w,u.localStore,c.It);let T=yield c.mc();for(;T;){const L=yield D.Fu(T);L&&m._updateProgress(L),T=yield c.mc()}const A=yield D.complete();return yield ra(u,A.Lu,void 0),yield function(L,G){const X=Xe(L);return X.persistence.runTransaction("Save bundle","readwrite",Se=>X.Ns.saveBundleMetadata(Se,G))}(u.localStore,w),m._completeWith(A.progress),Promise.resolve(A.Bu)}catch(w){return di("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var L}),function(u,c,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield Xf(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function dA(n,e){return function oD(n,e){return n.asyncQueue.enqueue((0,be.Z)(function*(){return function(t,r){const o=Xe(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ns.getNamedQuery(u,r))}(yield Sd(n),e)}))}(sr(n=an(n,Bn)),e).then(t=>t?new ti(n,null,t.query):null)}(this._delegate,e).then(t=>t?new es(this,t):null)}}class cD extends ET{constructor(e){super(),this.firestore=e}convertBytes(e){return new w0(new oa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return _o.forKey(t,this.firestore,null)}}class xA{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new cD(e)}get(e){const t=np(e);return this._delegate.get(t).then(r=>new E0(this._firestore,new Nl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=np(e);return r?(DT("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=np(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=np(e);return this._delegate.delete(t),this}}class RA{constructor(e){this._delegate=e}set(e,t,r){const o=np(e);return r?(DT("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=np(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=np(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class tp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new _0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new I0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=tp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new tp(e,new cD(e),t),o.set(t,u)),u}}tp.INSTANCES=new WeakMap;class _o{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Oe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new _o(t,new xn(t._delegate,r,new Ze(e)))}static forKey(e,t,r){return new _o(t,new xn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Qm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Qm(this.firestore,a0(this._delegate,e))}catch(t){throw Xi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Bt.m9)(e))instanceof xn&&nD(this._delegate,e)}set(e,t){t=DT("DocumentReference.set",t);try{return t?IA(this._delegate,e,t):IA(this._delegate,e)}catch(r){throw Xi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?DA(this._delegate,e):DA(this._delegate,e,t,...r)}catch(o){throw Xi(o,"updateDoc()","DocumentReference.update()")}}delete(){return function cR(n){return Ym(an(n.firestore,Bn),[new rd(n._key,Zn.none())])}(this._delegate)}onSnapshot(...e){const t=NA(e),r=OA(e,o=>new E0(this.firestore,new Nl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return bA(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function sR(n){n=an(n,xn);const e=an(n.firestore,Bn),t=sr(e),r=new Rd(e);return function uA(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(o,u,c){try{const m=yield function(w,D){const T=Xe(w);return T.persistence.runTransaction("read document","readonly",A=>T.localDocuments.getDocument(A,D))}(o,u);m.isFoundDocument()?c.resolve(m):m.isNoDocument()?c.resolve(null):c.reject(new Oe(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Dd(m,`Failed to get document '${u} from cache`);c.reject(w)}}),function(o,u,c){return r.apply(this,arguments)})(yield Sd(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Nl(e,r,n._key,o,new ep(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function oR(n){n=an(n,xn);const e=an(n.firestore,Bn);return h0(sr(e),n._key,{source:"server"}).then(t=>IT(e,n,t))}(this._delegate):function iR(n){n=an(n,xn);const e=an(n.firestore,Bn);return h0(sr(e),n._key).then(t=>IT(e,n,t))}(this._delegate),t.then(r=>new E0(this.firestore,new Nl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new _o(this.firestore,this._delegate.withConverter(e?tp.getInstance(this.firestore,e):null))}}function Xi(n,e,t){return n.message=n.message.replace(e,t),n}function NA(n){for(const e of n)if("object"==typeof e&&!bT(e))return e;return{}}function OA(n,e){var t,r;let o;return o=bT(n[0])?n[0]:bT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class E0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new _o(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return EA(this._delegate,e._delegate)}}class I0 extends E0{data(e){const t=this._delegate.data(e);return function BS(n,e){n||dt()}(void 0!==t),t}}class es{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cD(e)}where(e,t,r){try{return new es(this.firestore,vo(this._delegate,function m0(n,e,t){const r=e,o=Md("where",n);return new g0(o,r,t)}(e,t,r)))}catch(o){throw Xi(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new es(this.firestore,vo(this._delegate,function v0(n,e="asc"){const t=e,r=Md("orderBy",n);return new y0(r,t)}(e,t)))}catch(r){throw Xi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new es(this.firestore,vo(this._delegate,function Yx(n){return r0("limit",n),new pA("limit",n,"F")}(e)))}catch(t){throw Xi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new es(this.firestore,vo(this._delegate,function Qx(n){return r0("limitToLast",n),new pA("limitToLast",n,"L")}(e)))}catch(t){throw Xi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new es(this.firestore,vo(this._delegate,function Jx(...n){return new gA("startAt",n,!0)}(...e)))}catch(t){throw Xi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new es(this.firestore,vo(this._delegate,function Xx(...n){return new gA("startAfter",n,!1)}(...e)))}catch(t){throw Xi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new es(this.firestore,vo(this._delegate,function eR(...n){return new mA("endBefore",n,!1)}(...e)))}catch(t){throw Xi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new es(this.firestore,vo(this._delegate,function tR(...n){return new mA("endAt",n,!0)}(...e)))}catch(t){throw Xi(t,"endAt()","Query.endAt()")}}isEqual(e){return rD(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function uR(n){n=an(n,ti);const e=an(n.firestore,Bn),t=sr(e),r=new Rd(e);return function uT(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(o,u,c){try{const m=yield hu(o,u,!0),w=new zC(u,m.Hi),D=w.Wu(m.documents),T=w.applyChanges(D,!1);c.resolve(T.snapshot)}catch(m){const w=Dd(m,`Failed to execute query '${u} against cache`);c.reject(w)}}),function(o,u,c){return r.apply(this,arguments)})(yield Sd(n),e,t);var r})),t.promise}(t,n._query).then(o=>new xd(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function lR(n){n=an(n,ti);const e=an(n.firestore,Bn),t=sr(e),r=new Rd(e);return sD(t,n._query,{source:"server"}).then(o=>new xd(e,r,n,o))}(this._delegate):function aR(n){n=an(n,ti);const e=an(n.firestore,Bn),t=sr(e),r=new Rd(e);return Zm(n._query),sD(t,n._query).then(o=>new xd(e,r,n,o))}(this._delegate),t.then(r=>new CT(this.firestore,new xd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=NA(e),r=OA(e,o=>new CT(this.firestore,new xd(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return bA(this._delegate,t,r)}withConverter(e){return new es(this.firestore,this._delegate.withConverter(e?tp.getInstance(this.firestore,e):null))}}class TR{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new I0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class CT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new es(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new I0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new TR(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new I0(this._firestore,r))})}isEqual(e){return EA(this._delegate,e._delegate)}}class Qm extends es{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new _o(this.firestore,e):null}doc(e){try{return new _o(this.firestore,void 0===e?$m(this._delegate):$m(this._delegate,e))}catch(t){throw Xi(t,"doc()","CollectionReference.doc()")}}add(e){return function dR(n,e){const t=an(n.firestore,Bn),r=$m(n),o=lD(n.converter,e);return Ym(t,[d(l(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Zn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new _o(this.firestore,t))}isEqual(e){return nD(this._delegate,e._delegate)}withConverter(e){return new Qm(this.firestore,this._delegate.withConverter(e?tp.getInstance(this.firestore,e):null))}}function np(n){return an(n,xn)}class TT{constructor(...e){this._delegate=new aa(...e)}static documentId(){return new TT(qn.keyField().canonicalString())}isEqual(e){return(e=(0,Bt.m9)(e))instanceof aa&&this._delegate._internalPath.isEqual(e._internalPath)}}class rp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function yR(){return new E("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new rp(e)}static delete(){const e=function mR(){return new f("deleteField")}();return e._methodName="FieldValue.delete",new rp(e)}static arrayUnion(...e){const t=function vR(...n){return new I("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new rp(t)}static arrayRemove(...e){const t=function _R(...n){return new b("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new rp(t)}static increment(e){const t=function wR(n){return new S("increment",n)}(e);return t._methodName="FieldValue.increment",new rp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const SR={Firestore:MA,GeoPoint:f0,Timestamp:mn,Blob:w0,Transaction:xA,WriteBatch:RA,DocumentReference:_o,DocumentSnapshot:E0,Query:es,QueryDocumentSnapshot:I0,QuerySnapshot:CT,CollectionReference:Qm,FieldPath:TT,FieldValue:rp,setLogLevel:function CR(n){!function tE(n){Qa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function MR(n){(function AR(n,e){n.INTERNAL.registerComponent(new Kp.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},SR)))})(n,(e,t)=>new MA(e,t,new bR)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(XD.Z);var pu=N(7579),xR=N(6451),D0=N(5363);function Cr(n,e){return(0,ui.e)((t,r)=>{let o=null,u=0,c=!1;const m=()=>c&&!o&&r.complete();t.subscribe((0,wr.x)(r,w=>{null==o||o.unsubscribe();let D=0;const T=u++;(0,xi.Xf)(n(w,T)).subscribe(o=(0,wr.x)(r,A=>r.next(e?e(w,A,T,D++):A),()=>{o=null,m()}))},()=>{c=!0,m()}))})}var RR=N(6063);class NR extends pu.x{constructor(e=1/0,t=1/0,r=RR.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!o&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const c=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=c;w+=2)m=w;m&&r.splice(0,m+1)}}}var OR=N(3099);function ST(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,OR.B)({connector:()=>new NR(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}const dD=(0,N(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Od=N(515);function b0(n){return n<=0?()=>Od.E:(0,ui.e)((e,t)=>{let r=0;e.subscribe((0,wr.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function hD(n){return(0,ui.e)((e,t)=>{let r=!1;e.subscribe((0,wr.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function PA(n=kR){return(0,ui.e)((e,t)=>{let r=!1;e.subscribe((0,wr.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function kR(){return new dD}function Ol(n,e){const t=arguments.length>=2;return r=>r.pipe(n?wi((o,u)=>n(o,u,r)):kh.y,b0(1),t?hD(e):PA(()=>new dD))}var AT=N(576);function kA(n,e){return(0,AT.m)(e)?Cr(()=>n,e):Cr(()=>n)}var MT=N(9468);N(5867);const RT=new Map,LA={activated:!1,tokenObservers:[]},BR={initialized:!1,enabled:!1};function bi(n){return RT.get(n)||Object.assign({},LA)}function fD(){return BR}class WR{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,be.Z)(function*(){t.stop();try{t.pending=new Bt.BH,yield function qR(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Bt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ts=new Bt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function UA(n){if(!bi(n).activated)throw ts.create("use-before-activation",{appName:n.name})}function PT(n,e){return kT.apply(this,arguments)}function kT(){return kT=(0,be.Z)(function*({url:n,body:e},t){var r,o;const u={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const G=yield c.getHeartbeatsHeader();G&&(u["X-Firebase-Client"]=G)}const m={method:"POST",body:JSON.stringify(e),headers:u};let w,D;try{w=yield fetch(n,m)}catch(G){throw ts.create("fetch-network-error",{originalErrorMessage:null===(r=G)||void 0===r?void 0:r.message})}if(200!==w.status)throw ts.create("fetch-status-error",{httpStatus:w.status});try{D=yield w.json()}catch(G){throw ts.create("fetch-parse-error",{originalErrorMessage:null===(o=G)||void 0===o?void 0:o.message})}const T=D.ttl.match(/^([\d.]+)(s)$/);if(!T||!T[2]||isNaN(Number(T[1])))throw ts.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${D.ttl}`});const A=1e3*Number(T[1]),L=Date.now();return{token:D.token,expireTimeMillis:L+A,issuedAtTimeMillis:L}}),kT.apply(this,arguments)}function QR(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const T0="firebase-app-check-store";let mD=null;function jA(){return mD||(mD=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var u;e(ts.create("storage-open",{originalErrorMessage:null===(u=o.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(T0,{keyPath:"compositeKey"})}}catch(r){e(ts.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),mD)}function FT(){return FT=(0,be.Z)(function*(n,e){const r=(yield jA()).transaction(T0,"readwrite"),u=r.objectStore(T0).put({compositeKey:n,value:e});return new Promise((c,m)=>{u.onsuccess=w=>{c()},r.onerror=w=>{var D;m(ts.create("storage-set",{originalErrorMessage:null===(D=w.target.error)||void 0===D?void 0:D.message}))}})}),FT.apply(this,arguments)}const S0=new Ga.Yd("@firebase/app-check");function UT(n,e){return(0,Bt.hl)()?function tN(n,e){return function $A(n,e){return FT.apply(this,arguments)}(function GA(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{S0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function zA(){return fD().enabled}function WA(){return jT.apply(this,arguments)}function jT(){return jT=(0,be.Z)(function*(){const n=fD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),jT.apply(this,arguments)}const aN={error:"UNKNOWN_ERROR"};function uN(n){return Bt.US.encodeString(JSON.stringify(n),!1)}function yD(n){return $T.apply(this,arguments)}function $T(){return $T=(0,be.Z)(function*(n,e=!1){const t=n.app;UA(t);const r=bi(t);let u,o=r.token;if(o&&!Jm(o)&&(r.token=void 0,o=void 0),!o){const w=yield r.cachedTokenPromise;w&&(Jm(w)?o=w:yield UT(t,void 0))}if(!e&&o&&Jm(o))return{token:o.token};let m,c=!1;if(zA()){r.exchangeTokenPromise||(r.exchangeTokenPromise=PT(QR(t,yield WA()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const w=yield r.exchangeTokenPromise;return yield UT(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),o=yield bi(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?S0.warn(w.message):S0.error(w),u=w}return o?u?m=Jm(o)?{token:o.token,internalError:u}:ZA(u):(m={token:o.token},r.token=o,yield UT(t,o)):m=ZA(u),c&&KA(t,m),m}),$T.apply(this,arguments)}function GT(n,e){const t=bi(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function qA(n){const{app:e}=n,t=bi(e);let r=t.tokenRefresher;r||(r=function lN(n){const{app:e}=n;return new WR((0,be.Z)(function*(){let r;if(r=bi(e).token?yield yD(n,!0):yield yD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=bi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function KA(n,e){const t=bi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function Jm(n){return n.expireTimeMillis-Date.now()>0}function ZA(n){return{token:uN(aN),error:n}}class cN{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=bi(this.app);for(const t of e)GT(this.app,t.next);return Promise.resolve()}}const rM="app-check-internal";!function bN(){(0,Ha._registerComponent)(new Kp.wA("app-check",n=>function dN(n,e){return new cN(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(rM).initialize()})),(0,Ha._registerComponent)(new Kp.wA(rM,n=>function hN(n){return{getToken:e=>yD(n,e),addTokenListener:e=>function HT(n,e,t,r){const{app:o}=n,u=bi(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Jm(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),qA(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>qA(n))}(n,"INTERNAL",e),removeTokenListener:e=>GT(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ha.registerVersion)("@firebase/app-check","0.5.17")}();class KT{constructor(){return(0,Sn.vb)("app-check")}}"undefined"!=typeof window&&window;var ip=N(127);const sM=new g.OlP("angularfire2.auth.use-emulator"),oM=new g.OlP("angularfire2.auth.settings"),aM=new g.OlP("angularfire2.auth.tenant-id"),uM=new g.OlP("angularfire2.auth.langugage-code"),lM=new g.OlP("angularfire2.auth.use-device-language"),cM=new g.OlP("angularfire.auth.persistence"),dM=(n,e,t,r,o,u,c,m)=>(0,Ir.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),c)for(const[D,T]of Object.entries(c))w.settings[D]=T;return m&&w.setPersistence(m),w},[t,r,o,u,c,m]);let A0=(()=>{class n{constructor(t,r,o,u,c,m,w,D,T,A,L,G){const X=new pu.x,Se=ht(void 0).pipe((0,D0.Q)(c.outsideAngular),Cr(()=>u.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,1277)))),(0,At.U)(()=>(0,Ir.on)(t,u,r)),(0,At.U)(Me=>dM(Me,u,m,D,T,A,w,L)),ST({bufferSize:1,refCount:!1}));if(Mr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ht(null);else{Se.pipe(Ol()).subscribe();const mt=Se.pipe(Cr(Tt=>Tt.getRedirectResult().then($t=>$t,()=>null)),Sn.iC,ST({bufferSize:1,refCount:!1})),Rt=Se.pipe(Cr(Tt=>new Br.y($t=>({unsubscribe:u.runOutsideAngular(()=>Tt.onAuthStateChanged(rn=>$t.next(rn),rn=>$t.error(rn),()=>$t.complete()))})))),Gt=Se.pipe(Cr(Tt=>new Br.y($t=>({unsubscribe:u.runOutsideAngular(()=>Tt.onIdTokenChanged(rn=>$t.next(rn),rn=>$t.error(rn),()=>$t.complete()))}))));this.authState=mt.pipe(kA(Rt),(0,MT.R)(c.outsideAngular),(0,D0.Q)(c.insideAngular)),this.user=mt.pipe(kA(Gt),(0,MT.R)(c.outsideAngular),(0,D0.Q)(c.insideAngular)),this.idToken=this.user.pipe(Cr(Tt=>Tt?(0,wn.D)(Tt.getIdToken()):ht(null))),this.idTokenResult=this.user.pipe(Cr(Tt=>Tt?(0,wn.D)(Tt.getIdTokenResult()):ht(null))),this.credential=(0,xR.T)(mt,X,this.authState.pipe(wi(Tt=>!Tt))).pipe((0,At.U)(Tt=>null!=Tt&&Tt.user?Tt:null),(0,MT.R)(c.outsideAngular),(0,D0.Q)(c.insideAngular))}return(0,Ir.pX)(this,Se,u,{spy:{apply:(Me,mt,Rt)=>{(Me.startsWith("signIn")||Me.startsWith("createUser"))&&Rt.then(Gt=>X.next(Gt))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ir.Dh),g.LFG(Ir.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Sn.HU),g.LFG(sM,8),g.LFG(oM,8),g.LFG(aM,8),g.LFG(uM,8),g.LFG(lM,8),g.LFG(cM,8),g.LFG(KT,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),xN=(()=>{class n{constructor(){ip.Z.registerVersion("angularfire",Sn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[A0]}),n})();function hM(n,e){return function RN(n,e=Wp.z){return new Br.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function YT(n,e){return hM(n,e).pipe((0,At.U)(t=>({payload:t,type:"query"})))}function _D(n,e){return YT(n,e).pipe(Oh(void 0),qp(),(0,At.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,m)=>{const w=o.find(T=>T.doc.ref.isEqual(c.ref)),D=null==t?void 0:t.payload.docs.find(T=>T.ref.isEqual(c.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(c.metadata)||!w&&D&&JSON.stringify(D.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:c}})}),u}))}function fM(n,e,t){return _D(n,t).pipe(Ph((r,o)=>function ON(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function PN(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return QT(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return QT(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return QT(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),pw(),(0,At.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function QT(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function pM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class gM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=_D(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,At.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(Oh(void 0),qp(),wi(([r,o])=>o.length>0||!r),(0,At.U)(([r,o])=>o),Sn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ph((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=pM(e);return fM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}valueChanges(e={}){return YT(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Sn.iC)}get(e){return(0,wn.D)(this.query.get(e)).pipe(Sn.iC)}add(e){return this.ref.add(e)}doc(e){return new mM(this.ref.doc(e),this.afs)}}class mM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=_M(r,t);return new gM(o,u,this.afs)}snapshotChanges(){return function NN(n,e){return hM(n,e).pipe(Oh(void 0),qp(),(0,At.U)(([t,r])=>r.exists?null!=t&&t.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,At.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,wn.D)(this.ref.get(e)).pipe(Sn.iC)}}class kN{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?_D(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),wi(t=>t.length>0),Sn.iC):_D(this.query,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ph((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=pM(e);return fM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Sn.iC)}valueChanges(e={}){return YT(this.query,this.afs.schedulers.outsideAngular).pipe((0,At.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Sn.iC)}get(e){return(0,wn.D)(this.query.get(e)).pipe(Sn.iC)}}const yM=new g.OlP("angularfire2.enableFirestorePersistence"),vM=new g.OlP("angularfire2.firestore.persistenceSettings"),FN=new g.OlP("angularfire2.firestore.settings"),LN=new g.OlP("angularfire2.firestore.use-emulator");function _M(n,e=(t=>t)){return{query:e(n),ref:n}}let wM=(()=>{class n{constructor(t,r,o,u,c,m,w,D,T,A,L,G,X,Se,Me,mt,Rt){this.schedulers=w;const Gt=(0,Ir.on)(t,m,r),Tt=T;A&&dM(Gt,m,L,X,Se,Me,G,mt),[this.firestore,this.persistenceEnabled$]=(0,Ir.cc)(`${Gt.name}.firestore`,"AngularFirestore",Gt.name,()=>{const $t=m.runOutsideAngular(()=>Gt.firestore());if(u&&$t.settings(u),Tt&&$t.useEmulator(...Tt),o&&!Mr(c)){const rn=()=>{try{return(0,wn.D)($t.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(ni){return"undefined"!=typeof console&&console.warn(ni),ht(!1)}};return[$t,m.runOutsideAngular(rn)]}return[$t,ht(!1)]},[u,Tt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=_M(o,r),m=this.schedulers.ngZone.run(()=>u);return new gM(m,c,this)}collectionGroup(t,r){const o=r||(c=>c),u=this.firestore.collectionGroup(t);return new kN(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new mM(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ir.Dh),g.LFG(Ir.xv,8),g.LFG(yM,8),g.LFG(FN,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Sn.HU),g.LFG(vM,8),g.LFG(LN,8),g.LFG(A0,8),g.LFG(sM,8),g.LFG(oM,8),g.LFG(aM,8),g.LFG(uM,8),g.LFG(lM,8),g.LFG(cM,8),g.LFG(KT,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),VN=(()=>{class n{constructor(){ip.Z.registerVersion("angularfire",Sn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:yM,useValue:!0},{provide:vM,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[wM]}),n})();var EM=N(655),UN=N(7982);class ua extends pu.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var BN=N(9672);function IM(...n){const e=(0,Ts.yG)(n),t=(0,Ts.jO)(n),{args:r,keys:o}=ih(n);if(0===r.length)return(0,wn.D)([],e);const u=new Br.y(function jN(n,e,t=kh.y){return r=>{DM(e,()=>{const{length:o}=n,u=new Array(o);let c=o,m=o;for(let w=0;w<o;w++)DM(e,()=>{const D=(0,wn.D)(n[w],e);let T=!1;D.subscribe((0,wr.x)(r,A=>{u[w]=A,T||(T=!0,m--),m||r.next(t(u.slice()))},()=>{--c||r.complete()}))},r)},r)}}(r,e,o?c=>oi(o,c):kh.y));return t?u.pipe(Bu(t)):u}function DM(n,e,t){n?(0,BN.f)(t,n,e):e()}function bM(n){return new Br.y(e=>{(0,xi.Xf)(n()).subscribe(e)})}var $N=N(9635);function M0(n,e){const t=(0,AT.m)(n)?n:()=>n,r=o=>o.error(t());return new Br.y(e?o=>e.schedule(r,0,o):r)}var CM=N(727);function JT(){return(0,ui.e)((n,e)=>{let t=null;n._refCount++;const r=(0,wr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class TM extends Br.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ui.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new CM.w0;const t=this.getSubject();e.add(this.source.subscribe((0,wr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=CM.w0.EMPTY)}return e}refCount(){return JT()(this)}}var Bi=N(5577);function sp(n,e){return(0,AT.m)(e)?(0,Bi.z)(n,e,1):(0,Bi.z)(n,1)}var ji=N(8505);function Pd(n){return(0,ui.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,wr.x)(t,void 0,void 0,c=>{u=(0,xi.Xf)(n(c,Pd(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function XT(n){return n<=0?()=>Od.E:(0,ui.e)((e,t)=>{let r=[];e.subscribe((0,wr.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function SM(n,e){const t=arguments.length>=2;return r=>r.pipe(n?wi((o,u)=>n(o,u,r)):kh.y,XT(1),t?hD(e):PA(()=>new dD))}function eS(n){return(0,ui.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const ln="primary",x0=Symbol("RouteTitle");class zN{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Xm(n){return new zN(n)}function WN(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const c=r[u],m=n[u];if(c.startsWith(":"))o[c.substring(1)]=m;else if(c!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function gu(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!AM(n[o],e[o]))return!1;return!0}function AM(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function MM(n){return Array.prototype.concat.apply([],n)}function xM(n){return n.length>0?n[n.length-1]:null}function Ci(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function kd(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,wn.D)(Promise.resolve(n)):ht(n)}const ZN={exact:function OM(n,e,t){if(!ap(n.segments,e.segments)||!wD(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!OM(n.children[r],e.children[r],t))return!1;return!0},subset:PM},RM={exact:function YN(n,e){return gu(n,e)},subset:function QN(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>AM(n[t],e[t]))},ignored:()=>!0};function NM(n,e,t){return ZN[t.paths](n.root,e.root,t.matrixParams)&&RM[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function PM(n,e,t){return kM(n,e,e.segments,t)}function kM(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!ap(o,t)||e.hasChildren()||!wD(o,t,r))}if(n.segments.length===t.length){if(!ap(n.segments,t)||!wD(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!PM(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(ap(n.segments,o)&&wD(n.segments,o,r)&&n.children[ln])&&kM(n.children[ln],e,u,r)}}function wD(n,e,t){return e.every((r,o)=>RM[t](n[o].parameters,r.parameters))}class op{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xm(this.queryParams)),this._queryParamMap}toString(){return eO.serialize(this)}}class dn{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Ci(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ED(this)}}class R0{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Xm(this.parameters)),this._parameterMap}toString(){return UM(this)}}function ap(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let FM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return new nS},providedIn:"root"}),n})();class nS{parse(e){const t=new lO(e);return new op(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${N0(e.root,!0)}`,r=function rO(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${ID(t)}=${ID(o)}`).join("&"):`${ID(t)}=${ID(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),o="string"==typeof e.fragment?`#${function tO(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${o}`}}const eO=new nS;function ED(n){return n.segments.map(e=>UM(e)).join("/")}function N0(n,e){if(!n.hasChildren())return ED(n);if(e){const t=n.children[ln]?N0(n.children[ln],!1):"",r=[];return Ci(n.children,(o,u)=>{u!==ln&&r.push(`${u}:${N0(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function XN(n,e){let t=[];return Ci(n.children,(r,o)=>{o===ln&&(t=t.concat(e(r,o)))}),Ci(n.children,(r,o)=>{o!==ln&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===ln?[N0(n.children[ln],!1)]:[`${o}:${N0(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ln]?`${ED(n)}/${t[0]}`:`${ED(n)}/(${t.join("//")})`}}function LM(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ID(n){return LM(n).replace(/%3B/gi,";")}function rS(n){return LM(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function DD(n){return decodeURIComponent(n)}function VM(n){return DD(n.replace(/\+/g,"%20"))}function UM(n){return`${rS(n.path)}${function nO(n){return Object.keys(n).map(e=>`;${rS(e)}=${rS(n[e])}`).join("")}(n.parameters)}`}const iO=/^[^\/()?;=#]+/;function bD(n){const e=n.match(iO);return e?e[0]:""}const sO=/^[^=?&#]+/,aO=/^[^&#]+/;class lO{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new dn([],{}):new dn([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ln]=new dn(e,t)),r}parseSegment(){const e=bD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new g.vHH(4009,!1);return this.capture(e),new R0(DD(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=bD(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=bD(this.remaining);o&&(r=o,this.capture(r))}e[DD(t)]=DD(r)}parseQueryParam(e){const t=function oO(n){const e=n.match(sO);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const c=function uO(n){const e=n.match(aO);return e?e[0]:""}(this.remaining);c&&(r=c,this.capture(r))}const o=VM(t),u=VM(r);if(e.hasOwnProperty(o)){let c=e[o];Array.isArray(c)||(c=[c],e[o]=c),c.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=bD(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new g.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=ln);const c=this.parseChildren();t[u]=1===Object.keys(c).length?c[ln]:new dn([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new g.vHH(4011,!1)}}function iS(n){return n.segments.length>0?new dn([],{[ln]:n}):n}function CD(n){const e={};for(const r of Object.keys(n.children)){const u=CD(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function cO(n){if(1===n.numberOfChildren&&n.children[ln]){const e=n.children[ln];return new dn(n.segments.concat(e.segments),e.children)}return n}(new dn(n.segments,e))}function up(n){return n instanceof op}function fO(n,e,t,r,o){var u;if(0===t.length)return ey(e.root,e.root,e.root,r,o);const m=function $M(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new jM(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,c)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return Ci(u.outlets,(w,D)=>{m[D]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===c?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new jM(t,e,r)}(t);return m.toRoot()?ey(e.root,e.root,new dn([],{}),r,o):function w(T){var A;const L=function gO(n,e,t,r){if(n.isAbsolute)return new ty(e.root,!0,0);if(-1===r)return new ty(t,t===e.root,0);return function HM(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new g.vHH(4005,!1);o=r.segments.length}return new ty(r,!1,o-u)}(t,r+(O0(n.commands[0])?0:1),n.numberOfDoubleDots)}(m,e,null===(A=n.snapshot)||void 0===A?void 0:A._urlSegment,T),G=L.processChildren?k0(L.segmentGroup,L.index,m.commands):oS(L.segmentGroup,L.index,m.commands);return ey(e.root,L.segmentGroup,G,r,o)}(null===(u=n.snapshot)||void 0===u?void 0:u._lastPathIndex)}function O0(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function P0(n){return"object"==typeof n&&null!=n&&n.outlets}function ey(n,e,t,r,o){let c,u={};r&&Ci(r,(w,D)=>{u[D]=Array.isArray(w)?w.map(T=>`${T}`):`${w}`}),c=n===e?t:BM(n,e,t);const m=iS(CD(c));return new op(m,u,o)}function BM(n,e,t){const r={};return Ci(n.children,(o,u)=>{r[u]=o===e?t:BM(o,e,t)}),new dn(n.segments,r)}class jM{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&O0(r[0]))throw new g.vHH(4003,!1);const o=r.find(P0);if(o&&o!==xM(r))throw new g.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ty{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function oS(n,e,t){if(n||(n=new dn([],{})),0===n.segments.length&&n.hasChildren())return k0(n,e,t);const r=function yO(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const c=n.segments[o],m=t[r];if(P0(m))break;const w=`${m}`,D=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&D&&"object"==typeof D&&void 0===D.outlets){if(!zM(w,D,c))return u;r+=2}else{if(!zM(w,{},c))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new dn(n.segments.slice(0,r.pathIndex),{});return u.children[ln]=new dn(n.segments.slice(r.pathIndex),n.children),k0(u,0,o)}return r.match&&0===o.length?new dn(n.segments,{}):r.match&&!n.hasChildren()?aS(n,e,t):r.match?k0(n,0,o):aS(n,e,t)}function k0(n,e,t){if(0===t.length)return new dn(n.segments,{});{const r=function mO(n){return P0(n[0])?n[0].outlets:{[ln]:n}}(t),o={};return Ci(r,(u,c)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[c]=oS(n.children[c],e,u))}),Ci(n.children,(u,c)=>{void 0===r[c]&&(o[c]=u)}),new dn(n.segments,o)}}function aS(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(P0(u)){const w=vO(u.outlets);return new dn(r,w)}if(0===o&&O0(t[0])){r.push(new R0(n.segments[e].path,GM(t[0]))),o++;continue}const c=P0(u)?u.outlets[ln]:`${u}`,m=o<t.length-1?t[o+1]:null;c&&m&&O0(m)?(r.push(new R0(c,GM(m))),o+=2):(r.push(new R0(c,{})),o++)}return new dn(r,{})}function vO(n){const e={};return Ci(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=aS(new dn([],{}),0,t))}),e}function GM(n){const e={};return Ci(n,(t,r)=>e[r]=`${t}`),e}function zM(n,e,t){return n==t.path&&gu(e,t.parameters)}class Pl{constructor(e,t){this.id=e,this.url=t}}class uS extends Pl{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class lp extends Pl{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class TD extends Pl{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class WM extends Pl{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class _O extends Pl{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wO extends Pl{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class EO extends Pl{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class IO extends Pl{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class DO extends Pl{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bO{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class CO{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class TO{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class SO{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class AO{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class qM{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class KM{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class ZM{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=lS(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=lS(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=cS(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return cS(e,this._root).map(t=>t.value)}}function lS(n,e){if(n===e.value)return e;for(const t of e.children){const r=lS(n,t);if(r)return r}return null}function cS(n,e){if(n===e.value)return[e];for(const t of e.children){const r=cS(n,t);if(r.length)return r.unshift(e),r}return[]}class kl{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ny(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class YM extends ZM{constructor(e,t){super(e),this.snapshot=t,dS(this,e)}toString(){return this.snapshot.toString()}}function QM(n,e){const t=function xO(n,e){const c=new SD([],{},{},"",{},ln,e,null,n.root,-1,{});return new XM("",new kl(c,[]))}(n,e),r=new ua([new R0("",{})]),o=new ua({}),u=new ua({}),c=new ua({}),m=new ua(""),w=new cp(r,o,c,m,u,ln,e,t.root);return w.snapshot=t.root,new YM(new kl(w,[]),t)}class cp{constructor(e,t,r,o,u,c,m,w){var D,T;this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=c,this.component=m,this.title=null!==(T=null===(D=this.data)||void 0===D?void 0:D.pipe((0,At.U)(A=>A[x0])))&&void 0!==T?T:ht(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,At.U)(e=>Xm(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,At.U)(e=>Xm(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function JM(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function RO(n){return n.reduce((e,t)=>{var r;return{params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign(Object.assign(Object.assign({},t.data),e.resolve),null===(r=t.routeConfig)||void 0===r?void 0:r.data),t._resolvedData)}},{params:{},data:{},resolve:{}})}(t.slice(r))}class SD{constructor(e,t,r,o,u,c,m,w,D,T,A,L){var G;this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=c,this.component=m,this.title=null===(G=this.data)||void 0===G?void 0:G[x0],this.routeConfig=w,this._urlSegment=D,this._lastPathIndex=T,this._correctedLastPathIndex=null!=L?L:T,this._resolve=A}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Xm(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xm(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class XM extends ZM{constructor(e,t){super(t),this.url=e,dS(this,t)}toString(){return ex(this._root)}}function dS(n,e){e.value._routerState=n,e.children.forEach(t=>dS(n,t))}function ex(n){const e=n.children.length>0?` { ${n.children.map(ex).join(", ")} } `:"";return`${n.value}${e}`}function hS(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,gu(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),gu(e.params,t.params)||n.params.next(t.params),function qN(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!gu(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),gu(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function fS(n,e){const t=gu(n.params,e.params)&&function JN(n,e){return ap(n,e)&&n.every((t,r)=>gu(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||fS(n.parent,e.parent))}function F0(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function OO(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return F0(n,r,o);return F0(n,r)})}(n,e,t);return new kl(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const c=u.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(m=>F0(n,m)),c}}const r=function PO(n){return new cp(new ua(n.url),new ua(n.params),new ua(n.queryParams),new ua(n.fragment),new ua(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>F0(n,u));return new kl(r,o)}}const pS="ngNavigationCancelingError";function tx(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=up(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=nx(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function nx(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[pS]=!0,r.cancellationCode=e,t&&(r.url=t),r}function rx(n){return ix(n)&&up(n.url)}function ix(n){return n&&n[pS]}class kO{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new L0,this.attachRef=null}}let L0=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new kO,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const AD=!1;let sx=(()=>{class n{constructor(t,r,o,u,c){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=o||ln,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){var t;(null===(t=this.parentContexts.getContext(this.name))||void 0===t?void 0:t.outlet)===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,AD);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,AD);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,AD);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new g.vHH(4013,AD);this._activatedRoute=t;const o=this.location,c=t._futureSnapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new FO(t,m,o.injector);if(r&&function LO(n){return!!n.resolveComponentFactory}(r)){const D=r.resolveComponentFactory(c);this.activated=o.createComponent(D,o.length,w)}else this.activated=o.createComponent(c,{index:o.length,injector:w,environmentInjector:null!=r?r:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(L0),g.Y36(g.s_b),g.$8M("name"),g.Y36(g.sBO),g.Y36(g.lqb))},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class FO{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===cp?this.route:e===L0?this.childContexts:this.parent.get(e,t)}}let MD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},dependencies:[sx],encapsulation:2}),n})();function ox(n,e){var t;return n.providers&&!n._injector&&(n._injector=(0,g.MMx)(n.providers,e,`Route: ${n.path}`)),null!==(t=n._injector)&&void 0!==t?t:e}function mS(n){const e=n.children&&n.children.map(mS),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ln&&(t.component=MD),t}function wo(n){return n.outlet||ln}function ax(n,e){const t=n.filter(r=>wo(r)===e);return t.push(...n.filter(r=>wo(r)!==e)),t}function V0(n){var e;if(!n)return null;if(null!==(e=n.routeConfig)&&void 0!==e&&e._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){const r=t.routeConfig;if(null!=r&&r._loadedInjector)return r._loadedInjector;if(null!=r&&r._injector)return r._injector}return null}class $O{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),hS(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=ny(t);e.children.forEach(u=>{const c=u.value.outlet;this.deactivateRoutes(u,o[c],r),delete o[c]}),Ci(o,(u,c)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const c=r.getContext(o.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=ny(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],o);if(r&&r.outlet){const c=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=ny(e);for(const c of Object.keys(u))this.deactivateRouteAndItsChildren(u[c],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=ny(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new qM(u.value.snapshot))}),e.children.length&&this.forwardEvent(new SO(e.value.snapshot))}activateRoutes(e,t,r){var o;const u=e.value,c=t?t.value:null;if(hS(u),u===c)if(u.component){const m=r.getOrCreateContext(u.outlet);this.activateChildRoutes(e,t,m.children)}else this.activateChildRoutes(e,t,r);else if(u.component){const m=r.getOrCreateContext(u.outlet);if(this.routeReuseStrategy.shouldAttach(u.snapshot)){const w=this.routeReuseStrategy.retrieve(u.snapshot);this.routeReuseStrategy.store(u.snapshot,null),m.children.onOutletReAttached(w.contexts),m.attachRef=w.componentRef,m.route=w.route.value,m.outlet&&m.outlet.attach(w.componentRef,w.route.value),hS(w.route.value),this.activateChildRoutes(e,null,m.children)}else{const w=V0(u.snapshot),D=null!==(o=null==w?void 0:w.get(g._Vd))&&void 0!==o?o:null;m.attachRef=null,m.route=u,m.resolver=D,m.injector=w,m.outlet&&m.outlet.activateWith(u,m.injector),this.activateChildRoutes(e,null,m.children)}}else this.activateChildRoutes(e,null,r)}}class ux{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class xD{constructor(e,t){this.component=e,this.route=t}}function HO(n,e,t){const r=n._root;return U0(r,e?e._root:null,t,[r.value])}function ry(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,g.Z0I)(n)?e.get(n):n:r}function U0(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=ny(e);return n.children.forEach(c=>{(function zO(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,c=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(c&&u.routeConfig===c.routeConfig){const w=function WO(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ap(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ap(n.url,e.url)||!gu(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fS(n,e)||!gu(n.queryParams,e.queryParams);default:return!fS(n,e)}}(c,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new ux(r)):(u.data=c.data,u._resolvedData=c._resolvedData),U0(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new xD(m.outlet.component,c))}else c&&B0(e,m,o),o.canActivateChecks.push(new ux(r)),U0(n,null,u.component?m?m.children:null:t,r,o)})(c,u[c.value.outlet],t,r.concat([c.value]),o),delete u[c.value.outlet]}),Ci(u,(c,m)=>B0(c,t.getContext(m),o)),o}function B0(n,e,t){const r=ny(n),o=n.value;Ci(r,(u,c)=>{B0(u,o.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new xD(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function j0(n){return"function"==typeof n}function yS(n){return n instanceof dD||"EmptyError"===(null==n?void 0:n.name)}const RD=Symbol("INITIAL_VALUE");function iy(){return Cr(n=>IM(n.map(e=>e.pipe(b0(1),Oh(RD)))).pipe((0,At.U)(e=>{for(const t of e)if(!0!==t){if(t===RD)return RD;if(!1===t||t instanceof op)return t}return!0}),wi(e=>e!==RD),b0(1)))}function lx(n){return(0,$N.z)((0,ji.b)(e=>{if(up(e))throw tx(0,e)}),(0,At.U)(e=>!0===e))}const vS={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function cx(n,e,t,r,o){const u=_S(n,e,t);return u.matched?function lP(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?ht(o.map(c=>{const m=ry(c,n);return kd(function JO(n){return n&&j0(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(iy(),lx()):ht(!0)}(r=ox(e,r),e,t).pipe((0,At.U)(c=>!0===c?u:Object.assign({},vS))):ht(u)}function _S(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},vS):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||WN)(t,n,e);if(!u)return Object.assign({},vS);const c={};Ci(u.posParams,(w,D)=>{c[D]=w.path});const m=u.consumed.length>0?Object.assign(Object.assign({},c),u.consumed[u.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function ND(n,e,t,r,o="corrected"){if(t.length>0&&function hP(n,e,t){return t.some(r=>OD(n,e,r)&&wo(r)!==ln)}(n,t,r)){const c=new dn(e,function dP(n,e,t,r){const o={};o[ln]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&wo(u)!==ln){const c=new dn([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,o[wo(u)]=c}return o}(n,e,r,new dn(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function fP(n,e,t){return t.some(r=>OD(n,e,r))}(n,t,r)){const c=new dn(n.segments,function cP(n,e,t,r,o,u){const c={};for(const m of r)if(OD(n,t,m)&&!o[wo(m)]){const w=new dn([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,c[wo(m)]=w}return Object.assign(Object.assign({},o),c)}(n,e,t,r,n.children,o));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const u=new dn(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function OD(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function dx(n,e,t,r){return!!(wo(n)===r||r!==ln&&OD(e,t,n))&&("**"===n.path||_S(e,n,t).matched)}function hx(n,e,t){return 0===e.length&&!n.children[t]}const PD=!1;class kD{constructor(e){this.segmentGroup=e||null}}class fx{constructor(e){this.urlTree=e}}function $0(n){return M0(new kD(n))}function px(n){return M0(new fx(n))}class yP{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=ND(this.urlTree.root,[],[],this.config).segmentGroup,t=new dn(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,ln).pipe((0,At.U)(u=>this.createUrlTree(CD(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Pd(u=>{if(u instanceof fx)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof kD?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,ln).pipe((0,At.U)(o=>this.createUrlTree(CD(o),e.queryParams,e.fragment))).pipe(Pd(o=>{throw o instanceof kD?this.noMatchError(o):o}))}noMatchError(e){return new g.vHH(4002,PD)}createUrlTree(e,t,r){const o=iS(e);return new op(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,At.U)(u=>new dn([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,wn.D)(o).pipe(sp(u=>{const c=r.children[u],m=ax(t,u);return this.expandSegmentGroup(e,m,c,u).pipe((0,At.U)(w=>({segment:w,outlet:u})))}),Ph((u,c)=>(u[c.outlet]=c.segment,u),{}),SM())}expandSegment(e,t,r,o,u,c){return(0,wn.D)(r).pipe(sp(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,c).pipe(Pd(D=>{if(D instanceof kD)return ht(null);throw D}))),Ol(m=>!!m),Pd((m,w)=>{if(yS(m))return hx(t,o,u)?ht(new dn([],{})):$0(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,c,m){return dx(o,t,u,c)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,c):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c):$0(t):$0(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?px(u):this.lineralizeSegments(r,u).pipe((0,Bi.z)(c=>{const m=new dn(c,{});return this.expandSegment(e,m,t,c,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,c){const{matched:m,consumedSegments:w,remainingSegments:D,positionalParamSegments:T}=_S(t,o,u);if(!m)return $0(t);const A=this.applyRedirectCommands(w,o.redirectTo,T);return o.redirectTo.startsWith("/")?px(A):this.lineralizeSegments(o,A).pipe((0,Bi.z)(L=>this.expandSegment(e,t,r,L.concat(D),c,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=ox(r,e),r.loadChildren?(r._loadedRoutes?ht({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,At.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new dn(o,{})))):ht(new dn(o,{}))):cx(t,r,o,e).pipe(Cr(({matched:c,consumedSegments:m,remainingSegments:w})=>{var D;return c?(e=null!==(D=r._injector)&&void 0!==D?D:e,this.getChildConfig(e,r,o).pipe((0,Bi.z)(A=>{var L;const G=null!==(L=A.injector)&&void 0!==L?L:e,X=A.routes,{segmentGroup:Se,slicedSegments:Me}=ND(t,m,w,X),mt=new dn(Se.segments,Se.children);if(0===Me.length&&mt.hasChildren())return this.expandChildren(G,X,mt).pipe((0,At.U)($t=>new dn(m,$t)));if(0===X.length&&0===Me.length)return ht(new dn(m,{}));const Rt=wo(r)===u;return this.expandSegment(G,mt,X,Me,Rt?ln:u,!0).pipe((0,At.U)(Tt=>new dn(m.concat(Tt.segments),Tt.children)))}))):$0(t)}))}getChildConfig(e,t,r){return t.children?ht({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ht({routes:t._loadedRoutes,injector:t._loadedInjector}):function uP(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?ht(!0):ht(o.map(c=>{const m=ry(c,n);return kd(function KO(n){return n&&j0(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(iy(),lx())}(e,t,r).pipe((0,Bi.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,ji.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function gP(n){return M0(nx(PD,3))}())):ht({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return ht(r);if(o.numberOfChildren>1||!o.children[ln])return M0(new g.vHH(4e3,PD));o=o.children[ln]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new op(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Ci(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let c={};return Ci(t.children,(m,w)=>{c[w]=this.createSegmentGroup(e,m,r,o)}),new dn(u,c)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new g.vHH(4001,PD);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class _P{}class IP{constructor(e,t,r,o,u,c,m,w){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=c,this.relativeLinkResolution=m,this.urlSerializer=w}recognize(){const e=ND(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,ln).pipe((0,At.U)(t=>{if(null===t)return null;const r=new SD([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ln,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new kl(r,t),u=new XM(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=JM(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,wn.D)(Object.keys(r.children)).pipe(sp(o=>{const u=r.children[o],c=ax(t,o);return this.processSegmentGroup(e,c,u,o)}),Ph((o,u)=>o&&u?(o.push(...u),o):null),function HN(n,e=!1){return(0,ui.e)((t,r)=>{let o=0;t.subscribe((0,wr.x)(r,u=>{const c=n(u,o++);(c||e)&&r.next(u),!c&&r.complete()}))})}(o=>null!==o),hD(null),SM(),(0,At.U)(o=>{if(null===o)return null;const u=gx(o);return function DP(n){n.sort((e,t)=>e.value.outlet===ln?-1:t.value.outlet===ln?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,wn.D)(t).pipe(sp(c=>{var m;return this.processSegmentAgainstRoute(null!==(m=c._injector)&&void 0!==m?m:e,c,r,o,u)}),Ol(c=>!!c),Pd(c=>{if(yS(c))return hx(r,o,u)?ht([]):ht(null);throw c}))}processSegmentAgainstRoute(e,t,r,o,u){var c,m;if(t.redirectTo||!dx(t,r,o,u))return ht(null);let w;if("**"===t.path){const D=o.length>0?xM(o).parameters:{},T=yx(r)+o.length;w=ht({snapshot:new SD(o,D,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,_x(t),wo(t),null!==(m=null!==(c=t.component)&&void 0!==c?c:t._loadedComponent)&&void 0!==m?m:null,t,mx(r),T,wx(t),T),consumedSegments:[],remainingSegments:[]})}else w=cx(r,t,o,e).pipe((0,At.U)(({matched:D,consumedSegments:T,remainingSegments:A,parameters:L})=>{var G,X;if(!D)return null;const Se=yx(r)+T.length;return{snapshot:new SD(T,L,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,_x(t),wo(t),null!==(X=null!==(G=t.component)&&void 0!==G?G:t._loadedComponent)&&void 0!==X?X:null,t,mx(r),Se,wx(t),Se),consumedSegments:T,remainingSegments:A}}));return w.pipe(Cr(D=>{var T,A;if(null===D)return ht(null);const{snapshot:L,consumedSegments:G,remainingSegments:X}=D;e=null!==(T=t._injector)&&void 0!==T?T:e;const Se=null!==(A=t._loadedInjector)&&void 0!==A?A:e,Me=function bP(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:mt,slicedSegments:Rt}=ND(r,G,X,Me.filter(Tt=>void 0===Tt.redirectTo),this.relativeLinkResolution);if(0===Rt.length&&mt.hasChildren())return this.processChildren(Se,Me,mt).pipe((0,At.U)(Tt=>null===Tt?null:[new kl(L,Tt)]));if(0===Me.length&&0===Rt.length)return ht([new kl(L,[])]);const Gt=wo(t)===u;return this.processSegment(Se,Me,mt,Rt,Gt?ln:u).pipe((0,At.U)(Tt=>null===Tt?null:[new kl(L,Tt)]))}))}}function CP(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function gx(n){const e=[],t=new Set;for(const r of n){if(!CP(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=gx(r.children);e.push(new kl(r.value,o))}return e.filter(r=>!t.has(r))}function mx(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function yx(n){var e,t;let r=n,o=null!==(e=r._segmentIndexShift)&&void 0!==e?e:0;for(;r._sourceSegment;)r=r._sourceSegment,o+=null!==(t=r._segmentIndexShift)&&void 0!==t?t:0;return o-1}function _x(n){return n.data||{}}function wx(n){return n.resolve||{}}function Ex(n){return"string"==typeof n.title||null===n.title}function wS(n){return Cr(e=>{const t=n(e);return t?(0,wn.D)(t).pipe((0,At.U)(()=>e)):ht(e)})}let Ix=(()=>{class n{buildTitle(t){var r;let o,u=t.root;for(;void 0!==u;)o=null!==(r=this.getResolvedTitleForRoute(u))&&void 0!==r?r:o,u=u.children.find(c=>c.outlet===ln);return o}getResolvedTitleForRoute(t){return t.data[x0]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(Dx)},providedIn:"root"}),n})(),Dx=(()=>{class n extends Ix{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Js))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class OP{}class kP extends class PP{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const LD=new g.OlP("",{providedIn:"root",factory:()=>({})}),ES=new g.OlP("ROUTES");let IS=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ht(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=kd(t.loadComponent()).pipe((0,ji.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),eS(()=>{this.componentLoaders.delete(t)})),o=new TM(r,()=>new pu.x).pipe(JT());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ht({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,At.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,D,T=!1;Array.isArray(m)?D=m:(w=m.create(t).injector,D=MM(w.get(ES,[],g.XFs.Self|g.XFs.Optional)));return{routes:D.map(mS),injector:w}}),eS(()=>{this.childrenLoaders.delete(r)})),c=new TM(u,()=>new pu.x).pipe(JT());return this.childrenLoaders.set(r,c),c}loadModuleFactoryOrRoutes(t){return kd(t()).pipe((0,Bi.z)(r=>r instanceof g.YKP||Array.isArray(r)?ht(r):(0,wn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3),g.LFG(g.Sil))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class LP{}class VP{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function UP(n){throw n}function BP(n,e,t){return e.parse("/")}const jP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$P={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Cx(){var n,e;const t=(0,g.f3M)(FM),r=(0,g.f3M)(L0),o=(0,g.f3M)(xe),u=(0,g.f3M)(g.zs3),c=(0,g.f3M)(g.Sil),m=null!==(n=(0,g.f3M)(ES,{optional:!0}))&&void 0!==n?n:[],w=null!==(e=(0,g.f3M)(LD,{optional:!0}))&&void 0!==e?e:{},D=(0,g.f3M)(Dx),T=(0,g.f3M)(Ix,{optional:!0}),A=(0,g.f3M)(LP,{optional:!0}),L=(0,g.f3M)(OP,{optional:!0}),G=new fi(null,t,r,o,u,c,MM(m));return A&&(G.urlHandlingStrategy=A),L&&(G.routeReuseStrategy=L),G.titleStrategy=null!=T?T:D,function HP(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(w,G),G}let fi=(()=>{class n{constructor(t,r,o,u,c,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new pu.x,this.errorHandler=UP,this.malformedUriErrorHandler=BP,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ht(void 0),this.urlHandlingStrategy=new VP,this.routeReuseStrategy=new kP,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=c.get(IS),this.configLoader.onLoadEndListener=L=>this.triggerEvent(new CO(L)),this.configLoader.onLoadStartListener=L=>this.triggerEvent(new bO(L)),this.ngModule=c.get(g.h0i),this.console=c.get(g.c2e);const A=c.get(g.R0b);this.isNgZoneEnabled=A instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function KN(){return new op(new dn([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=QM(this.currentUrlTree,this.rootComponentType),this.transitions=new ua({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(wi(o=>0!==o.id),(0,At.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Cr(o=>{let u=!1,c=!1;return ht(o).pipe((0,ji.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.rawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Cr(m=>{const w=this.browserUrlTree.toString(),D=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||D)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return Tx(m.source)&&(this.browserUrlTree=m.extractedUrl),ht(m).pipe(Cr(A=>{const L=this.transitions.getValue();return r.next(new uS(A.id,this.serializeUrl(A.extractedUrl),A.source,A.restoredState)),L!==this.transitions.getValue()?Od.E:Promise.resolve(A)}),function vP(n,e,t,r){return Cr(o=>function mP(n,e,t,r,o){return new yP(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,At.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ji.b)(A=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:A.urlAfterRedirects}),o.urlAfterRedirects=A.urlAfterRedirects}),function SP(n,e,t,r,o,u){return(0,Bi.z)(c=>function EP(n,e,t,r,o,u,c="emptyOnly",m="legacy"){return new IP(n,e,t,r,o,c,m,u).recognize().pipe(Cr(w=>null===w?function wP(n){return new Br.y(e=>e.error(n))}(new _P):ht(w)))}(n,e,t,c.urlAfterRedirects,r.serialize(c.urlAfterRedirects),r,o,u).pipe((0,At.U)(m=>Object.assign(Object.assign({},c),{targetSnapshot:m}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ji.b)(A=>{if(o.targetSnapshot=A.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!A.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);this.setBrowserUrl(G,A)}this.browserUrlTree=A.urlAfterRedirects}const L=new _O(A.id,this.serializeUrl(A.extractedUrl),this.serializeUrl(A.urlAfterRedirects),A.targetSnapshot);r.next(L)}));if(D&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:G,source:X,restoredState:Se,extras:Me}=m,mt=new uS(L,this.serializeUrl(G),X,Se);r.next(mt);const Rt=QM(G,this.rootComponentType).snapshot;return ht(o=Object.assign(Object.assign({},m),{targetSnapshot:Rt,urlAfterRedirects:G,extras:Object.assign(Object.assign({},Me),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),Od.E}),(0,ji.b)(m=>{const w=new wO(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,At.U)(m=>o=Object.assign(Object.assign({},m),{guards:HO(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function eP(n,e){return(0,Bi.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:c}}=t;return 0===c.length&&0===u.length?ht(Object.assign(Object.assign({},t),{guardsResult:!0})):function tP(n,e,t,r){return(0,wn.D)(n).pipe((0,Bi.z)(o=>function aP(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?ht(u.map(m=>{var w;const D=null!==(w=V0(e))&&void 0!==w?w:o,T=ry(m,D);return kd(function QO(n){return n&&j0(n.canDeactivate)}(T)?T.canDeactivate(n,e,t,r):D.runInContext(()=>T(n,e,t,r))).pipe(Ol())})).pipe(iy()):ht(!0)}(o.component,o.route,t,e,r)),Ol(o=>!0!==o,!0))}(c,r,o,n).pipe((0,Bi.z)(m=>m&&function qO(n){return"boolean"==typeof n}(m)?function nP(n,e,t,r){return(0,wn.D)(e).pipe(sp(o=>tl(function iP(n,e){return null!==n&&e&&e(new TO(n)),ht(!0)}(o.route.parent,r),function rP(n,e){return null!==n&&e&&e(new AO(n)),ht(!0)}(o.route,r),function oP(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(c=>function GO(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>bM(()=>ht(c.guards.map(w=>{var D;const T=null!==(D=V0(c.node))&&void 0!==D?D:t,A=ry(w,T);return kd(function YO(n){return n&&j0(n.canActivateChild)}(A)?A.canActivateChild(r,n):T.runInContext(()=>A(r,n))).pipe(Ol())})).pipe(iy())));return ht(u).pipe(iy())}(n,o.path,t),function sP(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ht(!0);const o=r.map(u=>bM(()=>{var c;const m=null!==(c=V0(e))&&void 0!==c?c:t,w=ry(u,m);return kd(function ZO(n){return n&&j0(n.canActivate)}(w)?w.canActivate(e,n):m.runInContext(()=>w(e,n))).pipe(Ol())}));return ht(o).pipe(iy())}(n,o.route,t))),Ol(o=>!0!==o,!0))}(r,u,n,e):ht(m)),(0,At.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,ji.b)(m=>{if(o.guardsResult=m.guardsResult,up(m.guardsResult))throw tx(0,m.guardsResult);const w=new EO(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),wi(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,"",3),!1)),wS(m=>{if(m.guards.canActivateChecks.length)return ht(m).pipe((0,ji.b)(w=>{const D=new IO(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(D)}),Cr(w=>{let D=!1;return ht(w).pipe(function AP(n,e){return(0,Bi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return ht(t);let u=0;return(0,wn.D)(o).pipe(sp(c=>function MP(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==(null==o?void 0:o.title)&&!Ex(o)&&(u[x0]=o.title),function xP(n,e,t,r){const o=function RP(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return ht({});const u={};return(0,wn.D)(o).pipe((0,Bi.z)(c=>function NP(n,e,t,r){var o;const u=null!==(o=V0(e))&&void 0!==o?o:r,c=ry(n,u);return kd(c.resolve?c.resolve(e,t):u.runInContext(()=>c(e,t)))}(n[c],e,t,r).pipe(Ol(),(0,ji.b)(m=>{u[c]=m}))),XT(1),function GN(n){return(0,At.U)(()=>n)}(u),Pd(c=>yS(c)?Od.E:M0(c)))}(u,n,e,r).pipe((0,At.U)(c=>(n._resolvedData=c,n.data=JM(n,t).resolve,o&&Ex(o)&&(n.data[x0]=o.title),null)))}(c.route,r,n,e)),(0,ji.b)(()=>u++),XT(1),(0,Bi.z)(c=>u===o.length?ht(t):Od.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ji.b)({next:()=>D=!0,complete:()=>{D||(this.restoreHistory(w),this.cancelNavigationTransition(w,"",2))}}))}),(0,ji.b)(w=>{const D=new DO(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(D)}))}),wS(m=>{const w=D=>{var T;const A=[];(null===(T=D.routeConfig)||void 0===T?void 0:T.loadComponent)&&!D.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(D.routeConfig).pipe((0,ji.b)(L=>{D.component=L}),(0,At.U)(()=>{})));for(const L of D.children)A.push(...w(L));return A};return IM(w(m.targetSnapshot.root)).pipe(hD(),b0(1))}),wS(()=>this.afterPreactivation()),(0,At.U)(m=>{const w=function NO(n,e,t){const r=F0(n,e._root,t?t._root:void 0);return new YM(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return o=Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,ji.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,At.U)(r=>(new $O(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,ji.b)({next(){u=!0},complete(){u=!0}}),eS(()=>{var m;u||c||this.cancelNavigationTransition(o,"",1),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),Pd(m=>{var w;if(c=!0,ix(m)){rx(m)||(this.navigated=!0,this.restoreHistory(o,!0));const D=new TD(o.id,this.serializeUrl(o.extractedUrl),m.message,m.cancellationCode);if(r.next(D),rx(m)){const T=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),A={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Tx(o.source)};this.scheduleNavigation(T,"imperative",null,A,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const D=new WM(o.id,this.serializeUrl(o.extractedUrl),m,null!==(w=o.targetSnapshot)&&void 0!==w?w:void 0);r.next(D);try{o.resolve(this.errorHandler(m))}catch(T){o.reject(T)}}return Od.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},c=null!==(o=t.state)&&void 0!==o&&o.navigationId?t.state:null;if(c){const w=Object.assign({},c);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,c,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(mS),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:c,queryParamsHandling:m,preserveFragment:w}=r,D=o||this.routerState.root,T=w?this.currentUrlTree.fragment:c;let A=null;switch(m){case"merge":A=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=u||null}return null!==A&&(A=this.removeEmptyProps(A)),fO(D,this.currentUrlTree,t,A,null!=T?T:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=up(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function GP(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new g.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},jP):!1===r?Object.assign({},$P):r,up(t))return NM(this.currentUrlTree,t,o);const u=this.parseUrl(t);return NM(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{var r;this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new lp(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,null===(r=this.titleStrategy)||void 0===r||r.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,c){var m,w;if(this.disposed)return Promise.resolve(!1);let D,T,A;c?(D=c.resolve,T=c.reject,A=c.promise):A=new Promise((X,Se)=>{D=X,T=Se});const L=++this.navigationId;let G;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),G=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):G=0,this.setTransition({id:L,targetPageId:G,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:D,reject:T,promise:A,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),A.catch(X=>Promise.reject(X))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===c?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,o){const u=new TD(t.id,this.serializeUrl(t.extractedUrl),r,o);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:function(){return Cx()},providedIn:"root"}),n})();function Tx(n){return"imperative"!==n}class Sx{}let qP=(()=>{class n{constructor(t,r,o,u,c){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=c}setUpPreloading(){this.subscription=this.router.events.pipe(wi(t=>t instanceof lp),sp(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){var o,u,c;const m=[];for(const w of r){w.providers&&!w._injector&&(w._injector=(0,g.MMx)(w.providers,t,`Route: ${w.path}`));const D=null!==(o=w._injector)&&void 0!==o?o:t,T=null!==(u=w._loadedInjector)&&void 0!==u?u:D;w.loadChildren&&!w._loadedRoutes&&void 0===w.canLoad||w.loadComponent&&!w._loadedComponent?m.push(this.preloadConfig(D,w)):(w.children||w._loadedRoutes)&&m.push(this.processRoutes(T,null!==(c=w.children)&&void 0!==c?c:w._loadedRoutes))}return(0,wn.D)(m).pipe((0,Nh.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ht(null);const u=o.pipe((0,Bi.z)(c=>{var m;return null===c?ht(void 0):(r._loadedRoutes=c.routes,r._loadedInjector=c.injector,this.processRoutes(null!==(m=c.injector)&&void 0!==m?m:t,c.routes))}));if(r.loadComponent&&!r._loadedComponent){const c=this.loader.loadComponent(r);return(0,wn.D)([u,c]).pipe((0,Nh.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(fi),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(Sx),g.LFG(IS))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const CS=new g.OlP("");let Ax=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof uS?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof lp&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof KM&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new KM(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();function sy(n,e){return{\u0275kind:n,\u0275providers:e}}function TS(n){return[{provide:ES,multi:!0,useValue:n}]}function xx(){const n=(0,g.f3M)(g.zs3);return e=>{var t,r;const o=n.get(g.z2F);if(e!==o.components[0])return;const u=n.get(fi),c=n.get(Rx);1===n.get(SS)&&u.initialNavigation(),null===(t=n.get(Nx,null,g.XFs.Optional))||void 0===t||t.setUpPreloading(),null===(r=n.get(CS,null,g.XFs.Optional))||void 0===r||r.init(),u.resetRootComponentType(o.componentTypes[0]),c.closed||(c.next(),c.unsubscribe())}}const Rx=new g.OlP("",{factory:()=>new pu.x}),SS=new g.OlP("",{providedIn:"root",factory:()=>1});const Nx=new g.OlP("");function QP(n){return sy(0,[{provide:Nx,useExisting:qP},{provide:Sx,useExisting:n}])}const Ox=new g.OlP("ROUTER_FORROOT_GUARD"),JP=[xe,{provide:FM,useClass:nS},{provide:fi,useFactory:Cx},L0,{provide:cp,useFactory:function Mx(n){return n.routerState.root},deps:[fi]},IS];function XP(){return new g.PXZ("Router",fi)}let Px=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[JP,[],TS(t),{provide:Ox,useFactory:rk,deps:[[fi,new g.FiY,new g.tp0]]},{provide:LD,useValue:r||{}},null!=r&&r.useHash?{provide:me,useClass:nt}:{provide:me,useClass:ot},{provide:CS,useFactory:()=>{const n=(0,g.f3M)(fi),e=(0,g.f3M)(ga),t=(0,g.f3M)(LD);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ax(n,e,t)}},null!=r&&r.preloadingStrategy?QP(r.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:XP},null!=r&&r.initialNavigation?ik(r):[],[{provide:kx,useFactory:xx},{provide:g.tb,multi:!0,useExisting:kx}]]}}static forChild(t){return{ngModule:n,providers:[TS(t)]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ox,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[MD]}),n})();function rk(n){return"guarded"}function ik(n){return["disabled"===n.initialNavigation?sy(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const e=(0,g.f3M)(fi);return()=>{e.setUpLocationChangeListener()}}},{provide:SS,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?sy(2,[{provide:SS,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:e=>{const t=e.get(j,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const c=e.get(fi),m=e.get(Rx);(function o(u){e.get(fi).events.pipe(wi(m=>m instanceof lp||m instanceof TD||m instanceof WM),(0,At.U)(m=>m instanceof lp||m instanceof TD&&(0===m.code||1===m.code)&&null),wi(m=>null!==m),b0(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),c.afterPreactivation=()=>(u(!0),r||m.closed?ht(void 0):m),c.initialNavigation()}))}}]).\u0275providers:[]]}const kx=new g.OlP("");const Lx="firebase_screen_id",MS="outlet",H0="screen_class",Vx="screen_name";let vk=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const xS={},_k=n=>{const e=[n[H0],n[MS]].join("#");if(xS.hasOwnProperty(e))return xS[e];{const t=vk++;return xS[e]=t,t}},Ck=new g.OlP("angularfire2.analytics.analyticsCollectionEnabled"),Tk=new g.OlP("angularfire2.analytics.appVersion"),Sk=new g.OlP("angularfire2.analytics.appName"),Ak=new g.OlP("angularfire2.analytics.debugMode"),Mk=new g.OlP("angularfire2.analytics.config"),jD="dataLayer";let G0=(()=>{class n{constructor(t,r,o,u,c,m,w,D,T){if(this.analyticsInitialized=new Promise(()=>{}),function Io(n){return n===Gs}(w)){window[jD]=window[jD]||[];const L=(...Se)=>"config"===Se[0]&&"firebase"===Se[2].origin&&(this.measurementId=Se[1],!0),G=Se=>{window.gtag=(...Me)=>{Se&&Se(...Me),"event"===Me[0]&&Me[2].send_to===this.measurementId&&(u&&(Me[2].app_name=u),o&&(Me[2].app_version=o)),c&&"undefined"!=typeof console&&console.info(...Me),function(...mt){window[jD].push(arguments)}(...Me)}};window[jD].some(L)?(this.analyticsInitialized=Promise.resolve(),G()):this.analyticsInitialized=new Promise(Se=>{G((...Me)=>{L(...Me)&&Se()})}),m&&this.updateConfig(m),c&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const A=ht(void 0).pipe((0,D0.Q)(T.outsideAngular),Cr(UN.Gb),Cr(L=>L?D.runOutsideAngular(()=>N.e(643).then(N.bind(N,8643))):Od.E),(0,At.U)(()=>(0,Ir.cc)("analytics","AngularFireAnalytics",t.name,()=>{const L=t.analytics();return!1===r&&L.setAnalyticsCollectionEnabled(!1),L},[t,r,m,c])),ST({bufferSize:1,refCount:!1}));return(0,Ir.pX)(this,A,D)}updateConfig(t){return(0,EM.mG)(this,void 0,void 0,function*(){yield this.analyticsInitialized,window.gtag("config",this.measurementId,Object.assign(Object.assign({},t),{update:!0}))})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ir.Ot),g.LFG(Ck,8),g.LFG(Tk,8),g.LFG(Sk,8),g.LFG(Ak,8),g.LFG(Mk,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Sn.HU))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Bx=(()=>{class n{constructor(t,r,o,u){if(this.disposables=[],ip.Z.registerVersion("angularfire",Sn.q4.full,"compat-user-tracking"),Mr(r))this.initialized=Promise.resolve();else{let c;this.initialized=u.runOutsideAngular(()=>new Promise(m=>c=m)),this.disposables=[o.authState.subscribe(m=>{t.setUserId(null==m?void 0:m.uid),c()}),o.credential.subscribe(m=>{if(m){const w=m.user.isAnonymous?"anonymous":m.additionalUserInfo.providerId;m.additionalUserInfo.isNewUser&&t.logEvent("sign_up",{method:w}),t.logEvent("login",{method:w})}})]}}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(G0),g.LFG(g.Lbi),g.LFG(A0),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Fk=(()=>{class n{constructor(t,r,o,u,c,m){if(ip.Z.registerVersion("angularfire",Sn.q4.full,"compat-screen-tracking"),!r||!t)return this;c.runOutsideAngular(()=>{this.disposable=((n,e,t)=>n.events.pipe(wi(o=>o instanceof qM)).pipe(Cr(o=>{var u;const m=(null===(u=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,G=>G.replace("://",":///"))).root.children[o.snapshot.outlet])||void 0===u?void 0:u.toString())||"",w=n.routerState.root.children.map(G=>G).find(G=>G.outlet===o.snapshot.outlet);if(!w)return ht(null);let D=w;for(;D.firstChild;)D=D.firstChild;const T=D.pathFromRoot.map(G=>{var X;return null===(X=G.routeConfig)||void 0===X?void 0:X.path}).filter(G=>G).join("/")||"/",A={[Vx]:T,page_path:`/${m}`,firebase_event_origin:"auto",firebase_screen:T,[MS]:o.snapshot.outlet};e&&(A.page_title=e.getTitle());let L=w.component;if(L){if(L===MD){let G=o.snapshot;for(;G.firstChild;)G=G.firstChild;L=G.component}}else L=o.snapshot.component;if("string"==typeof L)return ht(Object.assign(Object.assign({},A),{[H0]:L}));if(L){const G=t.resolveComponentFactory(L);return ht(Object.assign(Object.assign({},A),{[H0]:G.selector}))}return ht(null)}),wi(o=>!!o),(0,At.U)(o=>Object.assign({firebase_screen_class:o[H0],[Lx]:_k(o)},o)),function ok(n,e,t,r){return(0,ui.e)((o,u)=>{let c;e&&"function"!=typeof e?({duration:t,element:c,connector:r}=e):c=e;const m=new Map,w=X=>{m.forEach(X),X(u)},D=X=>w(Se=>Se.error(X));let T=0,A=!1;const L=new wr.Q(u,X=>{try{const Se=n(X);let Me=m.get(Se);if(!Me){m.set(Se,Me=r?r():new pu.x);const mt=function G(X,Se){const Me=new Br.y(mt=>{T++;const Rt=Se.subscribe(mt);return()=>{Rt.unsubscribe(),0==--T&&A&&L.unsubscribe()}});return Me.key=X,Me}(Se,Me);if(u.next(mt),t){const Rt=(0,wr.x)(Me,()=>{Me.complete(),null==Rt||Rt.unsubscribe()},void 0,void 0,()=>m.delete(Se));L.add((0,xi.Xf)(t(mt)).subscribe(Rt))}}Me.next(c?c(X):X)}catch(Se){D(Se)}},()=>w(X=>X.complete()),D,()=>m.clear(),()=>(A=!0,0===T));o.subscribe(L)})}(o=>o[MS]),(0,Bi.z)(o=>o.pipe(pw((u,c)=>JSON.stringify(u)===JSON.stringify(c)),Oh(void 0),qp(),(0,At.U)(([u,c])=>u?Object.assign({firebase_previous_class:u[H0],firebase_previous_screen:u[Vx],firebase_previous_id:u[Lx]},c):c)))))(r,o,u).pipe(Cr(w=>(0,EM.mG)(this,void 0,void 0,function*(){return m&&(yield m.initialized),yield t.logEvent("screen_view",w)}))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(G0),g.LFG(fi,8),g.LFG(Js,8),g.LFG(g._Vd),g.LFG(g.R0b),g.LFG(Bx,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Lk=(()=>{class n{constructor(t,r,o){ip.Z.registerVersion("angularfire",Sn.q4.full,"analytics-compat"),t.app.then(()=>{})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(G0),g.LFG(Fk,8),g.LFG(Bx,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[G0]}),n})();const jx_firebaseConfig={production:!0,apiKey:"AIzaSyDSJJhs9DeKx6Ex6egtF8z1ptKypb8kg7M",authDomain:"firechat-a9469.firebaseapp.com",projectId:"firechat-a9469",storageBucket:"firechat-a9469.appspot.com",messagingSenderId:"653791023517",appId:"1:653791023517:web:ce824a1cecc2ae1c4e5f74"},Vk=[];let Uk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[Px.forRoot(Vk),Px]}),n})(),NS=(()=>{class n{constructor(t,r){this.afs=t,this.auth=r,this.chats=[],this.usuario={},this.auth.authState.subscribe(o=>{console.log("Estado del usuario",o),o&&(this.usuario.nombre=o.displayName,this.usuario.uid=o.uid)})}login(t){this.auth.signInWithPopup("google"===t?new ip.Z.auth.GoogleAuthProvider:new ip.Z.auth.GithubAuthProvider)}logout(){this.usuario={},this.auth.signOut()}cargarMensajes(){return this.itemsCollection=this.afs.collection("chats",t=>t.orderBy("fecha","desc").limit(5)),this.itemsCollection.valueChanges().pipe((0,At.U)(t=>{console.log(t),this.chats=[];for(let r of t)this.chats.unshift(r);return this.chats}))}agregarMensaje(t){let r={nombre:this.usuario.nombre,mensaje:t,fecha:(new Date).getTime(),uid:this.usuario.uid};return this.itemsCollection.add(r)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(wM),g.LFG(A0))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Bk=function(n){return{"text-right":n}},jk=function(n,e){return{"badge-primary":n,"badge-success":e}};function $k(n,e){if(1&n&&(g.TgZ(0,"div",3)(1,"span",4),g._uU(2),g.qZA(),g.TgZ(3,"p"),g._uU(4),g.qZA()()),2&n){const t=e.$implicit,r=g.oxw();g.Q6J("ngClass",g.VKq(4,Bk,r._cs.usuario.uid==t.uid)),g.xp6(1),g.Q6J("ngClass",g.WLB(6,jk,r._cs.usuario.uid==t.uid,r._cs.usuario.uid!=t.uid)),g.xp6(1),g.hij(" ",t.nombre," "),g.xp6(2),g.hij(" ",t.mensaje," ")}}let Hk=(()=>{class n{constructor(t){this._cs=t,this.mensaje="",this._cs.cargarMensajes().subscribe(()=>{setTimeout(()=>{this.elemento.scrollTop=this.elemento.scrollHeight},20)})}ngOnInit(){this.elemento=document.getElementById("app-mensajes")}enviar_mensaje(){console.log(this.mensaje),0!==this.mensaje.length&&this._cs.agregarMensaje(this.mensaje).then(()=>this.mensaje="").catch(t=>console.error("Error al enviar",t))}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(NS))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-chat"]],decls:6,vars:2,consts:[["id","app-mensajes",1,"app-mensajes"],[3,"ngClass",4,"ngFor","ngForOf"],["type","text","name","mensaje","placeholder","Enviar mensaje",1,"form-control",3,"ngModel","ngModelChange","keyup.enter"],[3,"ngClass"],[1,"badge",3,"ngClass"]],template:function(t,r){1&t&&(g.TgZ(0,"h1"),g._uU(1,"Chat"),g.qZA(),g._UZ(2,"hr"),g.TgZ(3,"div",0),g.YNc(4,$k,5,9,"div",1),g.qZA(),g.TgZ(5,"input",2),g.NdJ("ngModelChange",function(u){return r.mensaje=u})("keyup.enter",function(){return r.enviar_mensaje()}),g.qZA()),2&t&&(g.xp6(4),g.Q6J("ngForOf",r._cs.chats),g.xp6(1),g.Q6J("ngModel",r.mensaje))},dependencies:[gi,Hi,rc,xp,jp],encapsulation:2}),n})(),Gk=(()=>{class n{constructor(t){this._cs=t}ingresar(t){console.log(t),this._cs.login(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(NS))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-login"]],decls:8,vars:0,consts:[[1,"row"],[1,"col-md-12","text-center"],["type","button",1,"btn","btn-outline-primary",3,"click"],["type","button",1,"btn","btn-outline-dark",3,"click"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"div",1)(2,"p"),g._uU(3,"Ingrese con su cuenta favorita"),g.qZA(),g.TgZ(4,"button",2),g.NdJ("click",function(){return r.ingresar("google")}),g._uU(5," Google "),g.qZA(),g.TgZ(6,"button",3),g.NdJ("click",function(){return r.ingresar("github")}),g._uU(7," GitHub "),g.qZA()()())},encapsulation:2}),n})();function zk(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div",4)(1,"button",5),g.NdJ("click",function(){g.CHM(t);const o=g.oxw();return g.KtG(o._cs.logout())}),g._uU(2," Salir "),g.qZA()()}}function Wk(n,e){1&n&&g._UZ(0,"app-login")}function qk(n,e){1&n&&(g.TgZ(0,"div",6),g._UZ(1,"app-chat"),g.qZA())}let Kk=(()=>{class n{constructor(t){this._cs=t}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(NS))},n.\u0275cmp=g.Xpm({type:n,selectors:[["app-root"]],decls:6,vars:3,consts:[[1,"container","main-container"],["class","col-md-12 text-right",4,"ngIf"],[4,"ngIf"],["class","chat-window",4,"ngIf"],[1,"col-md-12","text-right"],[1,"btn","btn-outline-danger",3,"click"],[1,"chat-window"]],template:function(t,r){1&t&&(g.TgZ(0,"div",0)(1,"h1"),g._uU(2,"FireChat"),g.qZA(),g.YNc(3,zk,3,0,"div",1),g.YNc(4,Wk,1,0,"app-login",2),g.YNc(5,qk,2,0,"div",3),g.qZA()),2&t&&(g.xp6(3),g.Q6J("ngIf",r._cs.usuario.uid),g.xp6(1),g.Q6J("ngIf",!r._cs.usuario.uid),g.xp6(1),g.Q6J("ngIf",r._cs.usuario.uid))},dependencies:[Fl,Hk,Gk]}),n})(),Zk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n,bootstrap:[Kk]}),n.\u0275inj=g.cJS({imports:[Qd,Uk,Gy,Ir.hO.initializeApp(jx_firebaseConfig),VN,Lk,xN]}),n})();(0,g.G48)(),Jl().bootstrapModule(Zk).catch(n=>console.error(n))},7982:(tt,_e,N)=>{N.d(_e,{Gb:()=>g.Gb});var g=N(579)},5867:(tt,_e,N)=>{N.d(_e,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=N(9681);(0,g.registerVersion)("firebase","9.14.0","app")},127:(tt,_e,N)=>{N.d(_e,{Z:()=>g.Z});var g=N(3942);g.Z.registerVersion("firebase","9.14.0","app-compat")},1277:(tt,_e,N)=>{N.r(_e);var g=N(5861),Q=N(3942),k=N(2090),ne=N(9681),he=N(1877),pe=N(655),se=N(4859);const De=function Re(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ye=function Ie(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},me=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ot=new he.Yd("@firebase/auth");function nt(y,...h){ot.logLevel<=he.in.ERROR&&ot.error(`Auth (${ne.SDK_VERSION}): ${y}`,...h)}function xe(y,...h){throw Fe(y,...h)}function we(y,...h){return Fe(y,...h)}function Ce(y,h,p){const _=Object.assign(Object.assign({},Ye()),{[h]:p});return new k.LL("auth","Firebase",_).create(h,{appName:y.name})}function $e(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&xe(y,"argument-error"),Ce(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Fe(y,...h){if("string"!=typeof y){const p=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(p,..._)}return me.create(y,...h)}function U(y,h,...p){if(!y)throw Fe(h,...p)}function ye(y){const h="INTERNAL ASSERTION FAILED: "+y;throw nt(h),new Error(h)}function Z(y,h){y||ye(h)}const J=new Map;function re(y){Z(y instanceof Function,"Expected a class definition");let h=J.get(y);return h?(Z(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,J.set(y,h),h)}function Le(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function at(){return"http:"===Zt()||"https:"===Zt()}function Zt(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class sn{constructor(h,p){this.shortDelay=h,this.longDelay=p,Z(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function Nt(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(at()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Rn(y,h){Z(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class on{static initialize(h,p,_){this.fetchImpl=h,p&&(this.headersImpl=p),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Gn=new sn(3e4,6e4);function vt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function zt(y,h,p,_){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,g.Z)(function*(y,h,p,_,C={}){return pi(y,C,(0,g.Z)(function*(){let M={},q={};_&&("GET"===h?q=_:M={body:JSON.stringify(_)});const de=(0,k.xO)(Object.assign({key:y.config.apiKey},q)).slice(1),je=yield y._getAdditionalHeaders();return je["Content-Type"]="application/json",y.languageCode&&(je["X-Firebase-Locale"]=y.languageCode),on.fetch()(Yn(y,y.config.apiHost,p,de),Object.assign({method:h,headers:je,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function pi(y,h,p){return or.apply(this,arguments)}function or(){return(or=(0,g.Z)(function*(y,h,p){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},Xt),h);try{const C=new Lr(y),M=yield Promise.race([p(),C.promise]);C.clearNetworkTimeout();const q=yield M.json();if("needConfirmation"in q)throw Qn(y,"account-exists-with-different-credential",q);if(M.ok&&!("errorMessage"in q))return q;{const de=M.ok?q.errorMessage:q.error.message,[je,rt]=de.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===je)throw Qn(y,"credential-already-in-use",q);if("EMAIL_EXISTS"===je)throw Qn(y,"email-already-in-use",q);if("USER_DISABLED"===je)throw Qn(y,"user-disabled",q);const It=_[je]||je.toLowerCase().replace(/[_\s]+/g,"-");if(rt)throw Ce(y,It,rt);xe(y,It)}}catch(C){if(C instanceof k.ZR)throw C;xe(y,"network-request-failed")}})).apply(this,arguments)}function In(y,h,p,_){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,g.Z)(function*(y,h,p,_,C={}){const M=yield zt(y,h,p,_,C);return"mfaPendingCredential"in M&&xe(y,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function Yn(y,h,p,_){const C=`${h}${p}?${_}`;return y.config.emulator?Rn(y.config,C):`${y.config.apiScheme}://${C}`}class Lr{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,_)=>{this.timer=setTimeout(()=>_(we(this.auth,"network-request-failed")),Gn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Qn(y,h,p){const _={appName:y.name};p.email&&(_.email=p.email),p.phoneNumber&&(_.phoneNumber=p.phoneNumber);const C=we(y,h,_);return C.customData._tokenResponse=p,C}function Qe(){return(Qe=(0,g.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function yn(y,h){return ri.apply(this,arguments)}function ri(){return(ri=(0,g.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Dn(y,h){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,g.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function zn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function tn(){return(tn=(0,g.Z)(function*(y,h=!1){const p=(0,k.m9)(y),_=yield p.getIdToken(h),C=st(_);U(C&&C.exp&&C.auth_time&&C.iat,p.auth,"internal-error");const M="object"==typeof C.firebase?C.firebase:void 0,q=null==M?void 0:M.sign_in_provider;return{claims:C,token:_,authTime:zn(ft(C.auth_time)),issuedAtTime:zn(ft(C.iat)),expirationTime:zn(ft(C.exp)),signInProvider:q||null,signInSecondFactor:(null==M?void 0:M.sign_in_second_factor)||null}})).apply(this,arguments)}function ft(y){return 1e3*Number(y)}function st(y){var h;const[p,_,C]=y.split(".");if(void 0===p||void 0===_||void 0===C)return nt("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,k.tV)(_);return M?JSON.parse(M):(nt("Failed to decode base64 JWT payload"),null)}catch(M){return nt("Caught error parsing JWT payload as JSON",null===(h=M)||void 0===h?void 0:h.toString()),null}}function hn(y,h){return jn.apply(this,arguments)}function jn(){return(jn=(0,g.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(_){throw _ instanceof k.ZR&&er(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}function er({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class St{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const C=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,C)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),_)}iteration(){var h=this;return(0,g.Z)(function*(){var p;try{yield h.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===(null===(p=_)||void 0===p?void 0:p.code)&&h.schedule(!0))}h.schedule()})()}}class ii{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=zn(this.lastLoginAt),this.creationTime=zn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Yt(y){return gr.apply(this,arguments)}function gr(){return(gr=(0,g.Z)(function*(y){var h;const p=y.auth,_=yield y.getIdToken(),C=yield hn(y,Dn(p,{idToken:_}));U(null==C?void 0:C.users.length,p,"internal-error");const M=C.users[0];y._notifyReloadListener(M);const q=null!==(h=M.providerUserInfo)&&void 0!==h&&h.length?Je(M.providerUserInfo):[],de=ar(y.providerData,q),It=!!y.isAnonymous&&!(y.email&&M.passwordHash||null!=de&&de.length),Dt={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:de,metadata:new ii(M.createdAt,M.lastLoginAt),isAnonymous:It};Object.assign(y,Dt)})).apply(this,arguments)}function Ln(){return(Ln=(0,g.Z)(function*(y){const h=(0,k.m9)(y);yield Yt(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function ar(y,h){return[...y.filter(_=>!h.some(C=>C.providerId===_.providerId)),...h]}function Je(y){return y.map(h=>{var{providerId:p}=h,_=(0,pe._T)(h,["providerId"]);return{providerId:p,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function et(){return(et=(0,g.Z)(function*(y,h){const p=yield pi(y,{},(0,g.Z)(function*(){const _=(0,k.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:C,apiKey:M}=y.config,q=Yn(y,C,"/v1/token",`key=${M}`),de=yield y._getAdditionalHeaders();return de["Content-Type"]="application/x-www-form-urlencoded",on.fetch()(q,{method:"POST",headers:de,body:_})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class _t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){U(h.idToken,"internal-error"),U(void 0!==h.idToken,"internal-error"),U(void 0!==h.refreshToken,"internal-error");const p="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function Lt(y){const h=st(y);return U(h,"internal-error"),U(void 0!==h.exp,"internal-error"),U(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var _=this;return(0,g.Z)(function*(){return U(!_.accessToken||_.refreshToken,h,"user-token-expired"),p||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var _=this;return(0,g.Z)(function*(){const{accessToken:C,refreshToken:M,expiresIn:q}=yield function Ae(y,h){return et.apply(this,arguments)}(h,p);_.updateTokensAndExpiration(C,M,Number(q))})()}updateTokensAndExpiration(h,p,_){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,p){const{refreshToken:_,accessToken:C,expirationTime:M}=p,q=new _t;return _&&(U("string"==typeof _,"internal-error",{appName:h}),q.refreshToken=_),C&&(U("string"==typeof C,"internal-error",{appName:h}),q.accessToken=C),M&&(U("number"==typeof M,"internal-error",{appName:h}),q.expirationTime=M),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new _t,this.toJSON())}_performRefresh(){return ye("not implemented")}}function Et(y,h){U("string"==typeof y||void 0===y,"internal-error",{appName:h})}class Pt{constructor(h){var{uid:p,auth:_,stsTokenManager:C}=h,M=(0,pe._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new St(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=_,this.stsTokenManager=C,this.accessToken=C.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new ii(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const _=yield hn(p,p.stsTokenManager.getToken(p.auth,h));return U(_,p.auth,"internal-error"),p.accessToken!==_&&(p.accessToken=_,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),_})()}getIdTokenResult(h){return function Fn(y){return tn.apply(this,arguments)}(this,h)}reload(){return function Qt(y){return Ln.apply(this,arguments)}(this)}_assign(h){this!==h&&(U(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new Pt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){U(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var _=this;return(0,g.Z)(function*(){let C=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),C=!0),p&&(yield Yt(_)),yield _.auth._persistUserIfCurrent(_),C&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield hn(h,function Ti(y,h){return Qe.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var _,C,M,q,de,je,rt,It;const Dt=null!==(_=p.displayName)&&void 0!==_?_:void 0,Er=null!==(C=p.email)&&void 0!==C?C:void 0,Ni=null!==(M=p.phoneNumber)&&void 0!==M?M:void 0,Rh=null!==(q=p.photoURL)&&void 0!==q?q:void 0,Gy=null!==(de=p.tenantId)&&void 0!==de?de:void 0,Tc=null!==(je=p._redirectEventId)&&void 0!==je?je:void 0,zy=null!==(rt=p.createdAt)&&void 0!==rt?rt:void 0,cw=null!==(It=p.lastLoginAt)&&void 0!==It?It:void 0,{uid:Wy,emailVerified:dw,isAnonymous:hw,providerData:Hp,stsTokenManager:Gp}=p;U(Wy&&Gp,h,"internal-error");const zp=_t.fromJSON(this.name,Gp);U("string"==typeof Wy,h,"internal-error"),Et(Dt,h.name),Et(Er,h.name),U("boolean"==typeof dw,h,"internal-error"),U("boolean"==typeof hw,h,"internal-error"),Et(Ni,h.name),Et(Rh,h.name),Et(Gy,h.name),Et(Tc,h.name),Et(zy,h.name),Et(cw,h.name);const Ir=new Pt({uid:Wy,auth:h,email:Er,emailVerified:dw,displayName:Dt,isAnonymous:hw,photoURL:Rh,phoneNumber:Ni,tenantId:Gy,stsTokenManager:zp,createdAt:zy,lastLoginAt:cw});return Hp&&Array.isArray(Hp)&&(Ir.providerData=Hp.map(Wp=>Object.assign({},Wp))),Tc&&(Ir._redirectEventId=Tc),Ir}static _fromIdTokenResponse(h,p,_=!1){return(0,g.Z)(function*(){const C=new _t;C.updateFromServerResponse(p);const M=new Pt({uid:p.localId,auth:h,stsTokenManager:C,isAnonymous:_});return yield Yt(M),M})()}}const V=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,_){var C=this;return(0,g.Z)(function*(){C.storage[p]=_})()}_get(p){var _=this;return(0,g.Z)(function*(){const C=_.storage[p];return void 0===C?null:C})()}_remove(p){var _=this;return(0,g.Z)(function*(){delete _.storage[p]})()}_addListener(p,_){}_removeListener(p,_){}}return y.type="NONE",y})();function R(y,h,p){return`firebase:${y}:${h}:${p}`}class ${constructor(h,p,_){this.persistence=h,this.auth=p,this.userKey=_;const{config:C,name:M}=this.auth;this.fullUserKey=R(this.userKey,C.apiKey,M),this.fullPersistenceKey=R("persistence",C.apiKey,M),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?Pt._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const _=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,_?p.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,_="authUser"){return(0,g.Z)(function*(){if(!p.length)return new $(re(V),h,_);const C=(yield Promise.all(p.map(function(){var rt=(0,g.Z)(function*(It){if(yield It._isAvailable())return It});return function(It){return rt.apply(this,arguments)}}()))).filter(rt=>rt);let M=C[0]||re(V);const q=R(_,h.config.apiKey,h.name);let de=null;for(const rt of p)try{const It=yield rt._get(q);if(It){const Dt=Pt._fromJSON(h,It);rt!==M&&(de=Dt),M=rt;break}}catch(It){}const je=C.filter(rt=>rt._shouldAllowMigration);return M._shouldAllowMigration&&je.length?(M=je[0],de&&(yield M._set(q,de.toJSON())),yield Promise.all(p.map(function(){var rt=(0,g.Z)(function*(It){if(It!==M)try{yield It._remove(q)}catch(Dt){}});return function(It){return rt.apply(this,arguments)}}())),new $(M,h,_)):new $(M,h,_)})()}}function F(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(it(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ie(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Ut(h))return"Blackberry";if(ut(h))return"Webos";if(Ee(h))return"Safari";if((h.includes("chrome/")||ze(h))&&!h.includes("edge/"))return"Chrome";if(wt(h))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==_?void 0:_.length))return _[1]}return"Other"}function ie(y=(0,k.z$)()){return/firefox\//i.test(y)}function Ee(y=(0,k.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function ze(y=(0,k.z$)()){return/crios\//i.test(y)}function it(y=(0,k.z$)()){return/iemobile/i.test(y)}function wt(y=(0,k.z$)()){return/android/i.test(y)}function Ut(y=(0,k.z$)()){return/blackberry/i.test(y)}function ut(y=(0,k.z$)()){return/webos/i.test(y)}function qt(y=(0,k.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function yr(y=(0,k.z$)()){return qt(y)||wt(y)||ut(y)||Ut(y)||/windows phone/i.test(y)||it(y)}function Ot(y,h=[]){let p;switch(y){case"Browser":p=F((0,k.z$)());break;case"Worker":p=`${F((0,k.z$)())}-${y}`;break;default:p=y}const _=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${ne.SDK_VERSION}/${_}`}class vn{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const _=M=>new Promise((q,de)=>{try{q(h(M))}catch(je){de(je)}});_.onAbort=p,this.queue.push(_);const C=this.queue.length-1;return()=>{this.queue[C]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,g.Z)(function*(){var _;if(p.auth.currentUser===h)return;const C=[];try{for(const M of p.queue)yield M(h),M.onAbort&&C.push(M.onAbort)}catch(M){C.reverse();for(const q of C)try{q()}catch(de){}throw p.auth._errorFactory.create("login-blocked",{originalMessage:null===(_=M)||void 0===_?void 0:_.message})}})()}}class ur{constructor(h,p,_){this.app=h,this.heartbeatServiceProvider=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ue(this),this.idTokenSubscription=new ue(this),this.beforeStateQueue=new vn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=me,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(h,p){var _=this;return p&&(this._popupRedirectResolver=re(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var C,M;if(!_._deleted&&(_.persistenceManager=yield $.create(_,h),!_._deleted)){if(null!==(C=_._popupRedirectResolver)&&void 0!==C&&C._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch(q){}yield _.initializeCurrentUser(p),_.lastNotifiedUid=(null===(M=_.currentUser)||void 0===M?void 0:M.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var _;const C=yield p.assertedPersistence.getCurrentUser();let M=C,q=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const de=null===(_=p.redirectUser)||void 0===_?void 0:_._redirectEventId,je=null==M?void 0:M._redirectEventId,rt=yield p.tryRedirectSignIn(h);(!de||de===je)&&(null==rt?void 0:rt.user)&&(M=rt.user,q=!0)}if(!M)return p.directlySetCurrentUser(null);if(!M._redirectEventId){if(q)try{yield p.beforeStateQueue.runMiddleware(M)}catch(de){M=C,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(de))}return M?p.reloadAndSetCurrentUserOrClear(M):p.directlySetCurrentUser(null)}return U(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===M._redirectEventId?p.directlySetCurrentUser(M):p.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let _=null;try{_=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch(C){yield p._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){var _;try{yield Yt(h)}catch(C){if("auth/network-request-failed"!==(null===(_=C)||void 0===_?void 0:_.code))return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function He(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const _=h?(0,k.m9)(h):null;return _&&U(_.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(_&&_._clone(p))})()}_updateCurrentUser(h,p=!1){var _=this;return(0,g.Z)(function*(){if(!_._deleted)return h&&U(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),p||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,g.Z)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(re(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new k.LL("auth","Firebase",h())}onAuthStateChanged(h,p,_){return this.registerStateListener(this.authStateSubscription,h,p,_)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,_){return this.registerStateListener(this.idTokenSubscription,h,p,_)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var _=this;return(0,g.Z)(function*(){const C=yield _.getOrInitRedirectPersistenceManager(p);return null===h?C.removeCurrentUser():C.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const _=h&&re(h)||p._popupRedirectResolver;U(_,p,"argument-error"),p.redirectPersistenceManager=yield $.create(p,[re(_._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var _,C;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(_=p._currentUser)||void 0===_?void 0:_._redirectEventId)===h?p._currentUser:(null===(C=p.redirectUser)||void 0===C?void 0:C._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,_,C){if(this._deleted)return()=>{};const M="function"==typeof p?p:p.next.bind(p),q=this._isInitialized?Promise.resolve():this._initializationPromise;return U(q,this,"internal-error"),q.then(()=>M(this.currentUser)),"function"==typeof p?h.addObserver(p,_,C):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return U(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Ot(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const C=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return C&&(_["X-Firebase-Client"]=C),_})()}}function K(y){return(0,k.m9)(y)}class ue{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,k.ne)(p=>this.observer=p)}get next(){return U(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function We(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function en(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class Cn{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return ye("not implemented")}_getIdTokenResponse(h){return ye("not implemented")}_linkToIdToken(h,p){return ye("not implemented")}_getReauthenticationResolver(h){return ye("not implemented")}}function Vr(y,h){return lr.apply(this,arguments)}function lr(){return(lr=(0,g.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:resetPassword",vt(y,h))})).apply(this,arguments)}function gi(y,h){return tr.apply(this,arguments)}function tr(){return(tr=(0,g.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ms(y,h){return $i.apply(this,arguments)}function $i(){return($i=(0,g.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:update",vt(y,h))})).apply(this,arguments)}function Hi(){return(Hi=(0,g.Z)(function*(y,h){return In(y,"POST","/v1/accounts:signInWithPassword",vt(y,h))})).apply(this,arguments)}function ys(y,h){return fn.apply(this,arguments)}function fn(){return(fn=(0,g.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:sendOobCode",vt(y,h))})).apply(this,arguments)}function Fl(y,h){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,g.Z)(function*(y,h){return ys(y,h)})).apply(this,arguments)}function Sr(y,h){return cr.apply(this,arguments)}function cr(){return(cr=(0,g.Z)(function*(y,h){return ys(y,h)})).apply(this,arguments)}function Hs(y,h){return ns.apply(this,arguments)}function ns(){return(ns=(0,g.Z)(function*(y,h){return ys(y,h)})).apply(this,arguments)}function la(y,h){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,g.Z)(function*(y,h){return ys(y,h)})).apply(this,arguments)}function Vl(){return(Vl=(0,g.Z)(function*(y,h){return In(y,"POST","/v1/accounts:signInWithEmailLink",vt(y,h))})).apply(this,arguments)}function ca(){return(ca=(0,g.Z)(function*(y,h){return In(y,"POST","/v1/accounts:signInWithEmailLink",vt(y,h))})).apply(this,arguments)}class da extends Cn{constructor(h,p,_,C=null){super("password",_),this._email=h,this._password=p,this._tenantId=C}static _fromEmailAndPassword(h,p){return new da(h,p,"password")}static _fromEmailAndCode(h,p,_=null){return new da(h,p,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function Zr(y,h){return Hi.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Ll(y,h){return Vl.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:xe(h,"internal-error")}})()}_linkToIdToken(h,p){var _=this;return(0,g.Z)(function*(){switch(_.signInMethod){case"password":return gi(h,{idToken:p,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function mu(y,h){return ca.apply(this,arguments)}(h,{idToken:p,email:_._email,oobCode:_._password});default:xe(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function nr(y,h){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,g.Z)(function*(y,h){return In(y,"POST","/v1/accounts:signInWithIdp",vt(y,h))})).apply(this,arguments)}class Si extends Cn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new Si(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):xe("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:C}=p,M=(0,pe._T)(p,["providerId","signInMethod"]);if(!_||!C)return null;const q=new Si(_,C);return q.idToken=M.idToken||void 0,q.accessToken=M.accessToken||void 0,q.secret=M.secret,q.nonce=M.nonce,q.pendingToken=M.pendingToken||null,q}_getIdTokenResponse(h){return nr(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,nr(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,nr(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,k.xO)(p)}return h}}function Bl(y,h){return jl.apply(this,arguments)}function jl(){return(jl=(0,g.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:sendVerificationCode",vt(y,h))})).apply(this,arguments)}function Hl(){return(Hl=(0,g.Z)(function*(y,h){return In(y,"POST","/v1/accounts:signInWithPhoneNumber",vt(y,h))})).apply(this,arguments)}function Fd(){return(Fd=(0,g.Z)(function*(y,h){const p=yield In(y,"POST","/v1/accounts:signInWithPhoneNumber",vt(y,h));if(p.temporaryProof)throw Qn(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Gl={USER_NOT_FOUND:"user-not-found"};function Ld(){return(Ld=(0,g.Z)(function*(y,h){return In(y,"POST","/v1/accounts:signInWithPhoneNumber",vt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Gl)})).apply(this,arguments)}class rs extends Cn{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new rs({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new rs({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function $l(y,h){return Hl.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function oy(y,h){return Fd.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function ay(y,h){return Ld.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:_,verificationCode:C}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:_,code:C}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:_,phoneNumber:C,temporaryProof:M}=h;return _||p||C||M?new rs({verificationId:p,verificationCode:_,phoneNumber:C,temporaryProof:M}):null}}class ha{constructor(h){var p,_,C,M,q,de;const je=(0,k.zd)((0,k.pd)(h)),rt=null!==(p=je.apiKey)&&void 0!==p?p:null,It=null!==(_=je.oobCode)&&void 0!==_?_:null,Dt=function yu(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(C=je.mode)&&void 0!==C?C:null);U(rt&&It&&Dt,"argument-error"),this.apiKey=rt,this.operation=Dt,this.code=It,this.continueUrl=null!==(M=je.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(q=je.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(de=je.tenantId)&&void 0!==de?de:null}static parseLink(h){const p=function hp(y){const h=(0,k.zd)((0,k.pd)(y)).link,p=h?(0,k.zd)((0,k.pd)(h)).deep_link_id:null,_=(0,k.zd)((0,k.pd)(y)).deep_link_id;return(_?(0,k.zd)((0,k.pd)(_)).link:null)||_||p||h||y}(h);try{return new ha(p)}catch(_){return null}}}let Ai=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,_){return da._fromEmailAndPassword(p,_)}static credentialWithLink(p,_){const C=ha.parseLink(_);return U(C,"argument-error"),da._fromEmailAndCode(p,C.code,C.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class is{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class ss extends is{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class vs extends ss{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return U("providerId"in p&&"signInMethod"in p,"argument-error"),Si._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return U(h.idToken||h.accessToken,"argument-error"),Si._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return vs.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return vs.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:_,oauthTokenSecret:C,pendingToken:M,nonce:q,providerId:de}=h;if(!_&&!C&&!p&&!M||!de)return null;try{return new vs(de)._credential({idToken:p,accessToken:_,nonce:q,pendingToken:M})}catch(je){return null}}}let fa=(()=>{class y extends ss{constructor(){super("facebook.com")}static credential(p){return Si._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(_){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),pa=(()=>{class y extends ss{constructor(){super("google.com"),this.addScope("profile")}static credential(p,_){return Si._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:C}=p;if(!_&&!C)return null;try{return y.credential(_,C)}catch(M){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),vu=(()=>{class y extends ss{constructor(){super("github.com")}static credential(p){return Si._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(_){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class os extends Cn{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return nr(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,nr(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,nr(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:C,pendingToken:M}=p;return _&&C&&M&&_===C?new os(_,M):null}static _create(h,p){return new os(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class zs extends is{constructor(h){U(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return zs.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return zs.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=os.fromJSON(h);return U(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:_}=h;if(!p||!_)return null;try{return os._create(_,p)}catch(C){return null}}}let Ar=(()=>{class y extends ss{constructor(){super("twitter.com")}static credential(p,_){return Si._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:_,oauthTokenSecret:C}=p;if(!_||!C)return null;try{return y.credential(_,C)}catch(M){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Ws(y,h){return Io.apply(this,arguments)}function Io(){return(Io=(0,g.Z)(function*(y,h){return In(y,"POST","/v1/accounts:signUp",vt(y,h))})).apply(this,arguments)}class Mr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,_,C=!1){return(0,g.Z)(function*(){const M=yield Pt._fromIdTokenResponse(h,_,C),q=fp(_);return new Mr({user:M,providerId:q,_tokenResponse:_,operationType:p})})()}static _forOperation(h,p,_){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(_,!0);const C=fp(_);return new Mr({user:h,providerId:C,_tokenResponse:_,operationType:p})})()}}function fp(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function $n(){return($n=(0,g.Z)(function*(y){var h;const p=K(y);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new Mr({user:p.currentUser,providerId:null,operationType:"signIn"});const _=yield Ws(p,{returnSecureToken:!0}),C=yield Mr._fromIdTokenResponse(p,"signIn",_,!0);return yield p._updateCurrentUser(C.user),C})).apply(this,arguments)}class ga extends k.ZR{constructor(h,p,_,C){var M;super(p.code,p.message),this.operationType=_,this.user=C,Object.setPrototypeOf(this,ga.prototype),this.customData={appName:h.name,tenantId:null!==(M=h.tenantId)&&void 0!==M?M:void 0,_serverResponse:p.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,p,_,C){return new ga(h,p,_,C)}}function qs(y,h,p,_){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?ga._fromErrorAndOperation(y,M,h,_):M})}function _s(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function zl(){return(zl=(0,g.Z)(function*(y,h){const p=(0,k.m9)(y);yield Kt(!0,p,h);const{providerUserInfo:_}=yield yn(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),C=_s(_||[]);return p.providerData=p.providerData.filter(M=>C.has(M.providerId)),C.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function mi(y,h){return ws.apply(this,arguments)}function ws(){return(ws=(0,g.Z)(function*(y,h,p=!1){const _=yield hn(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return Mr._forOperation(y,"link",_)})).apply(this,arguments)}function Kt(y,h,p){return Vd.apply(this,arguments)}function Vd(){return(Vd=(0,g.Z)(function*(y,h,p){yield Yt(h);const C=!1===y?"provider-already-linked":"no-such-provider";U(_s(h.providerData).has(p)===y,h.auth,C)})).apply(this,arguments)}function Ks(y,h){return wu.apply(this,arguments)}function wu(){return(wu=(0,g.Z)(function*(y,h,p=!1){var _;const{auth:C}=y,M="reauthenticate";try{const q=yield hn(y,qs(C,M,h,y),p);U(q.idToken,C,"internal-error");const de=st(q.idToken);U(de,C,"internal-error");const{sub:je}=de;return U(y.uid===je,C,"user-mismatch"),Mr._forOperation(y,M,q)}catch(q){throw"auth/user-not-found"===(null===(_=q)||void 0===_?void 0:_.code)&&xe(C,"user-mismatch"),q}})).apply(this,arguments)}function Gi(y,h){return ma.apply(this,arguments)}function ma(){return(ma=(0,g.Z)(function*(y,h,p=!1){const _="signIn",C=yield qs(y,_,h),M=yield Mr._fromIdTokenResponse(y,_,C);return p||(yield y._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Do(y,h){return x.apply(this,arguments)}function x(){return(x=(0,g.Z)(function*(y,h){return Gi(K(y),h)})).apply(this,arguments)}function O(y,h){return W.apply(this,arguments)}function W(){return(W=(0,g.Z)(function*(y,h){const p=(0,k.m9)(y);return yield Kt(!1,p,h.providerId),mi(p,h)})).apply(this,arguments)}function ae(y,h){return ke.apply(this,arguments)}function ke(){return(ke=(0,g.Z)(function*(y,h){return Ks((0,k.m9)(y),h)})).apply(this,arguments)}function Ge(y,h){return lt.apply(this,arguments)}function lt(){return(lt=(0,g.Z)(function*(y,h){return In(y,"POST","/v1/accounts:signInWithCustomToken",vt(y,h))})).apply(this,arguments)}function Wn(){return(Wn=(0,g.Z)(function*(y,h){const p=K(y),_=yield Ge(p,{token:h,returnSecureToken:!0}),C=yield Mr._fromIdTokenResponse(p,"signIn",_);return yield p._updateCurrentUser(C.user),C})).apply(this,arguments)}class Te{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?gt._fromServerResponse(h,p):xe(h,"internal-error")}}class gt extends Te{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new gt(p)}}function kt(y,h,p){var _;U((null===(_=p.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),U(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(U(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(U(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function On(){return(On=(0,g.Z)(function*(y,h,p){const _=(0,k.m9)(y),C={requestType:"PASSWORD_RESET",email:h};p&&kt(_,C,p),yield Sr(_,C)})).apply(this,arguments)}function Mi(){return(Mi=(0,g.Z)(function*(y,h,p){yield Vr((0,k.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function ya(){return(ya=(0,g.Z)(function*(y,h){yield ms((0,k.m9)(y),{oobCode:h})})).apply(this,arguments)}function Co(y,h){return Es.apply(this,arguments)}function Es(){return(Es=(0,g.Z)(function*(y,h){const p=(0,k.m9)(y),_=yield Vr(p,{oobCode:h}),C=_.requestType;switch(U(C,p,"internal-error"),C){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":U(_.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":U(_.mfaInfo,p,"internal-error");default:U(_.email,p,"internal-error")}let M=null;return _.mfaInfo&&(M=Te._fromServerResponse(K(p),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:M},operation:C}})).apply(this,arguments)}function Ds(){return(Ds=(0,g.Z)(function*(y,h){const{data:p}=yield Co((0,k.m9)(y),h);return p.email})).apply(this,arguments)}function Jn(){return(Jn=(0,g.Z)(function*(y,h,p){const _=K(y),C=yield Ws(_,{returnSecureToken:!0,email:h,password:p}),M=yield Mr._fromIdTokenResponse(_,"signIn",C);return yield _._updateCurrentUser(M.user),M})).apply(this,arguments)}function So(){return(So=(0,g.Z)(function*(y,h,p){const _=(0,k.m9)(y),C={requestType:"EMAIL_SIGNIN",email:h};U(p.handleCodeInApp,_,"argument-error"),p&&kt(_,C,p),yield Hs(_,C)})).apply(this,arguments)}function Bd(){return(Bd=(0,g.Z)(function*(y,h,p){const _=(0,k.m9)(y),C=Ai.credentialWithLink(h,p||Le());return U(C._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),Do(_,C)})).apply(this,arguments)}function q0(y,h){return pp.apply(this,arguments)}function pp(){return(pp=(0,g.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:createAuthUri",vt(y,h))})).apply(this,arguments)}function Eu(){return(Eu=(0,g.Z)(function*(y,h){const _={identifier:h,continueUri:at()?Le():"http://localhost"},{signinMethods:C}=yield q0((0,k.m9)(y),_);return C||[]})).apply(this,arguments)}function Iu(){return(Iu=(0,g.Z)(function*(y,h){const p=(0,k.m9)(y),C={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&kt(p.auth,C,h);const{email:M}=yield Fl(p.auth,C);M!==y.email&&(yield y.reload())})).apply(this,arguments)}function jd(){return(jd=(0,g.Z)(function*(y,h,p){const _=(0,k.m9)(y),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&kt(_.auth,M,p);const{email:q}=yield la(_.auth,M);q!==y.email&&(yield y.reload())})).apply(this,arguments)}function mp(y,h){return $d.apply(this,arguments)}function $d(){return($d=(0,g.Z)(function*(y,h){return zt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Hd(){return(Hd=(0,g.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const _=(0,k.m9)(y),M={idToken:yield _.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},q=yield hn(_,mp(_.auth,M));_.displayName=q.displayName||null,_.photoURL=q.photoUrl||null;const de=_.providerData.find(({providerId:je})=>"password"===je);de&&(de.displayName=_.displayName,de.photoURL=_.photoURL),yield _._updateTokensIfNecessary(q)})).apply(this,arguments)}function va(y,h,p){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,g.Z)(function*(y,h,p){const{auth:_}=y,M={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(M.email=h),p&&(M.password=p);const q=yield hn(y,gi(_,M));yield y._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class yi{constructor(h,p,_={}){this.isNewUser=h,this.providerId=p,this.profile=_}}class Vn extends yi{constructor(h,p,_,C){super(h,p,_),this.username=C}}class fy extends yi{constructor(h,p){super(h,"facebook.com",p)}}class py extends Vn{constructor(h,p){super(h,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class gy extends yi{constructor(h,p){super(h,"google.com",p)}}class my extends Vn{constructor(h,p,_){super(h,"twitter.com",p,_)}}function Wl(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function vr(y){var h,p;if(!y)return null;const{providerId:_}=y,C=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},M=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&(null==y?void 0:y.idToken)){const q=null===(p=null===(h=st(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(q)return new yi(M,"anonymous"!==q&&"custom"!==q?q:null)}if(!_)return null;switch(_){case"facebook.com":return new fy(M,C);case"github.com":return new py(M,C);case"google.com":return new gy(M,C);case"twitter.com":return new my(M,C,y.screenName||null);case"custom":case"anonymous":return new yi(M,null);default:return new yi(M,_,C)}}(p)}class Mo{constructor(h,p,_){this.type=h,this.credential=p,this.auth=_}static _fromIdtoken(h,p){return new Mo("enroll",h,p)}static _fromMfaPendingCredential(h){return new Mo("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,_;if(null!=h&&h.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return Mo._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return Mo._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Kd{constructor(h,p,_){this.session=h,this.hints=p,this.signInResolver=_}static _fromError(h,p){const _=K(h),C=p.customData._serverResponse,M=(C.mfaInfo||[]).map(de=>Te._fromServerResponse(_,de));U(C.mfaPendingCredential,_,"internal-error");const q=Mo._fromMfaPendingCredential(C.mfaPendingCredential);return new Kd(q,M,function(){var de=(0,g.Z)(function*(je){const rt=yield je._process(_,q);delete C.mfaInfo,delete C.mfaPendingCredential;const It=Object.assign(Object.assign({},C),{idToken:rt.idToken,refreshToken:rt.refreshToken});switch(p.operationType){case"signIn":const Dt=yield Mr._fromIdTokenResponse(_,p.operationType,It);return yield _._updateCurrentUser(Dt.user),Dt;case"reauthenticate":return U(p.user,_,"internal-error"),Mr._forOperation(p.user,p.operationType,It);default:xe(_,"internal-error")}});return function(je){return de.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}function Zd(y,h){return zt(y,"POST","/v2/accounts/mfaEnrollment:start",vt(y,h))}class yy{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(_=>Te._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new yy(h)}getSession(){var h=this;return(0,g.Z)(function*(){return Mo._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var _=this;return(0,g.Z)(function*(){const C=h,M=yield _.getSession(),q=yield hn(_.user,C._process(_.user.auth,M,p));return yield _.user._updateTokensIfNecessary(q),_.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){var _;const C="string"==typeof h?h:h.uid,M=yield p.user.getIdToken(),q=yield hn(p.user,function _p(y,h){return zt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",vt(y,h))}(p.user.auth,{idToken:M,mfaEnrollmentId:C}));p.enrolledFactors=p.enrolledFactors.filter(({uid:de})=>de!==C),yield p.user._updateTokensIfNecessary(q);try{yield p.user.reload()}catch(de){if("auth/user-token-expired"!==(null===(_=de)||void 0===_?void 0:_.code))throw de}})()}}const Kl=new WeakMap,Su="__sak";class Zl{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(Su,"1"),this.storage.removeItem(Su),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const xu=(()=>{class y extends Zl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,_)=>this.onStorageEvent(p,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Au(){const y=(0,k.z$)();return Ee(y)||qt(y)}()&&function qe(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=yr(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const _ of Object.keys(this.listeners)){const C=this.storage.getItem(_),M=this.localCache[_];C!==M&&p(_,M,C)}}onStorageEvent(p,_=!1){if(!p.key)return void this.forAllChangedKeys((de,je,rt)=>{this.notifyListeners(de,rt)});const C=p.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const de=this.storage.getItem(C);if(p.newValue!==de)null!==p.newValue?this.storage.setItem(C,p.newValue):this.storage.removeItem(C);else if(this.localCache[C]===p.newValue&&!_)return}const M=()=>{const de=this.storage.getItem(C);!_&&this.localCache[C]===de||this.notifyListeners(C,de)},q=this.storage.getItem(C);!function mr(){return(0,k.w1)()&&10===document.documentMode}()||q===p.newValue||p.newValue===p.oldValue?M():setTimeout(M,10)}notifyListeners(p,_){this.localCache[p]=_;const C=this.listeners[p];if(C)for(const M of Array.from(C))M(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,_,C)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:_,newValue:C}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,_){var C=()=>super._set,M=this;return(0,g.Z)(function*(){yield C().call(M,p,_),M.localCache[p]=JSON.stringify(_)})()}_get(p){var _=()=>super._get,C=this;return(0,g.Z)(function*(){const M=yield _().call(C,p);return C.localCache[p]=JSON.stringify(M),M})()}_remove(p){var _=()=>super._remove,C=this;return(0,g.Z)(function*(){yield _().call(C,p),delete C.localCache[p]})()}}return y.type="LOCAL",y})(),us=(()=>{class y extends Zl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,_){}_removeListener(p,_){}}return y.type="SESSION",y})();let Ip=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const _=this.receivers.find(M=>M.isListeningto(p));if(_)return _;const C=new y(p);return this.receivers.push(C),C}isListeningto(p){return this.eventTarget===p}handleEvent(p){var _=this;return(0,g.Z)(function*(){const C=p,{eventId:M,eventType:q,data:de}=C.data,je=_.handlersMap[q];if(null==je||!je.size)return;C.ports[0].postMessage({status:"ack",eventId:M,eventType:q});const rt=Array.from(je).map(function(){var Dt=(0,g.Z)(function*(Er){return Er(C.origin,de)});return function(Er){return Dt.apply(this,arguments)}}()),It=yield function Yl(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(_){return{fulfilled:!1,reason:_}}});return function(p){return h.apply(this,arguments)}}()))}(rt);C.ports[0].postMessage({status:"done",eventId:M,eventType:q,response:It})})()}_subscribe(p,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(_)}_unsubscribe(p,_){this.handlersMap[p]&&_&&this.handlersMap[p].delete(_),(!_||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Nu(y="",h=10){let p="";for(let _=0;_<h;_++)p+=Math.floor(10*Math.random());return y+p}class vy{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,_=50){var C=this;return(0,g.Z)(function*(){const M="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let q,de;return new Promise((je,rt)=>{const It=Nu("",20);M.port1.start();const Dt=setTimeout(()=>{rt(new Error("unsupported_event"))},_);de={messageChannel:M,onMessage(Er){const Ni=Er;if(Ni.data.eventId===It)switch(Ni.data.status){case"ack":clearTimeout(Dt),q=setTimeout(()=>{rt(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),je(Ni.data.response);break;default:clearTimeout(Dt),clearTimeout(q),rt(new Error("invalid_response"))}}},C.handlers.add(de),M.port1.addEventListener("message",de.onMessage),C.target.postMessage({eventType:h,eventId:It,data:p},[M.port2])}).finally(()=>{de&&C.removeMessageHandler(de)})})()}}function rr(){return window}function Yd(){return void 0!==rr().WorkerGlobalScope&&"function"==typeof rr().importScripts}function Pu(){return(Pu=(0,g.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const wa="firebaseLocalStorageDb",Ea="firebaseLocalStorage",Qd="fbase_key";class ku{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function Fu(y,h){return y.transaction([Ea],h?"readwrite":"readonly").objectStore(Ea)}function Ia(){const y=indexedDB.open(wa,1);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(Ea,{keyPath:Qd})}catch(C){p(C)}}),y.addEventListener("success",(0,g.Z)(function*(){const _=y.result;_.objectStoreNames.contains(Ea)?h(_):(_.close(),yield function K0(){const y=indexedDB.deleteDatabase(wa);return new ku(y).toPromise()}(),h(yield Ia()))}))})}function Js(y,h,p){return Jd.apply(this,arguments)}function Jd(){return(Jd=(0,g.Z)(function*(y,h,p){const _=Fu(y,!0).put({[Qd]:h,value:p});return new ku(_).toPromise()})).apply(this,arguments)}function Xd(){return(Xd=(0,g.Z)(function*(y,h){const p=Fu(y,!1).get(h),_=yield new ku(p).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function Da(y,h){const p=Fu(y,!0).delete(h);return new ku(p).toPromise()}const ba=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield Ia()),p.db})()}_withRetries(p){var _=this;return(0,g.Z)(function*(){let C=0;for(;;)try{const M=yield _._openDb();return yield p(M)}catch(M){if(C++>3)throw M;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return Yd()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=Ip._getInstance(function Jl(){return Yd()?self:null}()),p.receiver._subscribe("keyChanged",function(){var _=(0,g.Z)(function*(C,M){return{keyProcessed:(yield p._poll()).includes(M.key)}});return function(C,M){return _.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var _=(0,g.Z)(function*(C,M){return["keyChanged"]});return function(C,M){return _.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var _,C;if(p.activeServiceWorker=yield function Ou(){return Pu.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new vy(p.activeServiceWorker);const M=yield p.sender._send("ping",{},800);!M||(null===(_=M[0])||void 0===_?void 0:_.fulfilled)&&(null===(C=M[0])||void 0===C?void 0:C.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var _=this;return(0,g.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function Ql(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:p},_.serviceWorkerReceiverAvailable?800:50)}catch(C){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Ia();return yield Js(p,Su,"1"),yield Da(p,Su),!0}catch(p){}return!1})()}_withPendingWrite(p){var _=this;return(0,g.Z)(function*(){_.pendingWrites++;try{yield p()}finally{_.pendingWrites--}})()}_set(p,_){var C=this;return(0,g.Z)(function*(){return C._withPendingWrite((0,g.Z)(function*(){return yield C._withRetries(M=>Js(M,p,_)),C.localCache[p]=_,C.notifyServiceWorker(p)}))})()}_get(p){var _=this;return(0,g.Z)(function*(){const C=yield _._withRetries(M=>function bp(y,h){return Xd.apply(this,arguments)}(M,p));return _.localCache[p]=C,C})()}_remove(p){var _=this;return(0,g.Z)(function*(){return _._withPendingWrite((0,g.Z)(function*(){return yield _._withRetries(C=>Da(C,p)),delete _.localCache[p],_.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const _=yield p._withRetries(q=>{const de=Fu(q,!1).getAll();return new ku(de).toPromise()});if(!_)return[];if(0!==p.pendingWrites)return[];const C=[],M=new Set;for(const{fbase_key:q,value:de}of _)M.add(q),JSON.stringify(p.localCache[q])!==JSON.stringify(de)&&(p.notifyListeners(q,de),C.push(q));for(const q of Object.keys(p.localCache))p.localCache[q]&&!M.has(q)&&(p.notifyListeners(q,null),C.push(q));return C})()}notifyListeners(p,_){this.localCache[p]=_;const C=this.listeners[p];if(C)for(const M of Array.from(C))M(_)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Xl(y,h){return zt(y,"POST","/v2/accounts/mfaSignIn:start",vt(y,h))}function xo(){return(xo=(0,g.Z)(function*(y){return(yield zt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function eh(y){return new Promise((h,p)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=h,_.onerror=C=>{const M=we("internal-error");M.customData=C,p(M)},_.type="text/javascript",_.charset="UTF-8",function Vu(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(_)})}function th(y){return`__${y}${Math.floor(1e6*Math.random())}`}const nh=1e12;class Tn{constructor(h){this.auth=h,this.counter=nh,this._widgets=new Map}render(h,p){const _=this.counter;return this._widgets.set(_,new Z0(h,this.auth.name,p||{})),this.counter++,_}reset(h){var p;const _=h||nh;null===(p=this._widgets.get(_))||void 0===p||p.delete(),this._widgets.delete(_)}getResponse(h){var p;return(null===(p=this._widgets.get(h||nh))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var _;return null===(_=p._widgets.get(h||nh))||void 0===_||_.execute(),""})()}}class Z0{constructor(h,p,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const C="string"==typeof h?document.getElementById(h):h;U(C,"argument-error",{appName:p}),this.container=C,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function HD(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch(_){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(_){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const _y=th("rcb"),GD=new sn(3e4,6e4);class WD{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=rr().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return U(function qD(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(rr().grecaptcha):new Promise((_,C)=>{const M=rr().setTimeout(()=>{C(we(h,"network-request-failed"))},GD.get());rr()[_y]=()=>{rr().clearTimeout(M),delete rr()[_y];const de=rr().grecaptcha;if(!de)return void C(we(h,"internal-error"));const je=de.render;de.render=(rt,It)=>{const Dt=je(rt,It);return this.counter++,Dt},this.hostLanguage=p,_(de)},eh(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:_y,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(M),C(we(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=rr().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class tc{load(h){return(0,g.Z)(function*(){return new Tn(h)})()}clearedOneInstance(){}}const Y0="recaptcha",Q0={theme:"light",type:"image"};class _r{constructor(h,p=Object.assign({},Q0),_){this.parameters=p,this.type=Y0,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=K(_),this.isInvisible="invisible"===this.parameters.size,U("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const C="string"==typeof h?document.getElementById(h):h;U(C,this.auth,"argument-error"),this.container=C,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new tc:new WD,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(p)||new Promise(M=>{const q=de=>{!de||(h.tokenChangeListeners.delete(q),M(de))};h.tokenChangeListeners.add(q),h.isInvisible&&_.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){U(!this.parameters.sitekey,this.auth,"argument-error"),U(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),U("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(_=>_(p)),"function"==typeof h)h(p);else if("string"==typeof h){const _=rr()[h];"function"==typeof _&&_(p)}}}assertNotDestroyed(){U(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const _=document.createElement("div");p.appendChild(_),p=_}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){U(at()&&!Yd(),h.auth,"internal-error"),yield function wn(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function Lu(y){return xo.apply(this,arguments)}(h.auth);U(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return U(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Br{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=rs._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function rh(){return(rh=(0,g.Z)(function*(y,h,p){const _=K(y),C=yield xi(_,h,(0,k.m9)(p));return new Br(C,M=>Do(_,M))})).apply(this,arguments)}function Wi(){return(Wi=(0,g.Z)(function*(y,h,p){const _=(0,k.m9)(y);yield Kt(!1,_,"phone");const C=yield xi(_.auth,h,(0,k.m9)(p));return new Br(C,M=>O(_,M))})).apply(this,arguments)}function Ca(){return(Ca=(0,g.Z)(function*(y,h,p){const _=(0,k.m9)(y),C=yield xi(_.auth,h,(0,k.m9)(p));return new Br(C,M=>ae(_,M))})).apply(this,arguments)}function xi(y,h,p){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,g.Z)(function*(y,h,p){var _;const C=yield p.verify();try{let M;if(U("string"==typeof C,y,"argument-error"),U(p.type===Y0,y,"argument-error"),M="string"==typeof h?{phoneNumber:h}:h,"session"in M){const q=M.session;if("phoneNumber"in M)return U("enroll"===q.type,y,"internal-error"),(yield Zd(y,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:C}})).phoneSessionInfo.sessionInfo;{U("signin"===q.type,y,"internal-error");const de=(null===(_=M.multiFactorHint)||void 0===_?void 0:_.uid)||M.multiFactorUid;return U(de,y,"missing-multi-factor-info"),(yield Xl(y,{mfaPendingCredential:q.credential,mfaEnrollmentId:de,phoneSignInInfo:{recaptchaToken:C}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield Bl(y,{phoneNumber:M.phoneNumber,recaptchaToken:C});return q}}finally{p._reset()}})).apply(this,arguments)}function At(){return(At=(0,g.Z)(function*(y,h){yield mi((0,k.m9)(y),h)})).apply(this,arguments)}let nc=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=K(p)}verifyPhoneNumber(p,_){return xi(this.auth,p,(0,k.m9)(_))}static credential(p,_){return rs._fromVerification(p,_)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:_,temporaryProof:C}=p;return _&&C?rs._fromTokenResponse(_,C):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Ta(y,h){return h?re(h):(U(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Bu extends Cn{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return nr(h,this._buildIdpRequest())}_linkToIdToken(h,p){return nr(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return nr(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function oi(y){return Gi(y.auth,new Bu(y),y.bypassAuthState)}function sh(y){const{auth:h,user:p}=y;return U(p,h,"internal-error"),Ks(p,new Bu(y),y.bypassAuthState)}function Ro(y){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,g.Z)(function*(y){const{auth:h,user:p}=y;return U(p,h,"internal-error"),mi(p,new Bu(y),y.bypassAuthState)})).apply(this,arguments)}class Ri{constructor(h,p,_,C,M=!1){this.auth=h,this.resolver=_,this.user=C,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(_,C){h.pendingPromise={resolve:_,reject:C};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(M){h.reject(M)}});return function(_,C){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:_,sessionId:C,postBody:M,tenantId:q,error:de,type:je}=h;if(de)return void p.reject(de);const rt={auth:p.auth,requestUri:_,sessionId:C,tenantId:q||void 0,postBody:M||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(je)(rt))}catch(It){p.reject(It)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return oi;case"linkViaPopup":case"linkViaRedirect":return Ro;case"reauthViaPopup":case"reauthViaRedirect":return sh;default:xe(this.auth,"internal-error")}}resolve(h){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Z(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wy=new sn(2e3,1e4);function oh(){return(oh=(0,g.Z)(function*(y,h,p){const _=K(y);$e(y,h,is);const C=Ta(_,p);return new _i(_,"signInViaPopup",h,C).executeNotNull()})).apply(this,arguments)}function ah(){return(ah=(0,g.Z)(function*(y,h,p){const _=(0,k.m9)(y);$e(_.auth,h,is);const C=Ta(_.auth,p);return new _i(_.auth,"reauthViaPopup",h,C,_).executeNotNull()})).apply(this,arguments)}function ju(){return(ju=(0,g.Z)(function*(y,h,p){const _=(0,k.m9)(y);$e(_.auth,h,is);const C=Ta(_.auth,p);return new _i(_.auth,"linkViaPopup",h,C,_).executeNotNull()})).apply(this,arguments)}let _i=(()=>{class y extends Ri{constructor(p,_,C,M,q){super(p,_,M,q),this.provider=C,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const _=yield p.execute();return U(_,p.auth,"internal-error"),_})()}onExecution(){var p=this;return(0,g.Z)(function*(){Z(1===p.filter.length,"Popup operations only handle one event");const _=Nu();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],_),p.authWindow.associatedEvent=_,p.resolver._originValidation(p.auth).catch(C=>{p.reject(C)}),p.resolver._isIframeWebStorageSupported(p.auth,C=>{C||p.reject(we(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var _,C;this.pollId=null!==(C=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==C&&C.closed?window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,wy.get())};p()}}return y.currentPopupAction=null,y})();const Un=new Map;class ls extends Ri{constructor(h,p,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let _=Un.get(p.auth._key());if(!_){try{const M=(yield function ic(y,h){return Ap.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;_=()=>Promise.resolve(M)}catch(C){_=()=>Promise.reject(C)}Un.set(p.auth._key(),_)}return p.bypassAuthState||Un.set(p.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,_=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(_,h);if("unknown"!==h.type){if(h.eventId){const C=yield _.auth._redirectUserForId(h.eventId);if(C)return _.user=C,p().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function Ap(){return(Ap=(0,g.Z)(function*(y,h){const p=lh(h),_=to(y);if(!(yield _._isAvailable()))return!1;const C="true"===(yield _._get(p));return yield _._remove(p),C})).apply(this,arguments)}function sc(y,h){return oc.apply(this,arguments)}function oc(){return(oc=(0,g.Z)(function*(y,h){return to(y)._set(lh(h),"true")})).apply(this,arguments)}function eo(y,h){Un.set(y._key(),h)}function to(y){return re(y._redirectPersistence)}function lh(y){return R("pendingRedirect",y.config.apiKey,y.name)}function No(){return(No=(0,g.Z)(function*(y,h,p){const _=K(y);$e(y,h,is);const C=Ta(_,p);return yield sc(C,_),C._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function uc(){return(uc=(0,g.Z)(function*(y,h,p){const _=(0,k.m9)(y);$e(_.auth,h,is);const C=Ta(_.auth,p);yield sc(C,_.auth);const M=yield lc(_);return C._openRedirect(_.auth,h,"reauthViaRedirect",M)})).apply(this,arguments)}function Aa(){return(Aa=(0,g.Z)(function*(y,h,p){const _=(0,k.m9)(y);$e(_.auth,h,is);const C=Ta(_.auth,p);yield Kt(!1,_,h.providerId),yield sc(C,_.auth);const M=yield lc(_);return C._openRedirect(_.auth,h,"linkViaRedirect",M)})).apply(this,arguments)}function xa(){return(xa=(0,g.Z)(function*(y,h){return yield K(y)._initializationPromise,Ss(y,h,!1)})).apply(this,arguments)}function Ss(y,h){return $u.apply(this,arguments)}function $u(){return($u=(0,g.Z)(function*(y,h,p=!1){const _=K(y),C=Ta(_,h),q=yield new ls(_,C,p).execute();return q&&!p&&(delete q.user._redirectEventId,yield _._persistUserIfCurrent(q.user),yield _._setRedirectUser(null,h)),q})).apply(this,arguments)}function lc(y){return no.apply(this,arguments)}function no(){return(no=(0,g.Z)(function*(y){const h=Nu(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Gu{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(p=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Oo(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dh(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var _;if(h.error&&!dh(h)){const C=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";p.onError(we(this.auth,C))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const _=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(zu(h))}saveEventToCache(h){this.cachedEventUids.add(zu(h)),this.lastProcessedEventTime=Date.now()}}function zu(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function dh({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function Po(y){return cs.apply(this,arguments)}function cs(){return(cs=(0,g.Z)(function*(y,h={}){return zt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const ai=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hh=/^https?/;function by(){return(by=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield Po(y);for(const p of h)try{if(xp(p))return}catch(_){}xe(y,"unauthorized-domain")})).apply(this,arguments)}function xp(y){const h=Le(),{protocol:p,hostname:_}=new URL(h);if(y.startsWith("chrome-extension://")){const q=new URL(y);return""===q.hostname&&""===_?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&q.hostname===_}if(!hh.test(p))return!1;if(ai.test(y))return _===y;const C=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+C+"|"+C+")$","i").test(_)}const Cy=new sn(3e4,6e4);function cc(){const y=rr().___jsl;if(null!=y&&y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Wu=null;function fh(y){return Wu=Wu||function ko(y){return new Promise((h,p)=>{var _,C,M;function q(){cc(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{cc(),p(we(y,"network-request-failed"))},timeout:Cy.get()})}if(null!==(C=null===(_=rr().gapi)||void 0===_?void 0:_.iframes)&&void 0!==C&&C.Iframe)h(gapi.iframes.getContext());else{if(null===(M=rr().gapi)||void 0===M||!M.load){const de=th("iframefcb");return rr()[de]=()=>{gapi.load?q():p(we(y,"network-request-failed"))},eh(`https://apis.google.com/js/api.js?onload=${de}`).catch(je=>p(je))}q()}}).catch(h=>{throw Wu=null,h})}(y),Wu}const Rp=new sn(5e3,15e3),ZD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Np=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ew(y){const h=y.config;U(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?Rn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,_={apiKey:h.apiKey,appName:y.name,v:ne.SDK_VERSION},C=Np.get(y.config.apiHost);C&&(_.eid=C);const M=y._getFrameworks();return M.length&&(_.fw=M.join(",")),`${p}?${(0,k.xO)(_).slice(1)}`}function qu(){return qu=(0,g.Z)(function*(y){const h=yield fh(y),p=rr().gapi;return U(p,y,"internal-error"),h.open({where:document.body,url:ew(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZD,dontclear:!0},_=>new Promise(function(){var C=(0,g.Z)(function*(M,q){yield _.restyle({setHideOnLeave:!1});const de=we(y,"network-request-failed"),je=rr().setTimeout(()=>{q(de)},Rp.get());function rt(){rr().clearTimeout(je),M(_)}_.ping(rt).then(rt,()=>{q(de)})});return function(M,q){return C.apply(this,arguments)}}()))}),qu.apply(this,arguments)}const ph={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Lo{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function Na(y,h,p,_,C,M){U(y.config.authDomain,y,"auth-domain-config-required"),U(y.config.apiKey,y,"invalid-api-key");const q={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:_,v:ne.SDK_VERSION,eventId:C};if(h instanceof is){h.setDefaultLanguage(y.languageCode),q.providerId=h.providerId||"",(0,k.xb)(h.getCustomParameters())||(q.customParameters=JSON.stringify(h.getCustomParameters()));for(const[je,rt]of Object.entries(M||{}))q[je]=rt}if(h instanceof ss){const je=h.getScopes().filter(rt=>""!==rt);je.length>0&&(q.scopes=je.join(","))}y.tenantId&&(q.tid=y.tenantId);const de=q;for(const je of Object.keys(de))void 0===de[je]&&delete de[je];return`${function Op({config:y}){return y.emulator?Rn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,k.xO)(de).slice(1)}`}const Zu="webStorageSupport";class qi extends class kp{constructor(h){this.factorId=h}_process(h,p,_){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,_);case"signin":return this._finalizeSignIn(h,p.credential);default:return ye("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new qi(h)}_finalizeEnroll(h,p,_){return function ql(y,h){return zt(y,"POST","/v2/accounts/mfaEnrollment:finalize",vt(y,h))}(h,{idToken:p,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function ec(y,h){return zt(y,"POST","/v2/accounts/mfaSignIn:finalize",vt(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Oa=(()=>{class y{constructor(){}static assertion(p){return qi._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var dc="@firebase/auth",nw="0.20.11";class YD{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(_=>{var C;h((null===(C=_)||void 0===C?void 0:C.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);!p||(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){U(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function As(){return window}function Bo(){return(Bo=(0,g.Z)(function*(y,h,p){var _;const{BuildInfo:C}=As();Z(h.sessionId,"AuthEvent did not contain a session ID");const M=yield pc(h.sessionId),q={};return qt()?q.ibi=C.packageName:wt()?q.apn=C.packageName:xe(y,"operation-not-supported-in-this-environment"),C.displayName&&(q.appDisplayName=C.displayName),q.sessionId=M,Na(y,p,h.type,void 0,null!==(_=h.eventId)&&void 0!==_?_:void 0,q)})).apply(this,arguments)}function fc(){return(fc=(0,g.Z)(function*(y){const{BuildInfo:h}=As(),p={};qt()?p.iosBundleId=h.packageName:wt()?p.androidPackageName=h.packageName:xe(y,"operation-not-supported-in-this-environment"),yield Po(y,p)})).apply(this,arguments)}function xy(){return(xy=(0,g.Z)(function*(y,h,p){const{cordova:_}=As();let C=()=>{};try{yield new Promise((M,q)=>{let de=null;function je(){var Dt;M();const Er=null===(Dt=_.plugins.browsertab)||void 0===Dt?void 0:Dt.close;"function"==typeof Er&&Er(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function rt(){de||(de=window.setTimeout(()=>{q(we(y,"redirect-cancelled-by-user"))},2e3))}function It(){"visible"===(null==document?void 0:document.visibilityState)&&rt()}h.addPassiveListener(je),document.addEventListener("resume",rt,!1),wt()&&document.addEventListener("visibilitychange",It,!1),C=()=>{h.removePassiveListener(je),document.removeEventListener("resume",rt,!1),document.removeEventListener("visibilitychange",It,!1),de&&window.clearTimeout(de)}})}finally{C()}})).apply(this,arguments)}function pc(y){return gc.apply(this,arguments)}function gc(){return(gc=(0,g.Z)(function*(y){const h=Fp(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(C=>C.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Fp(y){if(Z(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let _=0;_<y.length;_++)p[_]=y.charCodeAt(_);return p}(0,k.Pz)("authIdTokenMaxAge"),function QD(y){(0,ne._registerComponent)(new se.wA("auth",(h,{options:p})=>{const _=h.getProvider("app").getImmediate(),C=h.getProvider("heartbeat"),{apiKey:M,authDomain:q}=_.options;return((de,je)=>{U(M&&!M.includes(":"),"invalid-api-key",{appName:de.name}),U(!(null!=q&&q.includes(":")),"argument-error",{appName:de.name});const rt={apiKey:M,authDomain:q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ot(y)},It=new ur(de,je,rt);return function Ue(y,h){const p=(null==h?void 0:h.persistence)||[],_=(Array.isArray(p)?p:[p]).map(re);null!=h&&h.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(_,null==h?void 0:h.popupRedirectResolver)}(It,p),It})(_,C)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,_)=>{h.getProvider("auth-internal").initialize()})),(0,ne._registerComponent)(new se.wA("auth-internal",h=>{const p=K(h.getProvider("auth").getImmediate());return new YD(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ne.registerVersion)(dc,nw,function rw(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ne.registerVersion)(dc,nw,"esm2017")}("Browser");class vh extends Gu{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function Ny(y){return wh.apply(this,arguments)}function wh(){return(wh=(0,g.Z)(function*(y){const h=yield mc()._get(Va(y));return h&&(yield mc()._remove(Va(y))),h})).apply(this,arguments)}function La(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const _=Math.floor(Math.random()*h.length);y.push(h.charAt(_))}return y.join("")}function mc(){return re(xu)}function Va(y){return R("authEvent",y.config.apiKey,y.name)}function yc(y){if(null==y||!y.includes("?"))return{};const[h,...p]=y.split("?");return(0,k.zd)(p.join("?"))}function Py(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:we("no-auth-event")}}function Ju(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function Ua(y=(0,k.z$)()){return!("file:"!==Ju()&&"ionic:"!==Ju()&&"capacitor:"!==Ju()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Dh(){try{const y=self.localStorage,h=Nu();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Ly(y=(0,k.z$)()){return function Ih(){return(0,k.w1)()&&11===(null==document?void 0:document.documentMode)}()||function $p(y=(0,k.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,k.hl)()}catch(y){return vc()&&(0,k.hl)()}return!1}function vc(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Xu(){return(function jp(){return"http:"===Ju()||"https:"===Ju()}()||(0,k.ru)()||Ua())&&!function Eh(){return(0,k.b$)()||(0,k.UG)()}()&&Dh()&&!vc()}function _c(){return Ua()&&"undefined"!=typeof document}function wc(){return(wc=(0,g.Z)(function*(){return!!_c()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Yr={LOCAL:"local",NONE:"none",SESSION:"session"},Ba=U,ds="persistence";function jo(y){return ja.apply(this,arguments)}function ja(){return(ja=(0,g.Z)(function*(y){yield y._initializationPromise;const h=el(),p=R(ds,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function el(){var y;try{return(null===(y=function bh(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const Ec=U;class Qr{constructor(){this.browserResolver=re(class Pp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=us,this._completeRedirectFn=Ss,this._overrideRedirectResult=eo}_openPopup(h,p,_,C){var M=this;return(0,g.Z)(function*(){var q;Z(null===(q=M.eventManagers[h._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const de=Na(h,p,_,Le(),C);return function Vo(y,h,p,_=500,C=600){const M=Math.max((window.screen.availHeight-C)/2,0).toString(),q=Math.max((window.screen.availWidth-_)/2,0).toString();let de="";const je=Object.assign(Object.assign({},ph),{width:_.toString(),height:C.toString(),top:M,left:q}),rt=(0,k.z$)().toLowerCase();p&&(de=ze(rt)?"_blank":p),ie(rt)&&(h=h||"http://localhost",je.scrollbars="yes");const It=Object.entries(je).reduce((Er,[Ni,Rh])=>`${Er}${Ni}=${Rh},`,"");if(function cn(y=(0,k.z$)()){var h;return qt(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(rt)&&"_self"!==de)return function Ku(y,h){const p=document.createElement("a");p.href=y,p.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(_)}(h||"",de),new Lo(null);const Dt=window.open(h||"",de,It);U(Dt,y,"popup-blocked");try{Dt.focus()}catch(Er){}return new Lo(Dt)}(h,de,Nu())})()}_openRedirect(h,p,_,C){var M=this;return(0,g.Z)(function*(){return yield M._originValidation(h),function bs(y){rr().location.href=y}(Na(h,p,_,Le(),C)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:C,promise:M}=this.eventManagers[p];return C?Promise.resolve(C):(Z(M,"If manager is not set, promise should be"),M)}const _=this.initAndGetManager(h);return this.eventManagers[p]={promise:_},_.catch(()=>{delete this.eventManagers[p]}),_}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const _=yield function Sy(y){return qu.apply(this,arguments)}(h),C=new Gu(h);return _.register("authEvent",M=>(U(null==M?void 0:M.authEvent,h,"invalid-auth-event"),{status:C.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:C},p.iframes[h._key()]=_,C})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Zu,{type:Zu},C=>{var M;const q=null===(M=null==C?void 0:C[0])||void 0===M?void 0:M[Zu];void 0!==q&&p(!!q),xe(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function X0(y){return by.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return yr()||Ee()||qt()}}),this.cordovaResolver=re(class Up{constructor(){this._redirectPersistence=us,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ss,this._overrideRedirectResult=eo}_initialize(h){var p=this;return(0,g.Z)(function*(){const _=h._key();let C=p.eventManagers.get(_);return C||(C=new vh(h),p.eventManagers.set(_,C),p.attachCallbackListeners(h,C)),C})()}_openPopup(h){xe(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,_,C){var M=this;return(0,g.Z)(function*(){!function ow(y){var h,p,_,C,M,q,de,je,rt,It;const Dt=As();U("function"==typeof(null===(h=null==Dt?void 0:Dt.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),U(void 0!==(null===(p=null==Dt?void 0:Dt.BuildInfo)||void 0===p?void 0:p.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),U("function"==typeof(null===(M=null===(C=null===(_=null==Dt?void 0:Dt.cordova)||void 0===_?void 0:_.plugins)||void 0===C?void 0:C.browsertab)||void 0===M?void 0:M.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(je=null===(de=null===(q=null==Dt?void 0:Dt.cordova)||void 0===q?void 0:q.plugins)||void 0===de?void 0:de.browsertab)||void 0===je?void 0:je.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),U("function"==typeof(null===(It=null===(rt=null==Dt?void 0:Dt.cordova)||void 0===rt?void 0:rt.InAppBrowser)||void 0===It?void 0:It.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const q=yield M._initialize(h);yield q.initialized(),q.resetRedirect(),function uh(){Un.clear()}(),yield M._originValidation(h);const de=function _h(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:La(),postBody:null,tenantId:y.tenantId,error:we(y,"no-auth-event")}}(h,_,C);yield function Ry(y,h){return mc()._set(Va(y),h)}(h,de);const je=yield function Ms(y,h,p){return Bo.apply(this,arguments)}(h,de,p),rt=yield function yh(y){const{cordova:h}=As();return new Promise(p=>{h.plugins.browsertab.isAvailable(_=>{let C=null;_?h.plugins.browsertab.openUrl(y):C=h.InAppBrowser.open(y,function Nn(y=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(C)})})}(je);return function sw(y,h,p){return xy.apply(this,arguments)}(h,q,rt)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function mh(y){return fc.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:_,handleOpenURL:C,BuildInfo:M}=As(),q=setTimeout((0,g.Z)(function*(){yield Ny(h),p.onEvent(Py())}),500),de=function(){var It=(0,g.Z)(function*(Dt){clearTimeout(q);const Er=yield Ny(h);let Ni=null;Er&&(null==Dt?void 0:Dt.url)&&(Ni=function Fa(y,h){var p,_;const C=function dr(y){const h=yc(y),p=h.link?decodeURIComponent(h.link):void 0,_=yc(p).link,C=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return yc(C).link||C||_||p||y}(h);if(C.includes("/__/auth/callback")){const M=yc(C),q=M.firebaseError?function Lp(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(M.firebaseError)):null,de=null===(_=null===(p=null==q?void 0:q.code)||void 0===p?void 0:p.split("auth/"))||void 0===_?void 0:_[1],je=de?we(de):null;return je?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:je,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:C,postBody:null}}return null}(Er,Dt.url)),p.onEvent(Ni||Py())});return function(Er){return It.apply(this,arguments)}}();void 0!==_&&"function"==typeof _.subscribe&&_.subscribe(null,de);const je=C,rt=`${M.packageName.toLowerCase()}://`;As().handleOpenURL=function(){var It=(0,g.Z)(function*(Dt){if(Dt.toLowerCase().startsWith(rt)&&de({url:Dt}),"function"==typeof je)try{je(Dt)}catch(Er){console.error(Er)}});return function(Dt){return It.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=us,this._completeRedirectFn=Ss,this._overrideRedirectResult=eo}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,_,C){var M=this;return(0,g.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(h,p,_,C)})()}_openRedirect(h,p,_,C){var M=this;return(0,g.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(h,p,_,C)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return _c()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ec(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function Vy(){return wc.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Th(y){return y.unwrap()}function By(y){return Ah(y)}function Ah(y){const{_tokenResponse:h}=y instanceof k.ZR?y.customData:y;if(!h)return null;if(!(y instanceof k.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return nc.credentialFromResult(y);const p=h.providerId;if(!p||"password"===p)return null;let _;switch(p){case"google.com":_=pa;break;case"facebook.com":_=fa;break;case"github.com":_=vu;break;case"twitter.com":_=Ar;break;default:const{oauthIdToken:C,oauthAccessToken:M,oauthTokenSecret:q,pendingToken:de,nonce:je}=h;return M||q||C||de?de?p.startsWith("saml.")?os._create(p,de):Si._fromParams({providerId:p,signInMethod:p,pendingToken:de,idToken:C,accessToken:M}):new vs(p).credential({idToken:C,accessToken:M,rawNonce:je}):null}return y instanceof k.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function hr(y,h){return h.catch(p=>{throw p instanceof k.ZR&&function Sh(y,h){var p,_;const C=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===(null===(_=h)||void 0===_?void 0:_.code))h.resolver=new lw(y,function Tu(y,h){var p;const _=(0,k.m9)(y),C=h;return U(h.customData.operationType,_,"argument-error"),U(null===(p=C.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,_,"argument-error"),Kd._fromError(_,C)}(y,h));else if(C){const M=Ah(h),q=h;M&&(q.credential=M,q.tenantId=C.tenantId||void 0,q.email=C.email||void 0,q.phoneNumber=C.phoneNumber||void 0)}}(y,p),p}).then(p=>{const C=p.user;return{operationType:p.operationType,credential:By(p),additionalUserInfo:Wl(p),user:Ki.getOrCreate(C)}})}function Dc(y,h){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,g.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:_=>hr(y,p.confirm(_))}})).apply(this,arguments)}class lw{constructor(h,p){this.resolver=p,this.auth=function Ic(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return hr(Th(this.auth),this.resolver.resolveSignIn(h))}}class Ki{constructor(h){this._delegate=h,this.multiFactor=function _a(y){const h=(0,k.m9)(y);return Kl.has(h)||Kl.set(h,yy._fromUser(h)),Kl.get(h)}(h)}static getOrCreate(h){return Ki.USER_MAP.has(h)||Ki.USER_MAP.set(h,new Ki(h)),Ki.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return hr(p.auth,O(p._delegate,h))})()}linkWithPhoneNumber(h,p){var _=this;return(0,g.Z)(function*(){return Dc(_.auth,function vi(y,h,p){return Wi.apply(this,arguments)}(_._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return hr(p.auth,function rc(y,h,p){return ju.apply(this,arguments)}(p._delegate,h,Qr))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield jo(K(p.auth)),function Mp(y,h,p){return function Dy(y,h,p){return Aa.apply(this,arguments)}(y,h,p)}(p._delegate,h,Qr)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return hr(p.auth,ae(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return Dc(this.auth,function ih(y,h,p){return Ca.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return hr(this.auth,function Ey(y,h,p){return ah.apply(this,arguments)}(this._delegate,h,Qr))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield jo(K(p.auth)),function ac(y,h,p){return function Sa(y,h,p){return uc.apply(this,arguments)}(y,h,p)}(p._delegate,h,Qr)})()}sendEmailVerification(h){return function cy(y,h){return Iu.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function si(y,h){return zl.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function yp(y,h){return va((0,k.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function Du(y,h){return va((0,k.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function wr(y,h){return At.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function hy(y,h){return Hd.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function dy(y,h,p){return jd.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ki.USER_MAP=new WeakMap;const $o=U;let xh=(()=>{class y{constructor(p,_){if(this.app=p,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:C}=p.options;$o(C,"invalid-api-key",{appName:p.name}),$o(C,"invalid-api-key",{appName:p.name});const M="undefined"!=typeof window?Qr:void 0;this._delegate=_.initialize({options:{persistence:Ho(C,p.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(De),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ki.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,_){!function Pe(y,h,p){const _=K(y);U(_._canInitEmulator,_,"emulator-config-failed"),U(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const C=!(null==p||!p.disableWarnings),M=We(h),{host:q,port:de}=function gn(y){const h=We(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const _=p[2].split("@").pop()||"",C=/^(\[[^\]]+\])(:|$)/.exec(_);if(C){const M=C[1];return{host:M,port:en(_.substr(M.length+1))}}{const[M,q]=_.split(":");return{host:M,port:en(q)}}}(h);_.config.emulator={url:`${M}//${q}${null===de?"":`:${de}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:q,port:de,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:C})}),C||function yt(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,_)}applyActionCode(p){return function xr(y,h){return ya.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return Co(this._delegate,p)}confirmPasswordReset(p,_){return function bo(y,h,p){return Mi.apply(this,arguments)}(this._delegate,p,_)}createUserWithEmailAndPassword(p,_){var C=this;return(0,g.Z)(function*(){return hr(C._delegate,function To(y,h,p){return Jn.apply(this,arguments)}(C._delegate,p,_))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function gp(y,h){return Eu.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Zs(y,h){const p=ha.parseLink(h);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){$o(Xu(),p._delegate,"operation-not-supported-in-this-environment");const _=yield function Ma(y,h){return xa.apply(this,arguments)}(p._delegate,Qr);return _?hr(p._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function uw(y,h){K(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,_,C){const{next:M,error:q,complete:de}=bc(p,_,C);return this._delegate.onAuthStateChanged(M,q,de)}onIdTokenChanged(p,_,C){const{next:M,error:q,complete:de}=bc(p,_,C);return this._delegate.onIdTokenChanged(M,q,de)}sendSignInLinkToEmail(p,_){return function Ud(y,h,p){return So.apply(this,arguments)}(this._delegate,p,_)}sendPasswordResetEmail(p,_){return function zi(y,h,p){return On.apply(this,arguments)}(this._delegate,p,_||void 0)}setPersistence(p){var _=this;return(0,g.Z)(function*(){let C;switch(function Uy(y,h){Ba(Object.values(Yr).includes(h),y,"invalid-persistence-type"),(0,k.b$)()?Ba(h!==Yr.SESSION,y,"unsupported-persistence-type"):(0,k.UG)()?Ba(h===Yr.NONE,y,"unsupported-persistence-type"):vc()?Ba(h===Yr.NONE||h===Yr.LOCAL&&(0,k.hl)(),y,"unsupported-persistence-type"):Ba(h===Yr.NONE||Dh(),y,"unsupported-persistence-type")}(_._delegate,p),p){case Yr.SESSION:C=us;break;case Yr.LOCAL:C=(yield re(ba)._isAvailable())?ba:xu;break;case Yr.NONE:C=V;break;default:return xe("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(C)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return hr(this._delegate,function ly(y){return $n.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return hr(this._delegate,Do(this._delegate,p))}signInWithCustomToken(p){return hr(this._delegate,function Jt(y,h){return Wn.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,_){return hr(this._delegate,function as(y,h,p){return Do((0,k.m9)(y),Ai.credential(h,p))}(this._delegate,p,_))}signInWithEmailLink(p,_){return hr(this._delegate,function W0(y,h,p){return Bd.apply(this,arguments)}(this._delegate,p,_))}signInWithPhoneNumber(p,_){return Dc(this._delegate,function J0(y,h,p){return rh.apply(this,arguments)}(this._delegate,p,_))}signInWithPopup(p){var _=this;return(0,g.Z)(function*(){return $o(Xu(),_._delegate,"operation-not-supported-in-this-environment"),hr(_._delegate,function Sp(y,h,p){return oh.apply(this,arguments)}(_._delegate,p,Qr))})()}signInWithRedirect(p){var _=this;return(0,g.Z)(function*(){return $o(Xu(),_._delegate,"operation-not-supported-in-this-environment"),yield jo(_._delegate),function Xn(y,h,p){return function ch(y,h,p){return No.apply(this,arguments)}(y,h,p)}(_._delegate,p,Qr)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Is(y,h){return Ds.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Yr,y})();function bc(y,h,p){let _=y;"function"!=typeof y&&({next:_,error:h,complete:p}=y);const C=_;return{next:q=>C(q&&Ki.getOrCreate(q)),error:h,complete:p}}function Ho(y,h){const p=function Ch(y,h){const p=el();if(!p)return[];const _=R(ds,y,h);switch(p.getItem(_)){case Yr.NONE:return[V];case Yr.LOCAL:return[ba,us];case Yr.SESSION:return[us];default:return[]}}(y,h);if("undefined"!=typeof self&&!p.includes(ba)&&p.push(ba),"undefined"!=typeof window)for(const _ of[xu,us])p.includes(_)||p.push(_);return p.includes(V)||p.push(V),p}class Cc{constructor(){this.providerId="phone",this._delegate=new nc(Th(Q.Z.auth()))}static credential(h,p){return nc.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}Cc.PHONE_SIGN_IN_METHOD=nc.PHONE_SIGN_IN_METHOD,Cc.PROVIDER_ID=nc.PROVIDER_ID;const jy=U;class $y{constructor(h,p,_=Q.Z.app()){var C;jy(null===(C=_.options)||void 0===C?void 0:C.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new _r(h,p,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Hy(y){y.INTERNAL.registerComponent(new se.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),_=h.getProvider("auth");return new xh(p,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ai,FacebookAuthProvider:fa,GithubAuthProvider:vu,GoogleAuthProvider:pa,OAuthProvider:vs,SAMLAuthProvider:zs,PhoneAuthProvider:Cc,PhoneMultiFactorGenerator:Oa,RecaptchaVerifier:$y,TwitterAuthProvider:Ar,Auth:xh,AuthCredential:Cn,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.24")}(Q.Z)},9751:(tt,_e,N)=>{N.d(_e,{y:()=>ge});var g=N(2961),Q=N(727),k=N(8822),ne=N(9635),he=N(2416),pe=N(576),se=N(2806);let ge=(()=>{class Y{constructor(Ie){Ie&&(this._subscribe=Ie)}lift(Ie){const De=new Y;return De.source=this,De.operator=Ie,De}subscribe(Ie,De,Ye){const me=function H(Y){return Y&&Y instanceof g.Lv||function j(Y){return Y&&(0,pe.m)(Y.next)&&(0,pe.m)(Y.error)&&(0,pe.m)(Y.complete)}(Y)&&(0,Q.Nn)(Y)}(Ie)?Ie:new g.Hp(Ie,De,Ye);return(0,se.x)(()=>{const{operator:le,source:ot}=this;me.add(le?le.call(me,ot):ot?this._subscribe(me):this._trySubscribe(me))}),me}_trySubscribe(Ie){try{return this._subscribe(Ie)}catch(De){Ie.error(De)}}forEach(Ie,De){return new(De=ce(De))((Ye,me)=>{const le=new g.Hp({next:ot=>{try{Ie(ot)}catch(nt){me(nt),le.unsubscribe()}},error:me,complete:Ye});this.subscribe(le)})}_subscribe(Ie){var De;return null===(De=this.source)||void 0===De?void 0:De.subscribe(Ie)}[k.L](){return this}pipe(...Ie){return(0,ne.U)(Ie)(this)}toPromise(Ie){return new(Ie=ce(Ie))((De,Ye)=>{let me;this.subscribe(le=>me=le,le=>Ye(le),()=>De(me))})}}return Y.create=Re=>new Y(Re),Y})();function ce(Y){var Re;return null!==(Re=null!=Y?Y:he.v.Promise)&&void 0!==Re?Re:Promise}},7579:(tt,_e,N)=>{N.d(_e,{x:()=>se});var g=N(9751),Q=N(727);const ne=(0,N(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var he=N(8737),pe=N(2806);let se=(()=>{class ce extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const Y=new ge(this,this);return Y.operator=H,Y}_throwIfClosed(){if(this.closed)throw new ne}next(H){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next(H)}})}error(H){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:Y}=this;for(;Y.length;)Y.shift().error(H)}})}complete(){(0,pe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:Y,isStopped:Re,observers:Ie}=this;return Y||Re?Q.Lc:(this.currentObservers=null,Ie.push(H),new Q.w0(()=>{this.currentObservers=null,(0,he.P)(Ie,H)}))}_checkFinalizedStatuses(H){const{hasError:Y,thrownError:Re,isStopped:Ie}=this;Y?H.error(Re):Ie&&H.complete()}asObservable(){const H=new g.y;return H.source=this,H}}return ce.create=(j,H)=>new ge(j,H),ce})();class ge extends se{constructor(j,H){super(),this.destination=j,this.source=H}next(j){var H,Y;null===(Y=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===Y||Y.call(H,j)}error(j){var H,Y;null===(Y=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===Y||Y.call(H,j)}complete(){var j,H;null===(H=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===H||H.call(j)}_subscribe(j){var H,Y;return null!==(Y=null===(H=this.source)||void 0===H?void 0:H.subscribe(j))&&void 0!==Y?Y:Q.Lc}}},2961:(tt,_e,N)=>{N.d(_e,{Hp:()=>Ye,Lv:()=>Y});var g=N(576),Q=N(727),k=N(2416),ne=N(7849);function he(){}const pe=ce("C",void 0,void 0);function ce(xe,we,Ce){return{kind:xe,value:we,error:Ce}}var j=N(3410),H=N(2806);class Y extends Q.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,Q.Nn)(we)&&we.add(this)):this.destination=nt}static create(we,Ce,$e){return new Ye(we,Ce,$e)}next(we){this.isStopped?ot(function ge(xe){return ce("N",xe,void 0)}(we),this):this._next(we)}error(we){this.isStopped?ot(function se(xe){return ce("E",void 0,xe)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?ot(pe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Re=Function.prototype.bind;function Ie(xe,we){return Re.call(xe,we)}class De{constructor(we){this.partialObserver=we}next(we){const{partialObserver:Ce}=this;if(Ce.next)try{Ce.next(we)}catch($e){me($e)}}error(we){const{partialObserver:Ce}=this;if(Ce.error)try{Ce.error(we)}catch($e){me($e)}else me(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(Ce){me(Ce)}}}class Ye extends Y{constructor(we,Ce,$e){let Fe;if(super(),(0,g.m)(we)||!we)Fe={next:null!=we?we:void 0,error:null!=Ce?Ce:void 0,complete:null!=$e?$e:void 0};else{let U;this&&k.v.useDeprecatedNextContext?(U=Object.create(we),U.unsubscribe=()=>this.unsubscribe(),Fe={next:we.next&&Ie(we.next,U),error:we.error&&Ie(we.error,U),complete:we.complete&&Ie(we.complete,U)}):Fe=we}this.destination=new De(Fe)}}function me(xe){k.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(xe):(0,ne.h)(xe)}function ot(xe,we){const{onStoppedNotification:Ce}=k.v;Ce&&j.z.setTimeout(()=>Ce(xe,we))}const nt={closed:!0,next:he,error:function le(xe){throw xe},complete:he}},727:(tt,_e,N)=>{N.d(_e,{Lc:()=>pe,w0:()=>he,Nn:()=>se});var g=N(576);const k=(0,N(3888).d)(ce=>function(H){ce(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((Y,Re)=>`${Re+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ne=N(8737);class he{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Ie of H)Ie.remove(this);else H.remove(this);const{initialTeardown:Y}=this;if((0,g.m)(Y))try{Y()}catch(Ie){j=Ie instanceof k?Ie.errors:[Ie]}const{_finalizers:Re}=this;if(Re){this._finalizers=null;for(const Ie of Re)try{ge(Ie)}catch(De){j=null!=j?j:[],De instanceof k?j=[...j,...De.errors]:j.push(De)}}if(j)throw new k(j)}}add(j){var H;if(j&&j!==this)if(this.closed)ge(j);else{if(j instanceof he){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(j)}}_hasParent(j){const{_parentage:H}=this;return H===j||Array.isArray(H)&&H.includes(j)}_addParent(j){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(j),H):H?[H,j]:j}_removeParent(j){const{_parentage:H}=this;H===j?this._parentage=null:Array.isArray(H)&&(0,ne.P)(H,j)}remove(j){const{_finalizers:H}=this;H&&(0,ne.P)(H,j),j instanceof he&&j._removeParent(this)}}he.EMPTY=(()=>{const ce=new he;return ce.closed=!0,ce})();const pe=he.EMPTY;function se(ce){return ce instanceof he||ce&&"closed"in ce&&(0,g.m)(ce.remove)&&(0,g.m)(ce.add)&&(0,g.m)(ce.unsubscribe)}function ge(ce){(0,g.m)(ce)?ce():ce.unsubscribe()}},2416:(tt,_e,N)=>{N.d(_e,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(tt,_e,N)=>{N.d(_e,{E:()=>Q});const Q=new(N(9751).y)(he=>he.complete())},8996:(tt,_e,N)=>{N.d(_e,{D:()=>we});var g=N(8421),Q=N(5363),k=N(9468),pe=N(9751),ge=N(2202),ce=N(576),j=N(9672);function Y(Ce,$e){if(!Ce)throw new Error("Iterable cannot be null");return new pe.y(Fe=>{(0,j.f)(Fe,$e,()=>{const U=Ce[Symbol.asyncIterator]();(0,j.f)(Fe,$e,()=>{U.next().then(ye=>{ye.done?Fe.complete():Fe.next(ye.value)})},0,!0)})})}var Re=N(3670),Ie=N(8239),De=N(1144),Ye=N(6495),me=N(2206),le=N(4532),ot=N(3260);function we(Ce,$e){return $e?function xe(Ce,$e){if(null!=Ce){if((0,Re.c)(Ce))return function ne(Ce,$e){return(0,g.Xf)(Ce).pipe((0,k.R)($e),(0,Q.Q)($e))}(Ce,$e);if((0,De.z)(Ce))return function se(Ce,$e){return new pe.y(Fe=>{let U=0;return $e.schedule(function(){U===Ce.length?Fe.complete():(Fe.next(Ce[U++]),Fe.closed||this.schedule())})})}(Ce,$e);if((0,Ie.t)(Ce))return function he(Ce,$e){return(0,g.Xf)(Ce).pipe((0,k.R)($e),(0,Q.Q)($e))}(Ce,$e);if((0,me.D)(Ce))return Y(Ce,$e);if((0,Ye.T)(Ce))return function H(Ce,$e){return new pe.y(Fe=>{let U;return(0,j.f)(Fe,$e,()=>{U=Ce[ge.h](),(0,j.f)(Fe,$e,()=>{let ye,Z;try{({value:ye,done:Z}=U.next())}catch(J){return void Fe.error(J)}Z?Fe.complete():Fe.next(ye)},0,!0)}),()=>(0,ce.m)(null==U?void 0:U.return)&&U.return()})}(Ce,$e);if((0,ot.L)(Ce))return function nt(Ce,$e){return Y((0,ot.Q)(Ce),$e)}(Ce,$e)}throw(0,le.z)(Ce)}(Ce,$e):(0,g.Xf)(Ce)}},8421:(tt,_e,N)=>{N.d(_e,{Xf:()=>Re});var g=N(655),Q=N(1144),k=N(8239),ne=N(9751),he=N(3670),pe=N(2206),se=N(4532),ge=N(6495),ce=N(3260),j=N(576),H=N(7849),Y=N(8822);function Re(xe){if(xe instanceof ne.y)return xe;if(null!=xe){if((0,he.c)(xe))return function Ie(xe){return new ne.y(we=>{const Ce=xe[Y.L]();if((0,j.m)(Ce.subscribe))return Ce.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(xe);if((0,Q.z)(xe))return function De(xe){return new ne.y(we=>{for(let Ce=0;Ce<xe.length&&!we.closed;Ce++)we.next(xe[Ce]);we.complete()})}(xe);if((0,k.t)(xe))return function Ye(xe){return new ne.y(we=>{xe.then(Ce=>{we.closed||(we.next(Ce),we.complete())},Ce=>we.error(Ce)).then(null,H.h)})}(xe);if((0,pe.D)(xe))return le(xe);if((0,ge.T)(xe))return function me(xe){return new ne.y(we=>{for(const Ce of xe)if(we.next(Ce),we.closed)return;we.complete()})}(xe);if((0,ce.L)(xe))return function ot(xe){return le((0,ce.Q)(xe))}(xe)}throw(0,se.z)(xe)}function le(xe){return new ne.y(we=>{(function nt(xe,we){var Ce,$e,Fe,U;return(0,g.mG)(this,void 0,void 0,function*(){try{for(Ce=(0,g.KL)(xe);!($e=yield Ce.next()).done;)if(we.next($e.value),we.closed)return}catch(ye){Fe={error:ye}}finally{try{$e&&!$e.done&&(U=Ce.return)&&(yield U.call(Ce))}finally{if(Fe)throw Fe.error}}we.complete()})})(xe,we).catch(Ce=>we.error(Ce))})}},6451:(tt,_e,N)=>{N.d(_e,{T:()=>pe});var g=N(8189),Q=N(8421),k=N(515),ne=N(7669),he=N(8996);function pe(...se){const ge=(0,ne.yG)(se),ce=(0,ne._6)(se,1/0),j=se;return j.length?1===j.length?(0,Q.Xf)(j[0]):(0,g.J)(ce)((0,he.D)(j,ge)):k.E}},5403:(tt,_e,N)=>{N.d(_e,{Q:()=>k,x:()=>Q});var g=N(2961);function Q(ne,he,pe,se,ge){return new k(ne,he,pe,se,ge)}class k extends g.Lv{constructor(he,pe,se,ge,ce,j){super(he),this.onFinalize=ce,this.shouldUnsubscribe=j,this._next=pe?function(H){try{pe(H)}catch(Y){he.error(Y)}}:super._next,this._error=ge?function(H){try{ge(H)}catch(Y){he.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=se?function(){try{se()}catch(H){he.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var he;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:pe}=this;super.unsubscribe(),!pe&&(null===(he=this.onFinalize)||void 0===he||he.call(this))}}}},4004:(tt,_e,N)=>{N.d(_e,{U:()=>k});var g=N(4482),Q=N(5403);function k(ne,he){return(0,g.e)((pe,se)=>{let ge=0;pe.subscribe((0,Q.x)(se,ce=>{se.next(ne.call(he,ce,ge++))}))})}},8189:(tt,_e,N)=>{N.d(_e,{J:()=>k});var g=N(5577),Q=N(4671);function k(ne=1/0){return(0,g.z)(Q.y,ne)}},5577:(tt,_e,N)=>{N.d(_e,{z:()=>ge});var g=N(4004),Q=N(8421),k=N(4482),ne=N(9672),he=N(5403),se=N(576);function ge(ce,j,H=1/0){return(0,se.m)(j)?ge((Y,Re)=>(0,g.U)((Ie,De)=>j(Y,Ie,Re,De))((0,Q.Xf)(ce(Y,Re))),H):("number"==typeof j&&(H=j),(0,k.e)((Y,Re)=>function pe(ce,j,H,Y,Re,Ie,De,Ye){const me=[];let le=0,ot=0,nt=!1;const xe=()=>{nt&&!me.length&&!le&&j.complete()},we=$e=>le<Y?Ce($e):me.push($e),Ce=$e=>{Ie&&j.next($e),le++;let Fe=!1;(0,Q.Xf)(H($e,ot++)).subscribe((0,he.x)(j,U=>{null==Re||Re(U),Ie?we(U):j.next(U)},()=>{Fe=!0},void 0,()=>{if(Fe)try{for(le--;me.length&&le<Y;){const U=me.shift();De?(0,ne.f)(j,De,()=>Ce(U)):Ce(U)}xe()}catch(U){j.error(U)}}))};return ce.subscribe((0,he.x)(j,we,()=>{nt=!0,xe()})),()=>{null==Ye||Ye()}}(Y,Re,ce,H)))}},5363:(tt,_e,N)=>{N.d(_e,{Q:()=>ne});var g=N(9672),Q=N(4482),k=N(5403);function ne(he,pe=0){return(0,Q.e)((se,ge)=>{se.subscribe((0,k.x)(ge,ce=>(0,g.f)(ge,he,()=>ge.next(ce),pe),()=>(0,g.f)(ge,he,()=>ge.complete(),pe),ce=>(0,g.f)(ge,he,()=>ge.error(ce),pe)))})}},3099:(tt,_e,N)=>{N.d(_e,{B:()=>he});var g=N(8421),Q=N(7579),k=N(2961),ne=N(4482);function he(se={}){const{connector:ge=(()=>new Q.x),resetOnError:ce=!0,resetOnComplete:j=!0,resetOnRefCountZero:H=!0}=se;return Y=>{let Re,Ie,De,Ye=0,me=!1,le=!1;const ot=()=>{null==Ie||Ie.unsubscribe(),Ie=void 0},nt=()=>{ot(),Re=De=void 0,me=le=!1},xe=()=>{const we=Re;nt(),null==we||we.unsubscribe()};return(0,ne.e)((we,Ce)=>{Ye++,!le&&!me&&ot();const $e=De=null!=De?De:ge();Ce.add(()=>{Ye--,0===Ye&&!le&&!me&&(Ie=pe(xe,H))}),$e.subscribe(Ce),!Re&&Ye>0&&(Re=new k.Hp({next:Fe=>$e.next(Fe),error:Fe=>{le=!0,ot(),Ie=pe(nt,ce,Fe),$e.error(Fe)},complete:()=>{me=!0,ot(),Ie=pe(nt,j),$e.complete()}}),(0,g.Xf)(we).subscribe(Re))})(Y)}}function pe(se,ge,...ce){if(!0===ge)return void se();if(!1===ge)return;const j=new k.Hp({next:()=>{j.unsubscribe(),se()}});return ge(...ce).subscribe(j)}},9468:(tt,_e,N)=>{N.d(_e,{R:()=>Q});var g=N(4482);function Q(k,ne=0){return(0,g.e)((he,pe)=>{pe.add(k.schedule(()=>he.subscribe(pe),ne))})}},8505:(tt,_e,N)=>{N.d(_e,{b:()=>he});var g=N(576),Q=N(4482),k=N(5403),ne=N(4671);function he(pe,se,ge){const ce=(0,g.m)(pe)||se||ge?{next:pe,error:se,complete:ge}:pe;return ce?(0,Q.e)((j,H)=>{var Y;null===(Y=ce.subscribe)||void 0===Y||Y.call(ce);let Re=!0;j.subscribe((0,k.x)(H,Ie=>{var De;null===(De=ce.next)||void 0===De||De.call(ce,Ie),H.next(Ie)},()=>{var Ie;Re=!1,null===(Ie=ce.complete)||void 0===Ie||Ie.call(ce),H.complete()},Ie=>{var De;Re=!1,null===(De=ce.error)||void 0===De||De.call(ce,Ie),H.error(Ie)},()=>{var Ie,De;Re&&(null===(Ie=ce.unsubscribe)||void 0===Ie||Ie.call(ce)),null===(De=ce.finalize)||void 0===De||De.call(ce)}))}):ne.y}},4408:(tt,_e,N)=>{N.d(_e,{o:()=>he});var g=N(727);class Q extends g.w0{constructor(se,ge){super()}schedule(se,ge=0){return this}}const k={setInterval(pe,se,...ge){const{delegate:ce}=k;return null!=ce&&ce.setInterval?ce.setInterval(pe,se,...ge):setInterval(pe,se,...ge)},clearInterval(pe){const{delegate:se}=k;return((null==se?void 0:se.clearInterval)||clearInterval)(pe)},delegate:void 0};var ne=N(8737);class he extends Q{constructor(se,ge){super(se,ge),this.scheduler=se,this.work=ge,this.pending=!1}schedule(se,ge=0){var ce;if(this.closed)return this;this.state=se;const j=this.id,H=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId(H,j,ge)),this.pending=!0,this.delay=ge,this.id=null!==(ce=this.id)&&void 0!==ce?ce:this.requestAsyncId(H,this.id,ge),this}requestAsyncId(se,ge,ce=0){return k.setInterval(se.flush.bind(se,this),ce)}recycleAsyncId(se,ge,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return ge;null!=ge&&k.clearInterval(ge)}execute(se,ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(se,ge);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(se,ge){let j,ce=!1;try{this.work(se)}catch(H){ce=!0,j=H||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:se,scheduler:ge}=this,{actions:ce}=ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ne.P)(ce,this),null!=se&&(this.id=this.recycleAsyncId(ge,se,null)),this.delay=null,super.unsubscribe()}}}},7565:(tt,_e,N)=>{N.d(_e,{v:()=>k});var g=N(6063);class Q{constructor(he,pe=Q.now){this.schedulerActionCtor=he,this.now=pe}schedule(he,pe=0,se){return new this.schedulerActionCtor(this,he).schedule(se,pe)}}Q.now=g.l.now;class k extends Q{constructor(he,pe=Q.now){super(he,pe),this.actions=[],this._active=!1}flush(he){const{actions:pe}=this;if(this._active)return void pe.push(he);let se;this._active=!0;do{if(se=he.execute(he.state,he.delay))break}while(he=pe.shift());if(this._active=!1,se){for(;he=pe.shift();)he.unsubscribe();throw se}}}},4986:(tt,_e,N)=>{N.d(_e,{z:()=>k});var g=N(4408);const k=new(N(7565).v)(g.o)},6063:(tt,_e,N)=>{N.d(_e,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(tt,_e,N)=>{N.d(_e,{z:()=>g});const g={setTimeout(Q,k,...ne){const{delegate:he}=g;return null!=he&&he.setTimeout?he.setTimeout(Q,k,...ne):setTimeout(Q,k,...ne)},clearTimeout(Q){const{delegate:k}=g;return((null==k?void 0:k.clearTimeout)||clearTimeout)(Q)},delegate:void 0}},2202:(tt,_e,N)=>{N.d(_e,{h:()=>Q});const Q=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(tt,_e,N)=>{N.d(_e,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(tt,_e,N)=>{N.d(_e,{_6:()=>pe,jO:()=>ne,yG:()=>he});var g=N(576);function k(se){return se[se.length-1]}function ne(se){return(0,g.m)(k(se))?se.pop():void 0}function he(se){return function Q(se){return se&&(0,g.m)(se.schedule)}(k(se))?se.pop():void 0}function pe(se,ge){return"number"==typeof k(se)?se.pop():ge}},8737:(tt,_e,N)=>{function g(Q,k){if(Q){const ne=Q.indexOf(k);0<=ne&&Q.splice(ne,1)}}N.d(_e,{P:()=>g})},3888:(tt,_e,N)=>{function g(Q){const ne=Q(he=>{Error.call(he),he.stack=(new Error).stack});return ne.prototype=Object.create(Error.prototype),ne.prototype.constructor=ne,ne}N.d(_e,{d:()=>g})},2806:(tt,_e,N)=>{N.d(_e,{O:()=>ne,x:()=>k});var g=N(2416);let Q=null;function k(he){if(g.v.useDeprecatedSynchronousErrorHandling){const pe=!Q;if(pe&&(Q={errorThrown:!1,error:null}),he(),pe){const{errorThrown:se,error:ge}=Q;if(Q=null,se)throw ge}}else he()}function ne(he){g.v.useDeprecatedSynchronousErrorHandling&&Q&&(Q.errorThrown=!0,Q.error=he)}},9672:(tt,_e,N)=>{function g(Q,k,ne,he=0,pe=!1){const se=k.schedule(function(){ne(),pe?Q.add(this.schedule(null,he)):this.unsubscribe()},he);if(Q.add(se),!pe)return se}N.d(_e,{f:()=>g})},4671:(tt,_e,N)=>{function g(Q){return Q}N.d(_e,{y:()=>g})},1144:(tt,_e,N)=>{N.d(_e,{z:()=>g});const g=Q=>Q&&"number"==typeof Q.length&&"function"!=typeof Q},2206:(tt,_e,N)=>{N.d(_e,{D:()=>Q});var g=N(576);function Q(k){return Symbol.asyncIterator&&(0,g.m)(null==k?void 0:k[Symbol.asyncIterator])}},576:(tt,_e,N)=>{function g(Q){return"function"==typeof Q}N.d(_e,{m:()=>g})},3670:(tt,_e,N)=>{N.d(_e,{c:()=>k});var g=N(8822),Q=N(576);function k(ne){return(0,Q.m)(ne[g.L])}},6495:(tt,_e,N)=>{N.d(_e,{T:()=>k});var g=N(2202),Q=N(576);function k(ne){return(0,Q.m)(null==ne?void 0:ne[g.h])}},8239:(tt,_e,N)=>{N.d(_e,{t:()=>Q});var g=N(576);function Q(k){return(0,g.m)(null==k?void 0:k.then)}},3260:(tt,_e,N)=>{N.d(_e,{L:()=>ne,Q:()=>k});var g=N(655),Q=N(576);function k(he){return(0,g.FC)(this,arguments,function*(){const se=he.getReader();try{for(;;){const{value:ge,done:ce}=yield(0,g.qq)(se.read());if(ce)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(ge)}}finally{se.releaseLock()}})}function ne(he){return(0,Q.m)(null==he?void 0:he.getReader)}},4482:(tt,_e,N)=>{N.d(_e,{A:()=>Q,e:()=>k});var g=N(576);function Q(ne){return(0,g.m)(null==ne?void 0:ne.lift)}function k(ne){return he=>{if(Q(he))return he.lift(function(pe){try{return ne(pe,this)}catch(se){this.error(se)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(tt,_e,N)=>{N.d(_e,{U:()=>k,z:()=>Q});var g=N(4671);function Q(...ne){return k(ne)}function k(ne){return 0===ne.length?g.y:1===ne.length?ne[0]:function(pe){return ne.reduce((se,ge)=>ge(se),pe)}}},7849:(tt,_e,N)=>{N.d(_e,{h:()=>k});var g=N(2416),Q=N(3410);function k(ne){Q.z.setTimeout(()=>{const{onUnhandledError:he}=g.v;if(!he)throw ne;he(ne)})}},4532:(tt,_e,N)=>{function g(Q){return new TypeError(`You provided ${null!==Q&&"object"==typeof Q?"an invalid object":`'${Q}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(_e,{z:()=>g})},655:(tt,_e,N)=>{function ne(Z,J){var re={};for(var te in Z)Object.prototype.hasOwnProperty.call(Z,te)&&J.indexOf(te)<0&&(re[te]=Z[te]);if(null!=Z&&"function"==typeof Object.getOwnPropertySymbols){var Ue=0;for(te=Object.getOwnPropertySymbols(Z);Ue<te.length;Ue++)J.indexOf(te[Ue])<0&&Object.prototype.propertyIsEnumerable.call(Z,te[Ue])&&(re[te[Ue]]=Z[te[Ue]])}return re}function ge(Z,J,re,te){return new(re||(re=Promise))(function(Le,at){function Zt(sn){try{He(te.next(sn))}catch(Rn){at(Rn)}}function Nt(sn){try{He(te.throw(sn))}catch(Rn){at(Rn)}}function He(sn){sn.done?Le(sn.value):function Ue(Le){return Le instanceof re?Le:new re(function(at){at(Le)})}(sn.value).then(Zt,Nt)}He((te=te.apply(Z,J||[])).next())})}function me(Z){return this instanceof me?(this.v=Z,this):new me(Z)}function le(Z,J,re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ue,te=re.apply(Z,J||[]),Le=[];return Ue={},at("next"),at("throw"),at("return"),Ue[Symbol.asyncIterator]=function(){return this},Ue;function at(on){te[on]&&(Ue[on]=function(Xt){return new Promise(function(Gn,vt){Le.push([on,Xt,Gn,vt])>1||Zt(on,Xt)})})}function Zt(on,Xt){try{!function Nt(on){on.value instanceof me?Promise.resolve(on.value.v).then(He,sn):Rn(Le[0][2],on)}(te[on](Xt))}catch(Gn){Rn(Le[0][3],Gn)}}function He(on){Zt("next",on)}function sn(on){Zt("throw",on)}function Rn(on,Xt){on(Xt),Le.shift(),Le.length&&Zt(Le[0][0],Le[0][1])}}function nt(Z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var re,J=Z[Symbol.asyncIterator];return J?J.call(Z):(Z=function Y(Z){var J="function"==typeof Symbol&&Symbol.iterator,re=J&&Z[J],te=0;if(re)return re.call(Z);if(Z&&"number"==typeof Z.length)return{next:function(){return Z&&te>=Z.length&&(Z=void 0),{value:Z&&Z[te++],done:!Z}}};throw new TypeError(J?"Object is not iterable.":"Symbol.iterator is not defined.")}(Z),re={},te("next"),te("throw"),te("return"),re[Symbol.asyncIterator]=function(){return this},re);function te(Le){re[Le]=Z[Le]&&function(at){return new Promise(function(Zt,Nt){!function Ue(Le,at,Zt,Nt){Promise.resolve(Nt).then(function(He){Le({value:He,done:Zt})},at)}(Zt,Nt,(at=Z[Le](at)).done,at.value)})}}}N.d(_e,{FC:()=>le,KL:()=>nt,_T:()=>ne,mG:()=>ge,qq:()=>me})},5e3:(tt,_e,N)=>{N.d(_e,{$8M:()=>ec,$Z:()=>sf,AFp:()=>VI,AaK:()=>ge,CHM:()=>kt,CRH:()=>EI,CZH:()=>km,CqO:()=>Qv,D6c:()=>vT,EJc:()=>qC,EpF:()=>Zv,F4k:()=>uE,FYo:()=>C,FiY:()=>Ma,G48:()=>nD,GfV:()=>je,Gpc:()=>H,JOm:()=>Zi,KtG:()=>zi,LFG:()=>Xn,LSH:()=>Up,Lbi:()=>WC,Lck:()=>gd,MMx:()=>gm,NdJ:()=>jg,OlP:()=>Tn,PXZ:()=>nT,Q6J:()=>Ug,QGY:()=>Yv,QP$:()=>ze,Qsj:()=>M,R0b:()=>Ui,RDi:()=>ew,Rgc:()=>hu,SBq:()=>h,Sil:()=>Z_,Suo:()=>wI,TTD:()=>ss,TgZ:()=>uo,VKq:()=>kr,WLB:()=>aI,X6Q:()=>$m,XFs:()=>Qe,Xpm:()=>Ae,Xts:()=>Eh,Y36:()=>En,YKP:()=>ea,YNc:()=>Vs,Yjl:()=>$,Yz7:()=>Xt,Z0I:()=>Fr,ZZ4:()=>uD,_Bn:()=>Af,_UZ:()=>pl,_Vd:()=>$a,_c5:()=>mT,_uU:()=>_f,aQg:()=>Km,c2e:()=>$I,cJS:()=>vt,cg1:()=>Qg,dDg:()=>Q_,dqk:()=>Lt,eFA:()=>jm,ekj:()=>qg,eoX:()=>J_,f3M:()=>No,g9A:()=>Fm,h0i:()=>Dl,hGG:()=>yT,hij:()=>Zg,iGM:()=>Dm,ifc:()=>st,ip1:()=>LI,jDz:()=>T_,kL8:()=>Pr,lG2:()=>R,lqb:()=>Qr,lri:()=>Bm,n5z:()=>Cs,oAB:()=>Pt,oxw:()=>tu,q4F:()=>rt,qLn:()=>tl,qOj:()=>kg,qZA:()=>Kc,rWj:()=>qI,sBO:()=>sT,sIi:()=>$c,s_b:()=>Id,soG:()=>zf,tb:()=>Lm,tp0:()=>Ss,uIk:()=>_n,vHH:()=>De,vpe:()=>Di,wAp:()=>bt,xp6:()=>qa,z2F:()=>Yf,zSh:()=>jo,zs3:()=>Ka});var g=N(7579),Q=N(727),k=N(9751),ne=N(6451),he=N(3099);function pe(i){for(let s in i)if(i[s]===pe)return s;throw Error("Could not find renamed property on target object.")}function se(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ge(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ge).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ce(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const j=pe({__forward_ref__:pe});function H(i){return i.__forward_ref__=H,i.toString=function(){return ge(this())},i}function Y(i){return Re(i)?i():i}function Re(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===H}class De extends Error{constructor(s,a){super(function Ye(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function me(i){return"string"==typeof i?i:null==i?"":String(i)}function we(i,s){throw new De(-201,!1)}function Nt(i,s){null==i&&function He(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Xt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function vt(i){return{providers:i.providers||[],imports:i.imports||[]}}function zt(i){return pi(i,Yn)||pi(i,Qn)}function Fr(i){return null!==zt(i)}function pi(i,s){return i.hasOwnProperty(s)?i[s]:null}function Kr(i){return i&&(i.hasOwnProperty(Lr)||i.hasOwnProperty(Ti))?i[Lr]:null}const Yn=pe({\u0275prov:pe}),Lr=pe({\u0275inj:pe}),Qn=pe({ngInjectableDef:pe}),Ti=pe({ngInjectorDef:pe});var Qe=(()=>((Qe=Qe||{})[Qe.Default=0]="Default",Qe[Qe.Host=1]="Host",Qe[Qe.Self=2]="Self",Qe[Qe.SkipSelf=4]="SkipSelf",Qe[Qe.Optional=8]="Optional",Qe))();let yn;function Dn(i){const s=yn;return yn=i,s}function Tr(i,s,a){const l=zt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Qe.Optional?null:void 0!==s?s:void we(ge(i))}function bn(i){return{toString:i}.toString()}var Fn=(()=>((Fn=Fn||{})[Fn.OnPush=0]="OnPush",Fn[Fn.Default=1]="Default",Fn))(),st=(()=>{return(i=st||(st={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",st;var i})();const Lt=(()=>"undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof global&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self)(),er={},St=[],ii=pe({\u0275cmp:pe}),Yt=pe({\u0275dir:pe}),gr=pe({\u0275pipe:pe}),Qt=pe({\u0275mod:pe}),Ln=pe({\u0275fac:pe}),ar=pe({__NG_ELEMENT_ID__:pe});let Je=0;function Ae(i){return bn(()=>{const a=!0===i.standalone,l={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Fn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||St,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||st.Emulated,id:"c"+Je++,styles:i.styles||St,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,v=i.features;return d.inputs=V(i.inputs,l),d.outputs=V(i.outputs),v&&v.forEach(E=>E(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(_t).filter(Et):null,d.pipeDefs=f?()=>("function"==typeof f?f():f).map(Ee).filter(Et):null,d})}function _t(i){return F(i)||ie(i)}function Et(i){return null!==i}function Pt(i){return bn(()=>({type:i.type,bootstrap:i.bootstrap||St,declarations:i.declarations||St,imports:i.imports||St,exports:i.exports||St,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function V(i,s){if(null==i)return er;const a={};for(const l in i)if(i.hasOwnProperty(l)){let d=i[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=l,s&&(s[d]=f)}return a}const R=Ae;function $(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function F(i){return i[ii]||null}function ie(i){return i[Yt]||null}function Ee(i){return i[gr]||null}function ze(i){const s=F(i)||ie(i)||Ee(i);return null!==s&&s.standalone}function it(i,s){const a=i[Qt]||null;if(!a&&!0===s)throw new Error(`Type ${ge(i)} does not have '\u0275mod' property.`);return a}function Sr(i){return Array.isArray(i)&&"object"==typeof i[1]}function cr(i){return Array.isArray(i)&&!0===i[1]}function Hs(i){return 0!=(8&i.flags)}function ns(i){return 2==(2&i.flags)}function la(i){return 1==(1&i.flags)}function Ur(i){return null!==i.template}function Ll(i){return 0!=(256&i[2])}function Ai(i,s){return i.hasOwnProperty(Ln)?i[Ln]:null}class is{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function ss(){return vs}function vs(i){return i.type.prototype.ngOnChanges&&(i.setInput=pa),fa}function fa(){const i=_u(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===er)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function pa(i,s,a,l){const d=_u(i)||function os(i,s){return i[vu]=s}(i,{previous:er,current:null}),f=d.current||(d.current={}),v=d.previous,E=this.declaredInputs[a],I=v[E];f[E]=new is(I&&I.currentValue,s,v===er),i[l]=s}ss.ngInherit=!0;const vu="__ngSimpleChanges__";function _u(i){return i[vu]||null}function $n(i){for(;Array.isArray(i);)i=i[0];return i}function _s(i,s){return $n(s[i])}function si(i,s){return $n(s[i.index])}function mi(i,s){return i.data[s]}function Kt(i,s){const a=s[i];return Sr(a)?a:a[0]}function Ks(i){return 64==(64&i[2])}function Gi(i,s){return null==s?null:i[s]}function ma(i){i[18]=0}function Do(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const x={lFrame:hy(null),bindingsEnabled:!0};function lt(){return x.bindingsEnabled}function Te(){return x.lFrame.lView}function gt(){return x.lFrame.tView}function kt(i){return x.lFrame.contextLView=i,i[8]}function zi(i){return x.lFrame.contextLView=null,i}function On(){let i=bo();for(;null!==i&&64===i.type;)i=i.parent;return i}function bo(){return x.lFrame.currentTNode}function xr(i,s){const a=x.lFrame;a.currentTNode=i,a.isParent=s}function ya(){return x.lFrame.isParent}function Jn(){const i=x.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function So(){return x.lFrame.bindingIndex++}function q0(i,s){const a=x.lFrame;a.bindingIndex=a.bindingRootIndex=i,gp(s)}function gp(i){x.lFrame.currentDirectiveIndex=i}function cy(){return x.lFrame.currentQueryIndex}function Iu(i){x.lFrame.currentQueryIndex=i}function dy(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function jd(i,s,a){if(a&Qe.SkipSelf){let d=s,f=i;for(;!(d=d.parent,null!==d||a&Qe.Host||(d=dy(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;s=d,i=f}const l=x.lFrame=$d();return l.currentTNode=s,l.lView=i,!0}function mp(i){const s=$d(),a=i[1];x.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function $d(){const i=x.lFrame,s=null===i?null:i.child;return null===s?hy(i):s}function hy(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Hd(){const i=x.lFrame;return x.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const yp=Hd;function Du(){const i=Hd();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function vr(){return x.lFrame.selectedIndex}function yi(i){x.lFrame.selectedIndex=i}function Vn(){const i=x.lFrame;return mi(i.tView,i.selectedIndex)}function bu(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:b,ngOnDestroy:S}=f;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),b&&((i.viewHooks||(i.viewHooks=[])).push(a,b),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,b)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function Cu(i,s,a){qd(i,s,3,a)}function Ao(i,s,a,l){(3&i[2])===a&&qd(i,s,a,l)}function Wd(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function qd(i,s,a,l){const f=null!=l?l:-1,v=s.length-1;let E=0;for(let I=void 0!==l?65535&i[18]:0;I<v;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=l&&E>=l)break}else s[I]<0&&(i[18]+=65536),(E<f||-1==f)&&(vp(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function vp(i,s,a,l){const d=a[l]<0,f=a[l+1],E=i[d?-a[l]:a[l]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class Qs{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function _a(i,s,a){let l=0;for(;l<a.length;){const d=a[l];if("number"==typeof d){if(0!==d)break;l++;const f=a[l++],v=a[l++],E=a[l++];i.setAttribute(s,v,E,f)}else{const f=d,v=a[++l];Zl(f)?i.setProperty(s,f,v):i.setAttribute(s,f,v),l++}}return l}function Su(i){return 3===i||4===i||6===i}function Zl(i){return 64===i.charCodeAt(0)}function Au(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const d=s[l];"number"==typeof d?a=d:0===a||wp(i,a,d,null,-1===a||2===a?s[++l]:null)}}return i}function wp(i,s,a,l,d){let f=0,v=i.length;if(-1===s)v=-1;else for(;f<i.length;){const E=i[f++];if("number"==typeof E){if(E===s){v=-1;break}if(E>s){v=f-1;break}}}for(;f<i.length;){const E=i[f];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==d&&(i[f+1]=d));if(l===i[f+1])return void(i[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==v&&(i.splice(v,0,s),f=v+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==d&&i.splice(f++,0,d)}function Ep(i){return-1!==i}function Mu(i){return 32767&i}function Ru(i,s){let a=function xu(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let us=!0;function Yl(i){const s=us;return us=i,s}let rr=0;const bs={};function Ou(i,s){const a=Ql(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,Pu(l.data,i),Pu(s,null),Pu(l.blueprint,null));const d=Jl(i,s),f=i.injectorIndex;if(Ep(d)){const v=Mu(d),E=Ru(d,s),I=E[1].data;for(let b=0;b<8;b++)s[f+b]=E[v+b]|I[v+b]}return s[f+8]=d,f}function Pu(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Ql(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Jl(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,d=s;for(;null!==d;){if(l=Xl(d),null===l)return-1;if(a++,d=d[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function wa(i,s,a){!function Yd(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(ar)&&(l=a[ar]),null==l&&(l=a[ar]=rr++);const d=255&l;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function Ea(i,s,a){if(a&Qe.Optional||void 0!==i)return i;we()}function Qd(i,s,a,l){if(a&Qe.Optional&&void 0===l&&(l=null),0==(a&(Qe.Self|Qe.Host))){const d=i[9],f=Dn(void 0);try{return d?d.get(s,l,a&Qe.Optional):Tr(s,l,a&Qe.Optional)}finally{Dn(f)}}return Ea(l,0,a)}function ku(i,s,a,l=Qe.Default,d){if(null!==i){if(1024&s[2]){const v=function ba(i,s,a,l,d){let f=i,v=s;for(;null!==f&&null!==v&&1024&v[2]&&!(256&v[2]);){const E=Fu(f,v,a,l|Qe.Self,bs);if(E!==bs)return E;let I=f.parent;if(!I){const b=v[21];if(b){const S=b.get(a,bs,l);if(S!==bs)return S}I=Xl(v),v=v[15]}f=I}return d}(i,s,a,l,bs);if(v!==bs)return v}const f=Fu(i,s,a,l,bs);if(f!==bs)return f}return Qd(s,a,l,d)}function Fu(i,s,a,l,d){const f=function Jd(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ar)?i[ar]:void 0;return"number"==typeof s?s>=0?255&s:Cp:s}(a);if("function"==typeof f){if(!jd(s,i,l))return l&Qe.Host?Ea(d,0,l):Qd(s,a,l,d);try{const v=f(l);if(null!=v||l&Qe.Optional)return v;we()}finally{yp()}}else if("number"==typeof f){let v=null,E=Ql(i,s),I=-1,b=l&Qe.Host?s[16][6]:null;for((-1===E||l&Qe.SkipSelf)&&(I=-1===E?Jl(i,s):s[E+8],-1!==I&&Xd(l,!1)?(v=s[1],E=Mu(I),s=Ru(I,s)):E=-1);-1!==E;){const S=s[1];if(bp(f,E,S.data)){const P=K0(E,s,a,v,l,b);if(P!==bs)return P}I=s[E+8],-1!==I&&Xd(l,s[1].data[E+8]===b)&&bp(f,E,s)?(v=S,E=Mu(I),s=Ru(I,s)):E=-1}}return d}function K0(i,s,a,l,d,f){const v=s[1],E=v.data[i+8],S=Ia(E,v,a,null==l?ns(E)&&us:l!=v&&0!=(3&E.type),d&Qe.Host&&f===E);return null!==S?Js(s,v,S,E):bs}function Ia(i,s,a,l,d){const f=i.providerIndexes,v=s.data,E=1048575&f,I=i.directiveStart,S=f>>20,z=d?E+S:i.directiveEnd;for(let ee=l?E:E+S;ee<z;ee++){const ve=v[ee];if(ee<I&&a===ve||ee>=I&&ve.type===a)return ee}if(d){const ee=v[I];if(ee&&Ur(ee)&&ee.type===a)return I}return null}function Js(i,s,a,l){let d=i[a];const f=s.data;if(function Mo(i){return i instanceof Qs}(d)){const v=d;v.resolving&&function ot(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new De(-200,`Circular dependency in DI detected for ${i}${a}`)}(function le(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():me(i)}(f[a]));const E=Yl(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?Dn(v.injectImpl):null;jd(i,l,Qe.Default);try{d=i[a]=v.factory(void 0,f,i,l),s.firstCreatePass&&a>=l.directiveStart&&function zd(i,s,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=s.type.prototype;if(l){const v=vs(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==I&&Dn(I),Yl(E),v.resolving=!1,yp()}}return d}function bp(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Xd(i,s){return!(i&Qe.Self||i&Qe.Host&&s)}class Da{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return ku(this._tNode,this._lView,s,l,a)}}function Cp(){return new Da(On(),Te())}function Cs(i){return bn(()=>{const s=i.prototype.constructor,a=s[Ln]||Tp(s),l=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==l;){const f=d[Ln]||Tp(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function Tp(i){return Re(i)?()=>{const s=Tp(Y(i));return s&&s()}:Ai(i)}function Xl(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function ec(i){return function Dp(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const f=a[d];if(Su(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(f===s)return a[d+1];d+=2}}}return null}(On(),i)}const xo="__parameters__";function Uu(i,s,a){return bn(()=>{const l=function th(i){return function(...a){if(i){const l=i(...a);for(const d in l)this[d]=l[d]}}}(s);function d(...f){if(this instanceof d)return l.apply(this,f),this;const v=new d(...f);return E.annotation=v,E;function E(I,b,S){const P=I.hasOwnProperty(xo)?I[xo]:Object.defineProperty(I,xo,{value:[]})[xo];for(;P.length<=S;)P.push(null);return(P[S]=P[S]||[]).push(v),I}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class Tn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Xt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function vi(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),vi(l,s)):s!==i&&s.push(l)}return s}function Wi(i,s){i.forEach(a=>Array.isArray(a)?Wi(a,s):s(a))}function ih(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Ca(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function oi(i,s,a){let l=Ro(i,s);return l>=0?i[1|l]=a:(l=~l,function At(i,s,a,l){let d=i.length;if(d==s)i.push(a,l);else if(1===d)i.push(l,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function sh(i,s){const a=Ro(i,s);if(a>=0)return i[1|a]}function Ro(i,s){return function Ri(i,s,a){let l=0,d=i.length>>a;for(;d!==l;){const f=l+(d-l>>1),v=i[f<<a];if(s===v)return f<<a;v>s?d=f:l=f+1}return~(d<<a)}(i,s,1)}const Un={},ls="__NG_DI_FLAG__",ic="ngTempTokenPath",sc=/\n/gm,uh="__source";let eo;function to(i){const s=eo;return eo=i,s}function lh(i,s=Qe.Default){if(void 0===eo)throw new De(-203,!1);return null===eo?Tr(i,void 0,s):eo.get(i,s&Qe.Optional?null:void 0,s)}function Xn(i,s=Qe.Default){return(function ri(){return yn}()||lh)(Y(i),s)}function No(i,s=Qe.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),Xn(i,s)}function ac(i){const s=[];for(let a=0;a<i.length;a++){const l=Y(i[a]);if(Array.isArray(l)){if(0===l.length)throw new De(900,!1);let d,f=Qe.Default;for(let v=0;v<l.length;v++){const E=l[v],I=uc(E);"number"==typeof I?-1===I?d=E.token:f|=I:d=E}s.push(Xn(d,f))}else s.push(Xn(l))}return s}function Sa(i,s){return i[ls]=s,i.prototype[ls]=s,i}function uc(i){return i[ls]}const Ma=Sa(Uu("Optional"),8),Ss=Sa(Uu("SkipSelf"),4);let Np;function ew(i){Np=i}class Na{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function qi(i){return i instanceof Na?i.changingThisBreaksApplicationSecurity:i}const As=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var dr=(()=>((dr=dr||{})[dr.NONE=0]="NONE",dr[dr.HTML=1]="HTML",dr[dr.STYLE=2]="STYLE",dr[dr.SCRIPT=3]="SCRIPT",dr[dr.URL=4]="URL",dr[dr.RESOURCE_URL=5]="RESOURCE_URL",dr))();function Up(i){const s=function Ua(){const i=Te();return i&&i[12]}();return s?s.sanitize(dr.URL,i)||"":function Oa(i,s){const a=function dc(i){return i instanceof Na&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?qi(i):function ka(i){return(i=String(i)).match(As)?i:"unsafe:"+i}(me(i))}const Eh=new Tn("ENVIRONMENT_INITIALIZER"),Ih=new Tn("INJECTOR",-1),$p=new Tn("INJECTOR_DEF_TYPES");class Ly{get(s,a=Un){if(a===Un){const l=new Error(`NullInjectorError: No provider for ${ge(s)}!`);throw l.name="NullInjectorError",l}return a}}function Dh(...i){return{\u0275providers:vc(0,i)}}function vc(i,...s){const a=[],l=new Set;let d;return Wi(s,f=>{const v=f;_c(v,a,[],l)&&(d||(d=[]),d.push(v))}),void 0!==d&&Xu(d,a),a}function Xu(i,s){for(let a=0;a<i.length;a++){const{providers:d}=i[a];Wi(d,f=>{s.push(f)})}}function _c(i,s,a,l){if(!(i=Y(i)))return!1;let d=null,f=Kr(i);const v=!f&&F(i);if(f||v){if(v&&!v.standalone)return!1;d=i}else{const I=i.ngModule;if(f=Kr(I),!f)return!1;d=I}const E=l.has(d);if(v){if(E)return!1;if(l.add(d),v.dependencies){const I="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const b of I)_c(b,s,a,l)}}else{if(!f)return!1;{if(null!=f.imports&&!E){let b;l.add(d);try{Wi(f.imports,S=>{_c(S,s,a,l)&&(b||(b=[]),b.push(S))})}finally{}void 0!==b&&Xu(b,s)}if(!E){const b=Ai(d)||(()=>new d);s.push({provide:d,useFactory:b,deps:St},{provide:$p,useValue:d,multi:!0},{provide:Eh,useValue:()=>Xn(d),multi:!0})}const I=f.providers;null==I||E||Wi(I,S=>{s.push(S)})}}return d!==i&&void 0!==i.providers}const wc=pe({provide:String,useValue:pe});function bh(i){return null!==i&&"object"==typeof i&&wc in i}function ds(i){return"function"==typeof i}const jo=new Tn("Set Injector scope."),ja={},Ch={};let el;function Ec(){return void 0===el&&(el=new Ly),el}class Qr{}class Th extends Qr{constructor(s,a,l,d){super(),this.parent=a,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,$o(s,v=>this.processProvider(v)),this.records.set(Ih,hr(void 0,this)),d.has("environment")&&this.records.set(Qr,hr(void 0,this));const f=this.records.get(jo);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get($p.multi,St,Qe.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=to(this),l=Dn(void 0);try{return s()}finally{to(a),Dn(l)}}get(s,a=Un,l=Qe.Default){this.assertNotDestroyed();const d=to(this),f=Dn(void 0);try{if(!(l&Qe.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function lw(i){return"function"==typeof i||"object"==typeof i&&i instanceof Tn}(s)&&zt(s);E=I&&this.injectableDefInScope(I)?hr(Ic(s),ja):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(l&Qe.Self?Ec():this.parent).get(s,a=l&Qe.Optional&&a===Un?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[ic]=v[ic]||[]).unshift(ge(s)),d)throw v;return function Mp(i,s,a,l){const d=i[ic];throw s[uh]&&d.unshift(s[uh]),i.message=function Dy(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=ge(s);if(Array.isArray(s))d=s.map(ge).join(" -> ");else if("object"==typeof s){let f=[];for(let v in s)if(s.hasOwnProperty(v)){let E=s[v];f.push(v+":"+("string"==typeof E?JSON.stringify(E):ge(E)))}d=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${i.replace(sc,"\n  ")}`}("\n"+i.message,d,a,l),i.ngTokenPath=d,i[ic]=null,i}(v,s,"R3InjectorError",this.source)}throw v}finally{Dn(f),to(d)}}resolveInjectorInitializers(){const s=to(this),a=Dn(void 0);try{const l=this.get(Eh.multi,St,Qe.Self);for(const d of l)d()}finally{to(s),Dn(a)}}toString(){const s=[],a=this.records;for(const l of a.keys())s.push(ge(l));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new De(205,!1)}processProvider(s){let a=ds(s=Y(s))?s:Y(s&&s.provide);const l=function Sh(i){return bh(i)?hr(void 0,i.useValue):hr(Ah(i),ja)}(s);if(ds(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=hr(void 0,ja,!0),d.factory=()=>ac(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,l)}hydrate(s,a){return a.value===ja&&(a.value=Ch,a.value=a.factory()),"object"==typeof a.value&&a.value&&function Mh(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Y(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Ic(i){const s=zt(i),a=null!==s?s.factory:Ai(i);if(null!==a)return a;if(i instanceof Tn)throw new De(204,!1);if(i instanceof Function)return function By(i){const s=i.length;if(s>0)throw function xi(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new De(204,!1);const a=function or(i){const s=i&&(i[Yn]||i[Qn]);if(s){const a=function In(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new De(204,!1)}function Ah(i,s,a){let l;if(ds(i)){const d=Y(i);return Ai(d)||Ic(d)}if(bh(i))l=()=>Y(i.useValue);else if(function Ba(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...ac(i.deps||[]));else if(function Yr(i){return!(!i||!i.useExisting)}(i))l=()=>Xn(Y(i.useExisting));else{const d=Y(i&&(i.useClass||i.provide));if(!function Dc(i){return!!i.deps}(i))return Ai(d)||Ic(d);l=()=>new d(...ac(i.deps))}return l}function hr(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Ki(i){return!!i.\u0275providers}function $o(i,s){for(const a of i)Array.isArray(a)?$o(a,s):Ki(a)?$o(a.\u0275providers,s):s(a)}class bc{}class $y{resolveComponentFactory(s){throw function Ho(i){const s=Error(`No component factory found for ${ge(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let $a=(()=>{class i{}return i.NULL=new $y,i})();function Hy(){return y(On(),Te())}function y(i,s){return new h(si(i,s))}let h=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Hy,i})();function p(i){return i instanceof h?i.nativeElement:i}class C{}let M=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function q(){const i=Te(),a=Kt(On().index,i);return(Sr(a)?a:i)[11]}(),i})(),de=(()=>{class i{}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:()=>null}),i})();class je{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const rt=new je("14.2.11"),It={};function qy(i){return i.ngOriginalError}class tl{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&qy(s);for(;a&&qy(a);)a=qy(a);return a||null}}const wi=new Map;let OS=0;const pt="__ngContext__";function jr(i,s){Sr(s)?(i[pt]=s[20],function be(i){wi.set(i[20],i)}(s)):i[pt]=s}function xs(i){return i instanceof Function?i():i}var Zi=(()=>((Zi=Zi||{})[Zi.Important=1]="Important",Zi[Zi.DashCase=2]="DashCase",Zi))();function Vh(i,s){return undefined(i,s)}function Ac(i){const s=i[3];return cr(s)?s[3]:s}function Xy(i){return Uh(i[13])}function Qp(i){return Uh(i[4])}function Uh(i){for(;null!==i&&!cr(i);)i=i[4];return i}function Wa(i,s,a,l,d){if(null!=l){let f,v=!1;cr(l)?f=l:Sr(l)&&(v=!0,l=l[0]);const E=$n(l);0===i&&null!==a?null==d?tg(s,a,E):Go(s,a,E,d||null,!0):1===i&&null!==a?Go(s,a,E,d||null,!0):2===i?function zh(i,s,a){const l=rg(i,s);l&&function Aw(i,s,a,l){i.removeChild(s,a,l)}(i,l,s,a)}(s,E,v):3===i&&s.destroyNode(E),null!=f&&function lb(i,s,a,l,d){const f=a[7];f!==$n(a)&&Wa(s,i,l,f,d);for(let E=10;E<a.length;E++){const I=a[E];qh(I[1],I,i,s,l,f)}}(s,i,f,a,d)}}function jh(i,s,a){return i.createElement(s,a)}function Cw(i,s){const a=i[9],l=a.indexOf(s),d=s[3];512&s[2]&&(s[2]&=-513,Do(d,-1)),a.splice(l,1)}function Mc(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const d=l[17];null!==d&&d!==i&&Cw(d,l),s>0&&(i[a-1][4]=l[4]);const f=Ca(i,10+s);!function bw(i,s){qh(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const v=f[19];null!==v&&v.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function Jp(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&qh(i,s,a,3,null,null),function sb(i){let s=i[13];if(!s)return Xp(i[1],i);for(;s;){let a=null;if(Sr(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Sr(s)&&Xp(s[1],s),s=s[3];null===s&&(s=i),Sr(s)&&Xp(s[1],s),a=s&&s[4]}s=a}}(s)}}function Xp(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function Sw(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const d=s[a[l]];if(!(d instanceof Qs)){const f=a[l+1];if(Array.isArray(f))for(let v=0;v<f.length;v+=2){const E=d[f[v]],I=f[v+1];try{I.call(E)}finally{}}else try{f.call(d)}finally{}}}}(i,s),function Tw(i,s){const a=i.cleanup,l=s[7];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const v=a[f+1],E="function"==typeof v?v(s):$n(s[v]),I=l[d=a[f+2]],b=a[f+3];"boolean"==typeof b?E.removeEventListener(a[f],I,b):b>=0?l[d=b]():l[d=-b].unsubscribe(),f+=2}else{const v=l[d=a[f+1]];a[f].call(v)}if(null!==l){for(let f=d+1;f<l.length;f++)(0,l[f])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&cr(s[3])){a!==s[3]&&Cw(a,s);const l=s[19];null!==l&&l.detachView(i)}!function Kp(i){wi.delete(i[20])}(s)}}function Gh(i,s,a){return function eg(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const d=i.data[l.directiveStart].encapsulation;if(d===st.None||d===st.Emulated)return null}return si(l,a)}(i,s.parent,a)}function Go(i,s,a,l,d){i.insertBefore(s,a,l,d)}function tg(i,s,a){i.appendChild(s,a)}function ng(i,s,a,l,d){null!==l?Go(i,s,a,l,d):tg(i,s,a)}function rg(i,s){return i.parentNode(s)}let tv=function ig(i,s,a){return 40&i.type?si(i,a):null};function xc(i,s,a,l){const d=Gh(i,l,s),f=s[11],E=function ev(i,s,a){return tv(i,s,a)}(l.parent||s[6],l,s);if(null!=d)if(Array.isArray(a))for(let I=0;I<a.length;I++)ng(f,d,a[I],E,!1);else ng(f,d,a,E,!1)}function Rc(i,s){if(null!==s){const a=s.type;if(3&a)return si(s,i);if(4&a)return Nr(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return Rc(i,l);{const d=i[s.index];return cr(d)?Nr(-1,d):$n(d)}}if(32&a)return Vh(s,i)()||$n(i[s.index]);{const l=Rr(i,s);return null!==l?Array.isArray(l)?l[0]:Rc(Ac(i[16]),l):Rc(i,s.next)}}return null}function Rr(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Nr(i,s){const a=10+i+1;if(a<s.length){const l=s[a],d=l[1].firstChild;if(null!==d)return Rc(l,d)}return s[7]}function Wh(i,s,a,l,d,f,v){for(;null!=a;){const E=l[a.index],I=a.type;if(v&&0===s&&(E&&jr($n(E),l),a.flags|=4),64!=(64&a.flags))if(8&I)Wh(i,s,a.child,l,d,f,!1),Wa(s,i,d,E,f);else if(32&I){const b=Vh(a,l);let S;for(;S=b();)Wa(s,i,d,S,f);Wa(s,i,d,E,f)}else 16&I?rv(i,s,l,a,d,f):Wa(s,i,d,E,f);a=v?a.projectionNext:a.next}}function qh(i,s,a,l,d,f){Wh(a,l,i.firstChild,s,d,f,!1)}function rv(i,s,a,l,d,f){const v=a[16],I=v[6].projection[l.projection];if(Array.isArray(I))for(let b=0;b<I.length;b++)Wa(s,i,d,I[b],f);else Wh(i,s,I,v[3],d,f,!0)}function iv(i,s,a){i.setAttribute(s,"style",a)}function Kh(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function xw(i,s,a){let l=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=s.length;if(d+f===l||i.charCodeAt(d+f)<=32)return d}a=d+1}}const sv="ng-template";function db(i,s,a){let l=0;for(;l<i.length;){let d=i[l++];if(a&&"class"===d){if(d=i[l],-1!==xw(d.toLowerCase(),s,0))return!0}else if(1===d){for(;l<i.length&&"string"==typeof(d=i[l++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function Zh(i){return 4===i.type&&i.value!==sv}function ov(i,s,a){return s===(4!==i.type||a?i.value:sv)}function av(i,s,a){let l=4;const d=i.attrs||[],f=function Ow(i){for(let s=0;s<i.length;s++)if(Su(i[s]))return s;return i.length}(d);let v=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!v)if(4&l){if(l=2|1&l,""!==I&&!ov(i,I,a)||""===I&&1===s.length){if(fs(l))return!1;v=!0}}else{const b=8&l?I:s[++E];if(8&l&&null!==i.attrs){if(!db(i.attrs,b,a)){if(fs(l))return!1;v=!0}continue}const P=hb(8&l?"class":I,d,Zh(i),a);if(-1===P){if(fs(l))return!1;v=!0;continue}if(""!==b){let z;z=P>f?"":d[P+1].toLowerCase();const ee=8&l?z:null;if(ee&&-1!==xw(ee,b,0)||2&l&&b!==z){if(fs(l))return!1;v=!0}}}}else{if(!v&&!fs(l)&&!fs(I))return!1;if(v&&fs(I))continue;v=!1,l=I|1&l}}return fs(l)||v}function fs(i){return 0==(1&i)}function hb(i,s,a,l){if(null===s)return-1;let d=0;if(l||!a){let f=!1;for(;d<s.length;){const v=s[d];if(v===i)return d;if(3===v||6===v)f=!0;else{if(1===v||2===v){let E=s[++d];for(;"string"==typeof E;)E=s[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=f?1:2}return-1}return function Pw(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function Nc(i,s,a=!1){for(let l=0;l<s.length;l++)if(av(i,s[l],a))return!0;return!1}function kw(i,s){return i?":not("+s.trim()+")":s}function fb(i){let s=i[0],a=1,l=2,d="",f=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&l){const E=i[++a];d+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?d+="."+v:4&l&&(d+=" "+v);else""!==d&&!fs(v)&&(s+=kw(f,d),d=""),l=v,f=f||!fs(l);a++}return""!==d&&(s+=kw(f,d)),s}const Ht={};function qa(i){uv(gt(),Te(),vr()+i,!1)}function uv(i,s,a,l){if(!l)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Cu(s,f,a)}else{const f=i.preOrderHooks;null!==f&&Ao(s,f,0,a)}yi(a)}function ug(i,s=null,a=null,l){const d=dv(i,s,a,l);return d.resolveInjectorInitializers(),d}function dv(i,s=null,a=null,l,d=new Set){const f=[a||St,Dh(i)];return l=l||("object"==typeof i?void 0:ge(i)),new Th(f,s||Ec(),l||null,d)}let Ka=(()=>{class i{static create(a,l){var d;if(Array.isArray(a))return ug({name:""},l,a,"");{const f=null!==(d=a.name)&&void 0!==d?d:"";return ug({name:f},a.parent,a.providers,f)}}}return i.THROW_IF_NOT_FOUND=Un,i.NULL=new Ly,i.\u0275prov=Xt({token:i,providedIn:"any",factory:()=>Xn(Ih)}),i.__NG_ELEMENT_ID__=-1,i})();function En(i,s=Qe.Default){const a=Te();return null===a?Xn(i,s):ku(On(),a,Y(i),s)}function sf(){throw new Error("invalid")}function Ya(i,s){return i<<17|s<<2}function Rs(i){return i>>17&32767}function Ev(i){return 2|i}function Wo(i){return(131068&i)>>2}function Iv(i,s){return-131069&i|s<<2}function io(i){return 1|i}function cf(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const d=a[l],f=a[l+1];if(-1!==f){const v=i.data[f];Iu(d),v.contentQueries(2,s[f],f)}}}function Ig(i,s,a,l,d,f,v,E,I,b,S){const P=s.blueprint.slice();return P[0]=d,P[2]=76|l,(null!==S||i&&1024&i[2])&&(P[2]|=1024),ma(P),P[3]=P[15]=i,P[8]=a,P[10]=v||i&&i[10],P[11]=E||i&&i[11],P[12]=I||i&&i[12]||null,P[9]=b||i&&i[9]||null,P[6]=f,P[20]=function XD(){return OS++}(),P[21]=S,P[16]=2==s.type?i[16]:P,P}function sl(i,s,a,l,d){let f=i.data[s];if(null===f)f=function ol(i,s,a,l,d){const f=bo(),v=ya(),I=i.data[s]=function Tg(i,s,a,l,d,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?f:f&&f.parent,a,s,l,d);return null===i.firstChild&&(i.firstChild=I),null!==f&&(v?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,s,a,l,d),function W0(){return x.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=d;const v=function Mi(){const i=x.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===v?-1:v.injectorIndex}return xr(f,!0),f}function al(i,s,a,l){if(0===a)return-1;const d=s.length;for(let f=0;f<a;f++)s.push(l),i.blueprint.push(l),i.data.push(null);return d}function Dg(i,s,a){mp(s);try{const l=i.viewQuery;null!==l&&Uv(1,l,a);const d=i.template;null!==d&&bg(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&cf(i,s),i.staticViewQueries&&Uv(2,i.viewQuery,a);const f=i.components;null!==f&&function Eg(i,s){for(let a=0;a<s.length;a++)Nb(i,s[a])}(s,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Du()}}function Uc(i,s,a,l){const d=s[2];if(128!=(128&d)){mp(s);try{ma(s),function Ud(i){return x.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&bg(i,s,a,2,l);const v=3==(3&d);if(v){const b=i.preOrderCheckHooks;null!==b&&Cu(s,b,null)}else{const b=i.preOrderHooks;null!==b&&Ao(s,b,0,null),Wd(s,0)}if(function Oe(i){for(let s=Xy(i);null!==s;s=Qp(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const d=a[l],f=d[3];0==(512&d[2])&&Do(f,1),d[2]|=512}}}(s),function fe(i){for(let s=Xy(i);null!==s;s=Qp(s))for(let a=10;a<s.length;a++){const l=s[a],d=l[1];Ks(l)&&Uc(d,l,d.template,l[8])}}(s),null!==i.contentQueries&&cf(i,s),v){const b=i.contentCheckHooks;null!==b&&Cu(s,b)}else{const b=i.contentHooks;null!==b&&Ao(s,b,1),Wd(s,1)}!function Mv(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const d=a[l];if(d<0)yi(~d);else{const f=d,v=a[++l],E=a[++l];q0(v,f),E(2,s[f])}}}finally{yi(-1)}}(i,s);const E=i.components;null!==E&&function Zw(i,s){for(let a=0;a<s.length;a++)Or(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&Uv(2,I,l),v){const b=i.viewCheckHooks;null!==b&&Cu(s,b)}else{const b=i.viewHooks;null!==b&&Ao(s,b,2),Wd(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,Do(s[3],-1))}finally{Du()}}}function bg(i,s,a,l,d){const f=vr(),v=2&l;try{yi(-1),v&&s.length>22&&uv(i,s,22,!1),a(l,d)}finally{yi(f)}}function Bc(i,s,a){!lt()||(function Sg(i,s,a,l){const d=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Ou(a,s),jr(l,s);const v=a.initialInputs;for(let E=d;E<f;E++){const I=i.data[E],b=Ur(I);b&&pr(s,a,I);const S=Js(s,i,E,a);jr(S,s),null!==v&&dt(0,E-d,S,I,0,v),b&&(Kt(a.index,s)[8]=S)}}(i,s,a,si(a,s)),128==(128&a.flags)&&function Rb(i,s,a){const l=a.directiveStart,d=a.directiveEnd,f=a.index,v=function pp(){return x.lFrame.currentDirectiveIndex}();try{yi(f);for(let E=l;E<d;E++){const I=i.data[E],b=s[E];gp(E),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&Fv(I,b)}}finally{yi(-1),gp(v)}}(i,s,a))}function Cg(i,s,a=si){const l=s.localNames;if(null!==l){let d=s.index+1;for(let f=0;f<l.length;f+=2){const v=l[f+1],E=-1===v?a(s,i):i[v];i[d++]=E}}}function Rv(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Zo(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Zo(i,s,a,l,d,f,v,E,I,b){const S=22+l,P=S+d,z=function Yw(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Ht);return a}(S,P),ee="function"==typeof b?b():b;return z[1]={type:i,blueprint:z,template:a,queries:null,viewQuery:E,declTNode:s,data:z.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:P,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:ee,incompleteFirstPass:!1}}function Nv(i,s,a,l){const d=nE(s);null===a?d.push(l):(d.push(a),i.firstCreatePass&&Bv(i).push(l,d.length-1))}function Oi(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const d=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,d):a[l]=[s,d]}return a}function Ov(i,s){const l=s.directiveEnd,d=i.data,f=s.attrs,v=[];let E=null,I=null;for(let b=s.directiveStart;b<l;b++){const S=d[b],P=S.inputs,z=null===f||Zh(s)?null:Ft(P,f);v.push(z),E=Oi(P,b,E),I=Oi(S.outputs,b,I)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=v,s.inputs=E,s.outputs=I}function Xw(i,s){const a=Kt(s,i);16&a[2]||(a[2]|=32)}function Pv(i,s,a,l){let d=!1;if(lt()){const f=function Hr(i,s,a){const l=i.directiveRegistry;let d=null;if(l)for(let f=0;f<l.length;f++){const v=l[f];Nc(a,v.selectors,!1)&&(d||(d=[]),wa(Ou(a,s),i,v.type),Ur(v)?(ul(i,a),d.unshift(v)):d.push(v))}return d}(i,s,a),v=null===l?null:{"":-1};if(null!==f){d=!0,tE(a,i.data.length,f.length);for(let S=0;S<f.length;S++){const P=f[S];P.providersResolver&&P.providersResolver(P)}let E=!1,I=!1,b=al(i,s,f.length,null);for(let S=0;S<f.length;S++){const P=f[S];a.mergedAttrs=Au(a.mergedAttrs,P.hostAttrs),Ve(i,a,s,b,P),Lv(b,P,v),null!==P.contentQueries&&(a.flags|=8),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=128);const z=P.type.prototype;!E&&(z.ngOnChanges||z.ngOnInit||z.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(z.ngOnChanges||z.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),b++}Ov(i,a)}v&&function Qa(i,s,a){if(s){const l=i.localNames=[];for(let d=0;d<s.length;d+=2){const f=a[s[d+1]];if(null==f)throw new De(-301,!1);l.push(s[d],f)}}}(a,l,v)}return a.mergedAttrs=Au(a.mergedAttrs,a.attrs),d}function kv(i,s,a,l,d,f){const v=f.hostBindings;if(v){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~s.index;(function xb(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(l,d,v)}}function Fv(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function ul(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Lv(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Ur(s)&&(a[""]=i)}}function tE(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Ve(i,s,a,l,d){i.data[l]=d;const f=d.factory||(d.factory=Ai(d.type)),v=new Qs(f,Ur(d),En);i.blueprint[l]=v,a[l]=v,kv(i,s,0,l,al(i,a,d.hostVars,Ht),d)}function pr(i,s,a){const l=si(s,i),d=Rv(a),f=i[10],v=Mg(i,Ig(i,d,null,a.onPush?32:16,l,s,f,f.createRenderer(l,a),null,null,null));i[s.index]=v}function di(i,s,a,l,d,f){const v=si(i,s);!function df(i,s,a,l,d,f,v){if(null==f)i.removeAttribute(s,d,a);else{const E=null==v?me(f):v(f,l||"",d);i.setAttribute(s,d,E,a)}}(s[11],v,f,i.value,a,l,d)}function dt(i,s,a,l,d,f){const v=f[s];if(null!==v){const E=l.setInput;for(let I=0;I<v.length;){const b=v[I++],S=v[I++],P=v[I++];null!==E?l.setInput(a,P,b,S):a[S]=P}}}function Ft(i,s){let a=null,l=0;for(;l<s.length;){const d=s[l];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],s[l+1])),l+=2}else l+=2;else l+=4}return a}function Xe(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function Or(i,s){const a=Kt(s,i);if(Ks(a)){const l=a[1];48&a[2]?Uc(l,a,l.template,a[8]):a[5]>0&&Ag(a)}}function Ag(i){for(let l=Xy(i);null!==l;l=Qp(l))for(let d=10;d<l.length;d++){const f=l[d];if(Ks(f))if(512&f[2]){const v=f[1];Uc(v,f,v.template,f[8])}else f[5]>0&&Ag(f)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const d=Kt(a[l],i);Ks(d)&&d[5]>0&&Ag(d)}}function Nb(i,s){const a=Kt(s,i),l=a[1];(function Ob(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),Dg(l,a,a[8])}function Mg(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Vv(i){for(;i;){i[2]|=32;const s=Ac(i);if(Ll(i)&&!s)return i;i=s}return null}function xg(i,s,a,l=!0){const d=s[10];d.begin&&d.begin();try{Uc(i,s,i.template,a)}catch(v){throw l&&ll(s,v),v}finally{d.end&&d.end()}}function Uv(i,s,a){Iu(0),s(i,a)}function nE(i){return i[7]||(i[7]=[])}function Bv(i){return i.cleanup||(i.cleanup=[])}function ll(i,s){const a=i[9],l=a?a.get(tl,null):null;l&&l.handleError(s)}function Rg(i,s,a,l,d){for(let f=0;f<a.length;){const v=a[f++],E=a[f++],I=s[v],b=i.data[v];null!==b.setInput?b.setInput(I,d,l,E):I[E]=d}}function Mt(i,s,a){let l=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==s)for(let v=0;v<s.length;v++){const E=s[v];"number"==typeof E?f=E:1==f?d=ce(d,E):2==f&&(l=ce(l,E+": "+s[++v]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=d:i.classesWithoutHost=d}function Ja(i,s,a,l,d=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&l.push($n(f)),cr(f))for(let E=10;E<f.length;E++){const I=f[E],b=I[1].firstChild;null!==b&&Ja(I[1],I,b,l)}const v=a.type;if(8&v)Ja(i,s,a.child,l);else if(32&v){const E=Vh(a,s);let I;for(;I=E();)l.push(I)}else if(16&v){const E=Rr(s,a);if(Array.isArray(E))l.push(...E);else{const I=Ac(s[16]);Ja(I[1],I,E,l,!0)}}a=d?a.projectionNext:a.next}return l}class nn{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Ja(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(cr(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(Mc(s,l),Ca(a,l))}this._attachedToViewContainer=!1}Jp(this._lView[1],this._lView)}onDestroy(s){Nv(this._lView[1],this._lView,null,s)}markForCheck(){Vv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){xg(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new De(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function $h(i,s){qh(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new De(902,!1);this._appRef=s}}class kb extends nn{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;xg(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class qn extends $a{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=F(s);return new Ns(a,this.ngModule)}}function Ze(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class jv{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,l){const d=this.injector.get(s,It,l);return d!==It||a===It?d:this.parentInjector.get(s,a,l)}}class Ns extends bc{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Oc(i){return i.map(fb).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Ze(this.componentDef.inputs)}get outputs(){return Ze(this.componentDef.outputs)}create(s,a,l,d){let f=(d=d||this.ngModule)instanceof Qr?d:null==d?void 0:d.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const v=f?new jv(s,f):s,E=v.get(C,null);if(null===E)throw new De(407,!1);const I=v.get(de,null),b=E.createRenderer(null,this.componentDef),S=this.componentDef.selectors[0][0]||"div",P=l?function Qw(i,s,a){return i.selectRootElement(s,a===st.ShadowDom)}(b,l,this.componentDef.encapsulation):jh(b,S,function Ng(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(S)),z=this.componentDef.onPush?288:272,ee=Zo(0,null,null,1,0,null,null,null,null,null),ve=Ig(null,ee,null,z,null,null,E,b,I,v,null);let Be,Ke;mp(ve);try{const ct=function rE(i,s,a,l,d,f){const v=a[1];a[22]=i;const I=sl(v,22,2,"#host",null),b=I.mergedAttrs=s.hostAttrs;null!==b&&(Mt(I,b,!0),null!==i&&(_a(d,i,b),null!==I.classes&&Kh(d,i,I.classes),null!==I.styles&&iv(d,i,I.styles)));const S=l.createRenderer(i,s),P=Ig(a,Rv(s),null,s.onPush?32:16,a[22],I,l,S,f||null,null,null);return v.firstCreatePass&&(wa(Ou(I,a),v,s.type),ul(v,I),tE(I,a.length,1)),Mg(a,P),a[22]=P}(P,this.componentDef,ve,E,b);if(P)if(l)_a(b,P,["ng-version",rt.full]);else{const{attrs:Ct,classes:Ne}=function pb(i){const s=[],a=[];let l=1,d=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===d?""!==f&&s.push(f,i[++l]):8===d&&a.push(f);else{if(!fs(d))break;d=f}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ct&&_a(b,P,Ct),Ne&&Ne.length>0&&Kh(b,P,Ne.join(" "))}if(Ke=mi(ee,22),void 0!==a){const Ct=Ke.projection=[];for(let Ne=0;Ne<this.ngContentSelectors.length;Ne++){const xt=a[Ne];Ct.push(null!=xt?Array.from(xt):null)}}Be=function iE(i,s,a,l){const d=a[1],f=function Mb(i,s,a){const l=On();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Ve(i,l,s,al(i,s,1,null),a),Ov(i,l));const d=Js(s,i,l.directiveStart,l);jr(d,s);const f=si(l,s);return f&&jr(f,s),d}(d,a,s);if(i[8]=a[8]=f,null!==l)for(const E of l)E(f,s);if(s.contentQueries){const E=On();s.contentQueries(1,f,E.directiveStart)}const v=On();return!d.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(yi(v.index),kv(a[1],v,0,v.directiveStart,v.directiveEnd,s),Fv(s,f)),f}(ct,this.componentDef,ve,[Yi]),Dg(ee,ve,null)}finally{Du()}return new Lb(this.componentType,Be,y(Ke,ve),ve,Ke)}}class Lb extends class xh{}{constructor(s,a,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new kb(d),this.componentType=s}setInput(s,a){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[s])){const f=this._rootLView;Rg(f[1],f,d,s,a),Xw(f,this._tNode.index)}}get injector(){return new Da(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function Yi(){const i=On();bu(Te()[1],i)}function kg(i){let s=function Pg(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let d;if(Ur(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new De(903,!1);d=s.\u0275dir}if(d){if(a){l.push(d);const v=i;v.inputs=ao(i.inputs),v.declaredInputs=ao(i.declaredInputs),v.outputs=ao(i.outputs);const E=d.hostBindings;E&&Fg(i,E);const I=d.viewQuery,b=d.contentQueries;if(I&&Hv(i,I),b&&oe(i,b),se(i.inputs,d.inputs),se(i.declaredInputs,d.declaredInputs),se(i.outputs,d.outputs),Ur(d)&&d.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let v=0;v<f.length;v++){const E=f[v];E&&E.ngInherit&&E(i),E===kg&&(a=!1)}}s=Object.getPrototypeOf(s)}!function sE(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const d=i[l];d.hostVars=s+=d.hostVars,d.hostAttrs=Au(d.hostAttrs,a=Au(a,d.hostAttrs))}}(l)}function ao(i){return i===er?{}:i===St?[]:i}function Hv(i,s){const a=i.viewQuery;i.viewQuery=a?(l,d)=>{s(l,d),a(l,d)}:s}function oe(i,s){const a=i.contentQueries;i.contentQueries=a?(l,d,f)=>{s(l,d,f),a(l,d,f)}:s}function Fg(i,s){const a=i.hostBindings;i.hostBindings=a?(l,d)=>{s(l,d),a(l,d)}:s}let Ps=null;function cl(){if(!Ps){const i=Lt.Symbol;if(i&&i.iterator)Ps=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Ps=l)}}}return Ps}function $c(i){return!!zv(i)&&(Array.isArray(i)||!(i instanceof Map)&&cl()in i)}function zv(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function ks(i,s,a){return i[s]=a}function Xr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function _n(i,s,a,l){const d=Te();return Xr(d,So(),s)&&(gt(),di(Vn(),d,i,s,a,l)),_n}function Vs(i,s,a,l,d,f,v,E){const I=Te(),b=gt(),S=i+22,P=b.firstCreatePass?function fl(i,s,a,l,d,f,v,E,I){const b=s.consts,S=sl(s,i,4,v||null,Gi(b,E));Pv(s,a,S,Gi(b,I)),bu(s,S);const P=S.tViews=Zo(2,S,l,d,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,b);return null!==s.queries&&(s.queries.template(s,S),P.queries=s.queries.embeddedTView(S)),S}(S,b,I,s,a,l,d,f,v):b.data[S];xr(P,!1);const z=I[11].createComment("");xc(b,I,z,P),jr(z,I),Mg(I,I[S]=Xe(z,I,z,P)),la(P)&&Bc(b,I,P),null!=v&&Cg(I,P,E)}function Ug(i,s,a){const l=Te();return Xr(l,So(),s)&&function $r(i,s,a,l,d,f,v,E){const I=si(s,a);let S,b=s.inputs;!E&&null!=b&&(S=b[l])?(Rg(i,a,S,l,d),ns(s)&&Xw(a,s.index)):3&s.type&&(l=function Jw(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),d=null!=v?v(d,s.value||"",l):d,f.setProperty(I,l,d))}(gt(),Vn(),l,i,s,l[11],a,!1),Ug}function eu(i,s,a,l,d){const v=d?"class":"style";Rg(i,a,s.inputs[v],v,l)}function uo(i,s,a,l){const d=Te(),f=gt(),v=22+i,E=d[11],I=d[v]=jh(E,s,function Wl(){return x.lFrame.currentNamespace}()),b=f.firstCreatePass?function Kv(i,s,a,l,d,f,v){const E=s.consts,b=sl(s,i,2,d,Gi(E,f));return Pv(s,a,b,Gi(E,v)),null!==b.attrs&&Mt(b,b.attrs,!1),null!==b.mergedAttrs&&Mt(b,b.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,b),b}(v,f,d,0,s,a,l):f.data[v];xr(b,!0);const S=b.mergedAttrs;null!==S&&_a(E,I,S);const P=b.classes;null!==P&&Kh(E,I,P);const z=b.styles;return null!==z&&iv(E,I,z),64!=(64&b.flags)&&xc(f,d,I,b),0===function ae(){return x.lFrame.elementDepthCount}()&&jr(I,d),function ke(){x.lFrame.elementDepthCount++}(),la(b)&&(Bc(f,d,b),function xv(i,s,a){if(Hs(s)){const d=s.directiveEnd;for(let f=s.directiveStart;f<d;f++){const v=i.data[f];v.contentQueries&&v.contentQueries(1,a[f],f)}}}(f,b,d)),null!==l&&Cg(d,b),uo}function Kc(){let i=On();ya()?function Co(){x.lFrame.isParent=!1}():(i=i.parent,xr(i,!1));const s=i;!function Ge(){x.lFrame.elementDepthCount--}();const a=gt();return a.firstCreatePass&&(bu(a,i),Hs(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function ql(i){return 0!=(16&i.flags)}(s)&&eu(a,s,Te(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function _p(i){return 0!=(32&i.flags)}(s)&&eu(a,s,Te(),s.stylesWithoutHost,!1),Kc}function pl(i,s,a,l){return uo(i,s,a,l),Kc(),pl}function Zv(){return Te()}function Yv(i){return!!i&&"function"==typeof i.then}function uE(i){return!!i&&"function"==typeof i.subscribe}const Qv=uE;function jg(i,s,a,l){const d=Te(),f=gt(),v=On();return function kn(i,s,a,l,d,f,v,E){const I=la(l),S=i.firstCreatePass&&Bv(i),P=s[8],z=nE(s);let ee=!0;if(3&l.type||E){const Ke=si(l,s),ct=E?E(Ke):Ke,Ct=z.length,Ne=E?un=>E($n(un[l.index])):l.index;let xt=null;if(!E&&I&&(xt=function lE(i,s,a,l){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const v=d[f];if(v===a&&d[f+1]===l){const E=s[7],I=d[f+2];return E.length>I?E[I]:null}"string"==typeof v&&(f+=2)}return null}(i,s,d,l.index)),null!==xt)(xt.__ngLastListenerFn__||xt).__ngNextListenerFn__=f,xt.__ngLastListenerFn__=f,ee=!1;else{f=Jv(l,s,P,f,!1);const un=a.listen(ct,d,f);z.push(f,un),S&&S.push(d,Ne,Ct,Ct+1)}}else f=Jv(l,s,P,f,!1);const ve=l.outputs;let Be;if(ee&&null!==ve&&(Be=ve[d])){const Ke=Be.length;if(Ke)for(let ct=0;ct<Ke;ct+=2){const Hn=s[Be[ct]][Be[ct+1]].subscribe(f),$s=z.length;z.push(f,Hn),S&&S.push(d,l.index,$s,-($s+1))}}}(f,d,d[11],v,i,s,0,l),jg}function cE(i,s,a,l){try{return!1!==a(l)}catch(d){return ll(i,d),!1}}function Jv(i,s,a,l,d){return function f(v){if(v===Function)return l;Vv(2&i.flags?Kt(i.index,s):s);let I=cE(s,0,l,v),b=f.__ngNextListenerFn__;for(;b;)I=cE(s,0,b,v)&&I,b=b.__ngNextListenerFn__;return d&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function tu(i=1){return function va(i){return(x.lFrame.contextLView=function Gd(i,s){for(;i>0;)s=s[15],i--;return s}(i,x.lFrame.contextLView))[8]}(i)}function gl(i,s,a,l,d){const f=i[a+1],v=null===s;let E=l?Rs(f):Wo(f),I=!1;for(;0!==E&&(!1===I||v);){const S=i[E+1];$b(i[E],s)&&(I=!0,i[E+1]=l?io(S):Ev(S)),E=l?Rs(S):Wo(S)}I&&(i[a+1]=l?Ev(f):io(f))}function $b(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Ro(i,s)>=0}function qg(i,s){return function gs(i,s,a,l){const d=Te(),f=gt(),v=function Zs(i){const s=x.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function EE(i,s,a,l){const d=i.data;if(null===d[a+1]){const f=d[vr()],v=function wE(i,s){return s>=i.expandoStartIndex}(i,a);(function vf(i,s){return 0!=(i.flags&(s?16:32))})(f,l)&&null===s&&!v&&(s=!1),s=function IE(i,s,a,l){const d=function Eu(i){const s=x.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=l?s.residualClasses:s.residualStyles;if(null===d)0===(l?s.classBindings:s.styleBindings)&&(a=Xc(a=Xo(null,i,s,a,l),s.attrs,l),f=null);else{const v=s.directiveStylingLast;if(-1===v||i[v]!==d)if(a=Xo(d,i,s,a,l),null===f){let I=function Jc(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==Wo(l))return i[Rs(l)]}(i,s,l);void 0!==I&&Array.isArray(I)&&(I=Xo(null,i,s,I[1],l),I=Xc(I,s.attrs,l),function yl(i,s,a,l){i[Rs(a?s.classBindings:s.styleBindings)]=l}(i,s,l,I))}else f=function DE(i,s,a){let l;const d=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<d;f++)l=Xc(l,i[f].hostAttrs,a);return Xc(l,s.attrs,a)}(i,s,l)}return void 0!==f&&(l?s.residualClasses=f:s.residualStyles=f),a}(d,f,s,l),function jb(i,s,a,l,d,f){let v=f?s.classBindings:s.styleBindings,E=Rs(v),I=Wo(v);i[l]=a;let S,b=!1;if(Array.isArray(a)){const P=a;S=P[1],(null===S||Ro(P,S)>0)&&(b=!0)}else S=a;if(d)if(0!==I){const z=Rs(i[E+1]);i[l+1]=Ya(z,E),0!==z&&(i[z+1]=Iv(i[z+1],l)),i[E+1]=function wb(i,s){return 131071&i|s<<17}(i[E+1],l)}else i[l+1]=Ya(E,0),0!==E&&(i[E+1]=Iv(i[E+1],l)),E=l;else i[l+1]=Ya(I,0),0===E?E=l:i[I+1]=Iv(i[I+1],l),I=l;b&&(i[l+1]=Ev(i[l+1])),gl(i,S,l,!0),gl(i,S,l,!1),function nu(i,s,a,l,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&Ro(f,s)>=0&&(a[l+1]=io(a[l+1]))}(s,S,i,l,f),v=Ya(E,I),f?s.classBindings=v:s.styleBindings=v}(d,f,s,a,v,l)}}(f,i,v,l),s!==Ht&&Xr(d,v,s)&&function td(i,s,a,l,d,f,v,E){if(!(3&s.type))return;const I=i.data,b=I[E+1];Kg(function Fc(i){return 1==(1&i)}(b)?CE(I,s,a,d,Wo(b),v):void 0)||(Kg(f)||function wv(i){return 2==(2&i)}(b)&&(f=CE(I,null,a,d,E,v)),function cb(i,s,a,l,d){if(s)d?i.addClass(a,l):i.removeClass(a,l);else{let f=-1===l.indexOf("-")?void 0:Zi.DashCase;null==d?i.removeStyle(a,l,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=Zi.Important),i.setStyle(a,l,d,f))}}(l,v,_s(vr(),a),d,f))}(f,f.data[vr()],d,d[11],i,d[v+1]=function Zn(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ge(qi(i)))),i}(s,a),l,v)}(i,s,null,!0),qg}function Xo(i,s,a,l,d){let f=null;const v=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<v&&(f=s[E],l=Xc(l,f.hostAttrs,d),f!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function Xc(i,s,a){const l=a?1:2;let d=-1;if(null!==s)for(let f=0;f<s.length;f++){const v=s[f];"number"==typeof v?d=v:d===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),oi(i,v,!!a||s[++f]))}return void 0===i?null:i}function CE(i,s,a,l,d,f){const v=null===s;let E;for(;d>0;){const I=i[d],b=Array.isArray(I),S=b?I[1]:I,P=null===S;let z=a[d+1];z===Ht&&(z=P?St:void 0);let ee=P?sh(z,l):S===l?z:void 0;if(b&&!Kg(ee)&&(ee=sh(I,l)),Kg(ee)&&(E=ee,v))return E;const ve=i[d+1];d=v?Rs(ve):Wo(ve)}if(null!==s){let I=f?s.residualClasses:s.residualStyles;null!=I&&(E=sh(I,l))}return E}function Kg(i){return void 0!==i}function _f(i,s=""){const a=Te(),l=gt(),d=i+22,f=l.firstCreatePass?sl(l,d,1,s,null):l.data[d],v=a[d]=function Bh(i,s){return i.createText(s)}(a[11],s);xc(l,a,v,f),xr(f,!1)}function Zg(i,s,a){const l=Te(),d=function Ls(i,s,a,l){return Xr(i,So(),a)?s+me(a)+l:Ht}(l,i,s,a);return d!==Ht&&function mn(i,s,a){const l=_s(s,i);!function Dw(i,s,a){i.setValue(s,a)}(i[11],l,a)}(l,vr(),d),Zg}const su=void 0;var Zb=["en",[["a","p"],["AM","PM"],su],[["AM","PM"],su,su],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],su,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],su,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",su,"{1} 'at' {0}",su],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Kb(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let od={};function Qg(i){const s=function ho(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=Jg(s);if(a)return a;const l=s.split("-")[0];if(a=Jg(l),a)return a;if("en"===l)return Zb;throw new De(701,!1)}function Pr(i){return Qg(i)[bt.PluralCase]}function Jg(i){return i in od||(od[i]=Lt.ng&&Lt.ng.common&&Lt.ng.common.locales&&Lt.ng.common.locales[i]),od[i]}var bt=(()=>((bt=bt||{})[bt.LocaleId=0]="LocaleId",bt[bt.DayPeriodsFormat=1]="DayPeriodsFormat",bt[bt.DayPeriodsStandalone=2]="DayPeriodsStandalone",bt[bt.DaysFormat=3]="DaysFormat",bt[bt.DaysStandalone=4]="DaysStandalone",bt[bt.MonthsFormat=5]="MonthsFormat",bt[bt.MonthsStandalone=6]="MonthsStandalone",bt[bt.Eras=7]="Eras",bt[bt.FirstDayOfWeek=8]="FirstDayOfWeek",bt[bt.WeekendRange=9]="WeekendRange",bt[bt.DateFormat=10]="DateFormat",bt[bt.TimeFormat=11]="TimeFormat",bt[bt.DateTimeFormat=12]="DateTimeFormat",bt[bt.NumberSymbols=13]="NumberSymbols",bt[bt.NumberFormats=14]="NumberFormats",bt[bt.CurrencyCode=15]="CurrencyCode",bt[bt.CurrencySymbol=16]="CurrencySymbol",bt[bt.CurrencyName=17]="CurrencyName",bt[bt.Currencies=18]="Currencies",bt[bt.Directionality=19]="Directionality",bt[bt.PluralCase=20]="PluralCase",bt[bt.ExtraData=21]="ExtraData",bt))();const fo="en-US";let ad=fo;function Il(i,s,a,l,d){if(i=Y(i),Array.isArray(i))for(let f=0;f<i.length;f++)Il(i[f],s,a,l,d);else{const f=gt(),v=Te();let E=ds(i)?i:Y(i.provide),I=Ah(i);const b=On(),S=1048575&b.providerIndexes,P=b.directiveStart,z=b.providerIndexes>>20;if(ds(i)||!i.multi){const ee=new Qs(I,d,En),ve=hm(E,s,d?S:S+z,P);-1===ve?(wa(Ou(b,v),f,E),fd(f,i,s.length),s.push(E),b.directiveStart++,b.directiveEnd++,d&&(b.providerIndexes+=1048576),a.push(ee),v.push(ee)):(a[ve]=ee,v[ve]=ee)}else{const ee=hm(E,s,S+z,P),ve=hm(E,s,S,S+z),Be=ee>=0&&a[ee],Ke=ve>=0&&a[ve];if(d&&!Ke||!d&&!Be){wa(Ou(b,v),f,E);const ct=function pm(i,s,a,l,d){const f=new Qs(i,a,En);return f.multi=[],f.index=s,f.componentProviders=0,pd(f,d,l&&!a),f}(d?Vi:XE,a.length,d,l,I);!d&&Ke&&(a[ve].providerFactory=ct),fd(f,i,s.length,0),s.push(E),b.directiveStart++,b.directiveEnd++,d&&(b.providerIndexes+=1048576),a.push(ct),v.push(ct)}else fd(f,i,ee>-1?ee:ve,pd(a[d?ve:ee],I,!d&&l));!d&&l&&Ke&&a[ve].componentProviders++}}}function fd(i,s,a,l){const d=ds(s),f=function Uy(i){return!!i.useClass}(s);if(d||f){const I=(f?Y(s.useClass):s).prototype.ngOnDestroy;if(I){const b=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const S=b.indexOf(a);-1===S?b.push(a,[l,I]):b[S+1].push(l,I)}else b.push(a,I)}}}function pd(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function hm(i,s,a,l){for(let d=a;d<l;d++)if(s[d]===i)return d;return-1}function XE(i,s,a,l){return fm(this.multi,[])}function Vi(i,s,a,l){const d=this.multi;let f;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=Js(a,a[1],this.providerFactory.index,l);f=E.slice(0,v),fm(d,f);for(let I=v;I<E.length;I++)f.push(E[I])}else f=[],fm(d,f);return f}function fm(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function Af(i,s=[]){return a=>{a.providersResolver=(l,d)=>function JE(i,s,a){const l=gt();if(l.firstCreatePass){const d=Ur(i);Il(a,l.data,l.blueprint,d,!0),Il(s,l.data,l.blueprint,d,!1)}}(l,d?d(i):i,s)}}class Dl{}class ea{}function gd(i,s){return new cu(i,null!=s?s:null)}class cu extends Dl{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new qn(this);const l=it(s);this._bootstrapComponents=xs(l.bootstrap),this._r3Injector=dv(s,a,[{provide:Dl,useValue:this},{provide:$a,useValue:this.componentFactoryResolver}],ge(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class C_ extends ea{constructor(s){super(),this.moduleType=s}create(s){return new cu(this.moduleType,s)}}class md extends Dl{constructor(s,a,l){super(),this.componentFactoryResolver=new qn(this),this.instance=null;const d=new Th([...s,{provide:Dl,useValue:this},{provide:$a,useValue:this.componentFactoryResolver}],a||Ec(),l,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function gm(i,s,a=null){return new md(i,s,a).injector}let du=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=vc(0,a.type),d=l.length>0?gm([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Xt({token:i,providedIn:"environment",factory:()=>new i(Xn(Qr))}),i})();function T_(i){i.getStandaloneInjector=s=>s.get(du).getOrCreateStandaloneInjector(i)}function kr(i,s,a,l){return function ym(i,s,a,l,d,f){const v=s+a;return Xr(i,v,d)?ks(i,v+1,f?l.call(f,d):l(d)):_d(i,v+1)}(Te(),Jn(),i,s,a,l)}function aI(i,s,a,l,d){return function vm(i,s,a,l,d,f,v){const E=s+a;return function An(i,s,a,l){const d=Xr(i,s,a);return Xr(i,s+1,l)||d}(i,E,d,f)?ks(i,E+2,v?l.call(v,d,f):l(d,f)):_d(i,E+2)}(Te(),Jn(),i,s,a,l,d)}function _d(i,s){const a=i[s];return a===Ht?void 0:a}function N_(i){return s=>{setTimeout(i,void 0,s)}}const Di=class fI extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var d,f,v;let E=s,I=a||(()=>null),b=l;if(s&&"object"==typeof s){const P=s;E=null===(d=P.next)||void 0===d?void 0:d.bind(P),I=null===(f=P.error)||void 0===f?void 0:f.bind(P),b=null===(v=P.complete)||void 0===v?void 0:v.bind(P)}this.__isAsync&&(I=N_(I),E&&(E=N_(E)),b&&(b=N_(b)));const S=super.subscribe({next:E,error:I,complete:b});return s instanceof Q.w0&&s.add(S),S}};function Ed(){return this._results[cl()]()}class Nf{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=cl(),l=Nf.prototype;l[a]||(l[a]=Ed)}get changes(){return this._changes||(this._changes=new Di)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const d=vi(s);(this._changesDetected=!function rh(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let d=i[l],f=s[l];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let hu=(()=>{class i{}return i.__NG_ELEMENT_ID__=mI,i})();const pI=hu,gI=class extends pI{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s,a){const l=this._declarationTContainer.tViews,d=Ig(this._declarationLView,l,s,16,null,l.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(d[19]=v.createEmbeddedView(l)),Dg(l,d,s),new nn(d)}};function mI(){return wm(On(),Te())}function wm(i,s){return 4&i.type?new gI(s,i,y(i,s)):null}let Id=(()=>{class i{}return i.__NG_ELEMENT_ID__=MC,i})();function MC(){return Pf(On(),Te())}const O_=Id,P_=class extends O_{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return y(this._hostTNode,this._hostLView)}get injector(){return new Da(this._hostTNode,this._hostLView)}get parentInjector(){const s=Jl(this._hostTNode,this._hostLView);if(Ep(s)){const a=Ru(s,this._hostLView),l=Mu(s);return new Da(a[1].data[l+8],a)}return new Da(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=k_(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){let d,f;"number"==typeof l?d=l:null!=l&&(d=l.index,f=l.injector);const v=s.createEmbeddedView(a||{},f);return this.insert(v,d),v}createComponent(s,a,l,d,f){const v=s&&!function Br(i){return"function"==typeof i}(s);let E;if(v)E=a;else{const P=a||{};E=P.index,l=P.injector,d=P.projectableNodes,f=P.environmentInjector||P.ngModuleRef}const I=v?s:new Ns(F(s)),b=l||this.parentInjector;if(!f&&null==I.ngModule){const z=(v?b:this.parentInjector).get(Qr,null);z&&(f=z)}const S=I.create(b,d,void 0,f);return this.insert(S.hostView,E),S}insert(s,a){const l=s._lView,d=l[1];if(function wu(i){return cr(i[3])}(l)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const P=l[3],z=new P_(P,P[6],P[3]);z.detach(z.indexOf(s))}}const f=this._adjustIndex(a),v=this._lContainer;!function Hh(i,s,a,l){const d=10+l,f=a.length;l>0&&(a[d-1][4]=s),l<f-10?(s[4]=a[d],ih(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const v=s[17];null!==v&&a!==v&&function ob(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(v,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=64}(d,l,v,f);const E=Nr(f,v),I=l[11],b=rg(I,v[7]);return null!==b&&function ib(i,s,a,l,d,f){l[0]=d,l[6]=s,qh(i,l,a,1,d,f)}(d,v[6],I,l,b,E),s.attachToViewContainerRef(),ih(Of(v),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=k_(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=Mc(this._lContainer,a);l&&(Ca(Of(this._lContainer),a),Jp(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=Mc(this._lContainer,a);return l&&null!=Ca(Of(this._lContainer),a)?new nn(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function k_(i){return i[8]}function Of(i){return i[8]||(i[8]=[])}function Pf(i,s){let a;const l=s[i.index];if(cr(l))a=l;else{let d;if(8&i.type)d=$n(l);else{const f=s[11];d=f.createComment("");const v=si(i,s);Go(f,rg(f,v),d,function Mw(i,s){return i.nextSibling(s)}(f,v),!1)}s[i.index]=a=Xe(l,s,d,i),Mg(s,a)}return new P_(a,i,s)}class Ff{constructor(s){this.queryList=s,this.matches=null}clone(){return new Ff(this.queryList)}setDirty(){this.queryList.setDirty()}}class Lf{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let f=0;f<l;f++){const v=a.getByIndex(f);d.push(this.queries[v.indexInDeclarationView].clone())}return new Lf(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==DI(s,a).matches&&this.queries[a].setDirty()}}class F_{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class L_{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(s,d);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new L_(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Im{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Im(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(s,a,xC(a,f)),this.matchTNodeWithReadOption(s,a,Ia(a,s,f,!1,!1))}else l===hu?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Ia(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===h||d===Id||d===hu&&4&a.type)this.addMatch(a.index,-2);else{const f=Ia(a,s,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function xC(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function NC(i,s,a,l){return-1===a?function RC(i,s){return 11&i.type?y(i,s):4&i.type?wm(i,s):null}(s,i):-2===a?function vI(i,s,a){return a===h?y(s,i):a===hu?wm(s,i):a===Id?Pf(s,i):void 0}(i,s,l):Js(i,i[1],a,s)}function Vf(i,s,a,l){const d=s[19].queries[l];if(null===d.matches){const f=i.data,v=a.matches,E=[];for(let I=0;I<v.length;I+=2){const b=v[I];E.push(b<0?null:NC(s,f[b],v[I+1],a.metadata.read))}d.matches=E}return d.matches}function bl(i,s,a,l){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const v=Vf(i,s,d,a);for(let E=0;E<f.length;E+=2){const I=f[E];if(I>0)l.push(v[E/2]);else{const b=f[E+1],S=s[-I];for(let P=10;P<S.length;P++){const z=S[P];z[17]===z[3]&&bl(z[1],z,b,l)}if(null!==S[9]){const P=S[9];for(let z=0;z<P.length;z++){const ee=P[z];bl(ee[1],ee,b,l)}}}}}return l}function Dm(i){const s=Te(),a=gt(),l=cy();Iu(l+1);const d=DI(a,l);if(i.dirty&&function Vd(i){return 4==(4&i[2])}(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?bl(a,s,l,[]):Vf(a,s,d,l);i.reset(f,p),i.notifyOnChanges()}return!0}return!1}function wI(i,s,a,l){const d=gt();if(d.firstCreatePass){const f=On();(function bm(i,s,a){null===i.queries&&(i.queries=new L_),i.queries.track(new Im(s,a))})(d,new F_(s,a,l),f.index),function PC(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function II(i,s,a){const l=new Nf(4==(4&a));Nv(i,s,l,l.destroy),null===s[19]&&(s[19]=new Lf),s[19].queries.push(new Ff(l))}(d,Te(),a)}function EI(){return function OC(i,s){return i[19].queries[s].queryList}(Te(),cy())}function DI(i,s){return i.queries.getByIndex(s)}function Hf(...i){}const LI=new Tn("Application Initializer");let km=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Hf,this.reject=Hf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,d)=>{this.resolve=l,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(Yv(f))a.push(f);else if(Qv(f)){const v=new Promise((E,I)=>{f.subscribe({complete:E,error:I})});a.push(v)}}Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Xn(LI,8))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const VI=new Tn("AppId",{providedIn:"root",factory:function UI(){return`${Gf()}${Gf()}${Gf()}`}});function Gf(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Fm=new Tn("Platform Initializer"),WC=new Tn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Lm=new Tn("appBootstrapListener");let $I=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const zf=new Tn("LocaleId",{providedIn:"root",factory:()=>No(zf,Qe.Optional|Qe.SkipSelf)||function K_(){return"undefined"!=typeof $localize&&$localize.locale||fo}()}),qC=new Tn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class KC{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Z_=(()=>{class i{compileModuleSync(a){return new C_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=xs(it(a).declarations).reduce((v,E)=>{const I=F(E);return I&&v.push(new Ns(I)),v},[]);return new KC(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const QC=(()=>Promise.resolve(0))();function Wf(i){"undefined"==typeof Zone?QC.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Ui{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Di(!1),this.onMicrotaskEmpty=new Di(!1),this.onStable=new Di(!1),this.onError=new Di(!1),"undefined"==typeof Zone)throw new De(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function ra(){let i=Lt.requestAnimationFrame,s=Lt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function eT(i){const s=()=>{!function XC(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Lt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Kf(i),i.isCheckStableRunning=!0,qf(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Kf(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,f,v,E)=>{try{return WI(i),a.invokeTask(d,f,v,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),Um(i)}},onInvoke:(a,l,d,f,v,E,I)=>{try{return WI(i),a.invoke(d,f,v,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),Um(i)}},onHasTask:(a,l,d,f)=>{a.hasTask(d,f),l===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Kf(i),qf(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ui.isInAngularZone())throw new De(909,!1)}static assertNotInAngularZone(){if(Ui.isInAngularZone())throw new De(909,!1)}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,d){const f=this._inner,v=f.scheduleEventTask("NgZoneEvent: "+d,s,JC,Hf,Hf);try{return f.runTask(v,a,l)}finally{f.cancelTask(v)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const JC={};function qf(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Kf(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function WI(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Um(i){i._nesting--,qf(i)}class tT{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Di,this.onMicrotaskEmpty=new Di,this.onStable=new Di,this.onError=new Di}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,d){return s.apply(a,l)}}const Bm=new Tn(""),qI=new Tn("");let bd,Q_=(()=>{class i{constructor(a,l,d){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,bd||(function X_(i){bd=i}(d),d.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ui.assertNotInAngularZone(),Wf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Wf(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(Xn(Ui),Xn(J_),Xn(qI))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac}),i})(),J_=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){var d;return null!==(d=null==bd?void 0:bd.findTestabilityInTree(this,a,l))&&void 0!==d?d:null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),go=null;const KI=new Tn("AllowMultipleToken"),Zf=new Tn("PlatformDestroyListeners");class nT{constructor(s,a){this.name=s,this.token=a}}function jm(i,s,a=[]){const l=`Platform: ${s}`,d=new Tn(l);return(f=[])=>{let v=Cd();if(!v||v.injector.get(KI,!1)){const E=[...a,...f,{provide:d,useValue:!0}];i?i(E):function YI(i){if(go&&!go.get(KI,!1))throw new De(400,!1);go=i;const s=i.get(an);(function JI(i){const s=i.get(Fm,null);s&&s.forEach(a=>a())})(i)}(function n0(i=[],s){return Ka.create({name:s,providers:[{provide:jo,useValue:"platform"},{provide:Zf,useValue:new Set([()=>go=null])},...i]})}(E,l))}return function eD(i){const s=Cd();if(!s)throw new De(401,!1);return s}()}}function Cd(){var i;return null!==(i=null==go?void 0:go.get(an))&&void 0!==i?i:null}let an=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const d=function s0(i,s){let a;return a="noop"===i?new tT:("zone.js"===i?void 0:i)||new Ui(s),a}(null==l?void 0:l.ngZone,function r0(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(l)),f=[{provide:Ui,useValue:d}];return d.run(()=>{const v=Ka.create({providers:f,parent:this.injector,name:a.moduleType.name}),E=a.create(v),I=E.injector.get(tl,null);if(!I)throw new De(402,!1);return d.runOutsideAngular(()=>{const b=d.onError.subscribe({next:S=>{I.handleError(S)}});E.onDestroy(()=>{xn(this._modules,E),b.unsubscribe()})}),function o0(i,s,a){try{const l=a();return Yv(l)?l.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(I,d,()=>{const b=E.injector.get(km);return b.runInitializers(),b.donePromise.then(()=>(function Xg(i){Nt(i,"Expected localeId to be defined"),"string"==typeof i&&(ad=i.toLowerCase().replace(/_/g,"-"))}(E.injector.get(zf,fo)||fo),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,l=[]){const d=Td({},l);return function e0(i,s,a){const l=new C_(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const l=a.injector.get(Yf);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new De(403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new De(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(Zf,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Xn(Ka))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function Td(i,s){return Array.isArray(s)?s.reduce(Td,i):Object.assign(Object.assign({},i),s)}let Yf=(()=>{class i{constructor(a,l,d){this._zone=a,this._injector=l,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new k.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),v=new k.y(E=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{Ui.assertNotInAngularZone(),Wf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const b=this._zone.onUnstable.subscribe(()=>{Ui.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{I.unsubscribe(),b.unsubscribe()}});this.isStable=(0,ne.T)(f,v.pipe((0,he.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const d=a instanceof bc;if(!this._injector.get(km).done)throw!d&&ze(a),new De(405,false);let v;v=d?a:this._injector.get($a).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const E=function t0(i){return i.isBoundToModule}(v)?void 0:this._injector.get(Dl),b=v.create(Ka.NULL,[],l||v.selector,E),S=b.location.nativeElement,P=b.injector.get(Bm,null);return null==P||P.registerApplication(S),b.onDestroy(()=>{this.detachView(b.hostView),xn(this.components,b),null==P||P.unregisterApplication(S)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new De(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;xn(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Lm,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>xn(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new De(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(Xn(Ui),Xn(Qr),Xn(tl))},i.\u0275prov=Xt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function xn(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let a0=!0,tD=!1;function $m(){return tD=!0,a0}function nD(){if(tD)throw new Error("Cannot enable prod mode after platform setup.");a0=!1}let sT=(()=>{class i{}return i.__NG_ELEMENT_ID__=tA,i})();function tA(i){return function oT(i,s,a){if(ns(i)&&!a){const l=Kt(i.index,s);return new nn(l,l)}return 47&i.type?new nn(s[16],s):null}(On(),Te(),16==(16&i))}class h0{constructor(){}supports(s){return $c(s)}create(s){return new sD(s)}}const uT=(i,s)=>s;class sD{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||uT}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,d=0,f=null;for(;a||l;){const v=!l||a&&a.currentIndex<aD(l,d,f)?a:l,E=aD(v,d,f),I=v.currentIndex;if(v===l)d--,l=l._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{f||(f=[]);const b=E-d,S=I-d;if(b!=S){for(let z=0;z<b;z++){const ee=z<f.length?f[z]:f[z]=0,ve=ee+z;S<=ve&&ve<b&&(f[z]=ee+1)}f[v.previousIndex]=S-b}}E!==I&&s(v,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!$c(s))throw new De(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,f,v,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)f=s[E],v=this._trackByFn(E,f),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,f,v,E)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,v,E),l=!0),a=a._next}else d=0,function Ub(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[cl()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,E=>{v=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,v)?(l&&(a=this._verifyReinsertion(a,E,v,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,v,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,d){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,d)):s=this._addAfter(new lT(a,l),f,d),s}_verifyReinsertion(s,a,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?s=this._reinsertAfter(f,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,f=s._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new oD),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new oD),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class lT{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class cT{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class oD{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new cT,this.map.set(a,l)),l.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function aD(i,s,a){const l=i.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+s+d}class qm{constructor(){}supports(s){return s instanceof Map||zv(s)}create(){return new dT}}class dT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||zv(s)))throw new De(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const f=d._prev,v=d._next;return f&&(f._next=v),v&&(v._prev=f),d._next=null,d._prev=null,d}const l=new hT(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class hT{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Bn(){return new uD([new h0])}let uD=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Bn()),deps:[[i,new Ss,new Ma]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new De(901,!1)}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:Bn}),i})();function sr(){return new Km([new qm])}let Km=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||sr()),deps:[[i,new Ss,new Ma]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new De(901,!1)}}return i.\u0275prov=Xt({token:i,providedIn:"root",factory:sr}),i})();const mT=jm(null,"core",[]);let yT=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Xn(Yf))},i.\u0275mod=Pt({type:i}),i.\u0275inj=vt({}),i})();function vT(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},579:(tt,_e,N)=>{N.d(_e,{EI:()=>Ae,Gb:()=>gr,Iv:()=>ar,Kz:()=>_t,Xd:()=>jn,lT:()=>Ln,xP:()=>Je});var g=N(5861),Q=N(9681),k=N(1877),ne=N(2090),he=N(4859);N(2833);const se="analytics",ge="firebase_id",H="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Y="https://www.googletagmanager.com/gtag/js",Re=new k.Yd("@firebase/analytics");function Ie(R){return Promise.all(R.map($=>$.catch(F=>F)))}function De(R,$){const F=document.createElement("script");F.src=`${Y}?l=${R}&id=${$}`,F.async=!0,document.head.appendChild(F)}function me(R,$,F,ie,Ee,ze){return le.apply(this,arguments)}function le(){return(le=(0,g.Z)(function*(R,$,F,ie,Ee,ze){const it=ie[Ee];try{if(it)yield $[it];else{const Ut=(yield Ie(F)).find(ut=>ut.measurementId===Ee);Ut&&(yield $[Ut.appId])}}catch(wt){Re.error(wt)}R("config",Ee,ze)})).apply(this,arguments)}function ot(R,$,F,ie,Ee){return nt.apply(this,arguments)}function nt(){return(nt=(0,g.Z)(function*(R,$,F,ie,Ee){try{let ze=[];if(Ee&&Ee.send_to){let it=Ee.send_to;Array.isArray(it)||(it=[it]);const wt=yield Ie(F);for(const Ut of it){const ut=wt.find(Nn=>Nn.measurementId===Ut),qt=ut&&$[ut.appId];if(!qt){ze=[];break}ze.push(qt)}}0===ze.length&&(ze=Object.values($)),yield Promise.all(ze),R("event",ie,Ee||{})}catch(ze){Re.error(ze)}})).apply(this,arguments)}function Ce(R){const $=window.document.getElementsByTagName("script");for(const F of Object.values($))if(F.src&&F.src.includes(Y)&&F.src.includes(R))return F;return null}const Fe=new ne.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),J=new class Z{constructor($={},F=1e3){this.throttleMetadata=$,this.intervalMillis=F}getThrottleMetadata($){return this.throttleMetadata[$]}setThrottleMetadata($,F){this.throttleMetadata[$]=F}deleteThrottleMetadata($){delete this.throttleMetadata[$]}};function re(R){return new Headers({Accept:"application/json","x-goog-api-key":R})}function te(R){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,g.Z)(function*(R){var $;const{appId:F,apiKey:ie}=R,Ee={method:"GET",headers:re(ie)},ze=H.replace("{app-id}",F),it=yield fetch(ze,Ee);if(200!==it.status&&304!==it.status){let wt="";try{const Ut=yield it.json();null!==($=Ut.error)&&void 0!==$&&$.message&&(wt=Ut.error.message)}catch(Ut){}throw Fe.create("config-fetch-failed",{httpStatus:it.status,responseMessage:wt})}return it.json()})).apply(this,arguments)}function Le(R){return at.apply(this,arguments)}function at(){return(at=(0,g.Z)(function*(R,$=J,F){const{appId:ie,apiKey:Ee,measurementId:ze}=R.options;if(!ie)throw Fe.create("no-app-id");if(!Ee){if(ze)return{measurementId:ze,appId:ie};throw Fe.create("no-api-key")}const it=$.getThrottleMetadata(ie)||{backoffCount:0,throttleEndTimeMillis:Date.now()},wt=new Rn;return setTimeout((0,g.Z)(function*(){wt.abort()}),void 0!==F?F:6e4),Zt({appId:ie,apiKey:Ee,measurementId:ze},it,wt,$)})).apply(this,arguments)}function Zt(R,$,F){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,g.Z)(function*(R,{throttleEndTimeMillis:$,backoffCount:F},ie,Ee=J){var ze,it;const{appId:wt,measurementId:Ut}=R;try{yield He(ie,$)}catch(ut){if(Ut)return Re.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ut} provided in the "measurementId" field in the local Firebase config. [${null===(ze=ut)||void 0===ze?void 0:ze.message}]`),{appId:wt,measurementId:Ut};throw ut}try{const ut=yield te(R);return Ee.deleteThrottleMetadata(wt),ut}catch(ut){const qt=ut;if(!sn(qt)){if(Ee.deleteThrottleMetadata(wt),Ut)return Re.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ut} provided in the "measurementId" field in the local Firebase config. [${null==qt?void 0:qt.message}]`),{appId:wt,measurementId:Ut};throw ut}const Nn=503===Number(null===(it=null==qt?void 0:qt.customData)||void 0===it?void 0:it.httpStatus)?(0,ne.$s)(F,Ee.intervalMillis,30):(0,ne.$s)(F,Ee.intervalMillis),cn={throttleEndTimeMillis:Date.now()+Nn,backoffCount:F+1};return Ee.setThrottleMetadata(wt,cn),Re.debug(`Calling attemptFetch again in ${Nn} millis`),Zt(R,cn,ie,Ee)}})).apply(this,arguments)}function He(R,$){return new Promise((F,ie)=>{const Ee=Math.max($-Date.now(),0),ze=setTimeout(F,Ee);R.addEventListener(()=>{clearTimeout(ze),ie(Fe.create("fetch-throttle",{throttleEndTimeMillis:$}))})})}function sn(R){if(!(R instanceof ne.ZR&&R.customData))return!1;const $=Number(R.customData.httpStatus);return 429===$||500===$||503===$||504===$}class Rn{constructor(){this.listeners=[]}addEventListener($){this.listeners.push($)}abort(){this.listeners.forEach($=>$())}}let on,Lr;function Gn(){return(Gn=(0,g.Z)(function*(R,$,F,ie,Ee){if(Ee&&Ee.global)R("event",F,ie);else{const ze=yield $;R("event",F,Object.assign(Object.assign({},ie),{send_to:ze}))}})).apply(this,arguments)}function zt(){return(zt=(0,g.Z)(function*(R,$,F,ie){if(ie&&ie.global)return R("set",{screen_name:F}),Promise.resolve();R("config",yield $,{update:!0,screen_name:F})})).apply(this,arguments)}function pi(){return(pi=(0,g.Z)(function*(R,$,F,ie){if(ie&&ie.global)return R("set",{user_id:F}),Promise.resolve();R("config",yield $,{update:!0,user_id:F})})).apply(this,arguments)}function In(){return(In=(0,g.Z)(function*(R,$,F,ie){if(ie&&ie.global){const Ee={};for(const ze of Object.keys(F))Ee[`user_properties.${ze}`]=F[ze];return R("set",Ee),Promise.resolve()}R("config",yield $,{update:!0,user_properties:F})})).apply(this,arguments)}function Yn(){return(Yn=(0,g.Z)(function*(R,$){const F=yield R;window[`ga-disable-${F}`]=!$})).apply(this,arguments)}function Qn(R){Lr=R}function Ti(R){on=R}function Qe(){return yn.apply(this,arguments)}function yn(){return(yn=(0,g.Z)(function*(){var R;if(!(0,ne.hl)())return Re.warn(Fe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ne.eu)()}catch($){return Re.warn(Fe.create("indexeddb-unavailable",{errorInfo:null===(R=$)||void 0===R?void 0:R.toString()}).message),!1}return!0})).apply(this,arguments)}function Dn(){return(Dn=(0,g.Z)(function*(R,$,F,ie,Ee,ze,it){var wt;const Ut=Le(R);Ut.then(mr=>{F[mr.measurementId]=mr.appId,R.options.measurementId&&mr.measurementId!==R.options.measurementId&&Re.warn(`The measurement ID in the local Firebase config (${R.options.measurementId}) does not match the measurement ID fetched from the server (${mr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(mr=>Re.error(mr)),$.push(Ut);const ut=Qe().then(mr=>{if(mr)return ie.getId()}),[qt,Nn]=yield Promise.all([Ut,ut]);Ce(ze)||De(ze,qt.measurementId),Lr&&(Ee("consent","default",Lr),Qn(void 0)),Ee("js",new Date);const cn=null!==(wt=null==it?void 0:it.config)&&void 0!==wt?wt:{};return cn.origin="firebase",cn.update=!0,null!=Nn&&(cn[ge]=Nn),Ee("config",qt.measurementId,cn),on&&(Ee("set",on),Ti(void 0)),qt.measurementId})).apply(this,arguments)}class Tr{constructor($){this.app=$}_delete(){return delete zn[this.app.options.appId],Promise.resolve()}}let zn={},bn=[];const Fn={};let st,Lt,tn="dataLayer",ft="gtag",hn=!1;function jn(R){if(hn)throw Fe.create("already-initialized");R.dataLayerName&&(tn=R.dataLayerName),R.gtagName&&(ft=R.gtagName)}function St(R,$,F){!function er(){const R=[];if((0,ne.ru)()&&R.push("This is a browser extension environment."),(0,ne.zI)()||R.push("Cookies are not available."),R.length>0){const $=R.map((ie,Ee)=>`(${Ee+1}) ${ie}`).join(" "),F=Fe.create("invalid-analytics-context",{errorInfo:$});Re.warn(F.message)}}();const ie=R.options.appId;if(!ie)throw Fe.create("no-app-id");if(!R.options.apiKey){if(!R.options.measurementId)throw Fe.create("no-api-key");Re.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${R.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=zn[ie])throw Fe.create("already-exists",{id:ie});if(!hn){!function Ye(R){let $=[];Array.isArray(window[R])?$=window[R]:window[R]=$}(tn);const{wrappedGtag:ze,gtagCore:it}=function we(R,$,F,ie,Ee){let ze=function(...it){window[ie].push(arguments)};return window[Ee]&&"function"==typeof window[Ee]&&(ze=window[Ee]),window[Ee]=function xe(R,$,F,ie){function ze(){return(ze=(0,g.Z)(function*(it,wt,Ut){try{"event"===it?yield ot(R,$,F,wt,Ut):"config"===it?yield me(R,$,F,ie,wt,Ut):"consent"===it?R("consent","update",Ut):R("set",wt)}catch(ut){Re.error(ut)}})).apply(this,arguments)}return function Ee(it,wt,Ut){return ze.apply(this,arguments)}}(ze,R,$,F),{gtagCore:ze,wrappedGtag:window[Ee]}}(zn,bn,Fn,tn,ft);Lt=ze,st=it,hn=!0}return zn[ie]=function ri(R,$,F,ie,Ee,ze,it){return Dn.apply(this,arguments)}(R,bn,Fn,$,st,tn,F),new Tr(R)}function gr(){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,g.Z)(function*(){if((0,ne.ru)()||!(0,ne.zI)()||!(0,ne.hl)())return!1;try{return yield(0,ne.eu)()}catch(R){return!1}})).apply(this,arguments)}function Ln(R,$,F){R=(0,ne.m9)(R),function vt(R,$,F,ie){return zt.apply(this,arguments)}(Lt,zn[R.app.options.appId],$,F).catch(ie=>Re.error(ie))}function ar(R,$,F){R=(0,ne.m9)(R),function Fr(R,$,F,ie){return pi.apply(this,arguments)}(Lt,zn[R.app.options.appId],$,F).catch(ie=>Re.error(ie))}function Je(R,$,F){R=(0,ne.m9)(R),function or(R,$,F,ie){return In.apply(this,arguments)}(Lt,zn[R.app.options.appId],$,F).catch(ie=>Re.error(ie))}function Ae(R,$){R=(0,ne.m9)(R),function Kr(R,$){return Yn.apply(this,arguments)}(zn[R.app.options.appId],$).catch(F=>Re.error(F))}function _t(R,$,F,ie){R=(0,ne.m9)(R),function Xt(R,$,F,ie,Ee){return Gn.apply(this,arguments)}(Lt,zn[R.app.options.appId],$,F,ie).catch(Ee=>Re.error(Ee))}const Pt="@firebase/analytics",B="0.8.4";!function V(){(0,Q._registerComponent)(new he.wA(se,($,{options:F})=>St($.getProvider("app").getImmediate(),$.getProvider("installations-internal").getImmediate(),F),"PUBLIC")),(0,Q._registerComponent)(new he.wA("analytics-internal",function R($){try{const F=$.getProvider(se).getImmediate();return{logEvent:(ie,Ee,ze)=>_t(F,ie,Ee,ze)}}catch(F){throw Fe.create("interop-component-reg-failed",{reason:F})}},"PRIVATE")),(0,Q.registerVersion)(Pt,B),(0,Q.registerVersion)(Pt,B,"esm2017")}()},3942:(tt,_e,N)=>{N.d(_e,{Z:()=>De});var g=N(2090),Q=N(4859),k=N(9681),ne=N(1877);class he{constructor(me,le){this._delegate=me,this.firebase=le,(0,k._addComponent)(me,new Q.wA("app-compat",()=>this,"PUBLIC")),this.container=me.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(me){this._delegate.automaticDataCollectionEnabled=me}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(me=>{this._delegate.checkDestroyed(),me()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(me,le=k._DEFAULT_ENTRY_NAME){var ot;this._delegate.checkDestroyed();const nt=this._delegate.container.getProvider(me);return!nt.isInitialized()&&"EXPLICIT"===(null===(ot=nt.getComponent())||void 0===ot?void 0:ot.instantiationMode)&&nt.initialize(),nt.getImmediate({identifier:le})}_removeServiceInstance(me,le=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(me).clearInstance(le)}_addComponent(me){(0,k._addComponent)(this._delegate,me)}_addOrOverwriteComponent(me){(0,k._addOrOverwriteComponent)(this._delegate,me)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const se=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function ce(){const Ye=function ge(Ye){const me={},le={__esModule:!0,initializeApp:function xe(Fe,U={}){const ye=k.initializeApp(Fe,U);if((0,g.r3)(me,ye.name))return me[ye.name];const Z=new Ye(ye,le);return me[ye.name]=Z,Z},app:nt,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ce(Fe){const U=Fe.name,ye=U.replace("-compat","");if(k._registerComponent(Fe)&&"PUBLIC"===Fe.type){const Z=(J=nt())=>{if("function"!=typeof J[ye])throw se.create("invalid-app-argument",{appName:U});return J[ye]()};void 0!==Fe.serviceProps&&(0,g.ZB)(Z,Fe.serviceProps),le[ye]=Z,Ye.prototype[ye]=function(...J){return this._getService.bind(this,U).apply(this,Fe.multipleInstances?J:[])}}return"PUBLIC"===Fe.type?le[ye]:null},removeApp:function ot(Fe){delete me[Fe]},useAsService:function $e(Fe,U){return"serverAuth"===U?null:U},modularAPIs:k}};function nt(Fe){if(!(0,g.r3)(me,Fe=Fe||k._DEFAULT_ENTRY_NAME))throw se.create("no-app",{appName:Fe});return me[Fe]}return le.default=le,Object.defineProperty(le,"apps",{get:function we(){return Object.keys(me).map(Fe=>me[Fe])}}),nt.App=Ye,le}(he);return Ye.INTERNAL=Object.assign(Object.assign({},Ye.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function me(le){(0,g.ZB)(Ye,le)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Ye}(),H=new ne.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ye=self.firebase.SDK_VERSION;Ye&&Ye.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const De=j;!function Ie(Ye){(0,k.registerVersion)("@firebase/app-compat","0.1.39",Ye)}()},9681:(tt,_e,N)=>{N.r(_e),N.d(_e,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>Kr,_DEFAULT_ENTRY_NAME:()=>Nt,_addComponent:()=>on,_addOrOverwriteComponent:()=>Xt,_apps:()=>sn,_clearComponents:()=>Fr,_components:()=>Rn,_getProvider:()=>vt,_registerComponent:()=>Gn,_removeServiceInstance:()=>zt,deleteApp:()=>Ti,getApp:()=>Lr,getApps:()=>Qn,initializeApp:()=>Yn,onLog:()=>ri,registerVersion:()=>yn,setLogLevel:()=>Dn});var g=N(5861),Q=N(4859),k=N(1877),ne=N(2090),he=N(8766);class pe{constructor(Ae){this.container=Ae}getPlatformInfoString(){return this.container.getProviders().map(et=>{if(function se(Je){const Ae=Je.getComponent();return"VERSION"===(null==Ae?void 0:Ae.type)}(et)){const _t=et.getImmediate();return`${_t.library}/${_t.version}`}return null}).filter(et=>et).join(" ")}}const ge="@firebase/app",j=new k.Yd("@firebase/app"),Nt="[DEFAULT]",He={[ge]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},sn=new Map,Rn=new Map;function on(Je,Ae){try{Je.container.addComponent(Ae)}catch(et){j.debug(`Component ${Ae.name} failed to register with FirebaseApp ${Je.name}`,et)}}function Xt(Je,Ae){Je.container.addOrOverwriteComponent(Ae)}function Gn(Je){const Ae=Je.name;if(Rn.has(Ae))return j.debug(`There were multiple attempts to register component ${Ae}.`),!1;Rn.set(Ae,Je);for(const et of sn.values())on(et,Je);return!0}function vt(Je,Ae){const et=Je.container.getProvider("heartbeat").getImmediate({optional:!0});return et&&et.triggerHeartbeat(),Je.container.getProvider(Ae)}function zt(Je,Ae,et=Nt){vt(Je,Ae).clearInstance(et)}function Fr(){Rn.clear()}const or=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class In{constructor(Ae,et,_t){this._isDeleted=!1,this._options=Object.assign({},Ae),this._config=Object.assign({},et),this._name=et.name,this._automaticDataCollectionEnabled=et.automaticDataCollectionEnabled,this._container=_t,this.container.addComponent(new Q.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ae){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ae}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ae){this._isDeleted=Ae}checkDestroyed(){if(this.isDeleted)throw or.create("app-deleted",{appName:this._name})}}const Kr="9.14.0";function Yn(Je,Ae={}){let et=Je;"object"!=typeof Ae&&(Ae={name:Ae});const _t=Object.assign({name:Nt,automaticDataCollectionEnabled:!1},Ae),Et=_t.name;if("string"!=typeof Et||!Et)throw or.create("bad-app-name",{appName:String(Et)});if(et||(et=(0,ne.aH)()),!et)throw or.create("no-options");const Pt=sn.get(Et);if(Pt){if((0,ne.vZ)(et,Pt.options)&&(0,ne.vZ)(_t,Pt.config))return Pt;throw or.create("duplicate-app",{appName:Et})}const B=new Q.H0(Et);for(const R of Rn.values())B.addComponent(R);const V=new In(et,_t,B);return sn.set(Et,V),V}function Lr(Je=Nt){const Ae=sn.get(Je);if(!Ae&&Je===Nt)return Yn();if(!Ae)throw or.create("no-app",{appName:Je});return Ae}function Qn(){return Array.from(sn.values())}function Ti(Je){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,g.Z)(function*(Je){const Ae=Je.name;sn.has(Ae)&&(sn.delete(Ae),yield Promise.all(Je.container.getProviders().map(et=>et.delete())),Je.isDeleted=!0)})).apply(this,arguments)}function yn(Je,Ae,et){var _t;let Et=null!==(_t=He[Je])&&void 0!==_t?_t:Je;et&&(Et+=`-${et}`);const Pt=Et.match(/\s|\//),B=Ae.match(/\s|\//);if(Pt||B){const V=[`Unable to register library "${Et}" with version "${Ae}":`];return Pt&&V.push(`library name "${Et}" contains illegal characters (whitespace or "/")`),Pt&&B&&V.push("and"),B&&V.push(`version name "${Ae}" contains illegal characters (whitespace or "/")`),void j.warn(V.join(" "))}Gn(new Q.wA(`${Et}-version`,()=>({library:Et,version:Ae}),"VERSION"))}function ri(Je,Ae){if(null!==Je&&"function"!=typeof Je)throw or.create("invalid-log-argument");(0,k.Am)(Je,Ae)}function Dn(Je){(0,k.Ub)(Je)}const bn="firebase-heartbeat-store";let Fn=null;function tn(){return Fn||(Fn=(0,he.X3)("firebase-heartbeat-database",1,{upgrade:(Je,Ae)=>{0===Ae&&Je.createObjectStore(bn)}}).catch(Je=>{throw or.create("idb-open",{originalErrorMessage:Je.message})})),Fn}function st(){return(st=(0,g.Z)(function*(Je){var Ae;try{return(yield tn()).transaction(bn).objectStore(bn).get(jn(Je))}catch(et){if(et instanceof ne.ZR)j.warn(et.message);else{const _t=or.create("idb-get",{originalErrorMessage:null===(Ae=et)||void 0===Ae?void 0:Ae.message});j.warn(_t.message)}}})).apply(this,arguments)}function Lt(Je,Ae){return hn.apply(this,arguments)}function hn(){return(hn=(0,g.Z)(function*(Je,Ae){var et;try{const Et=(yield tn()).transaction(bn,"readwrite");return yield Et.objectStore(bn).put(Ae,jn(Je)),Et.done}catch(_t){if(_t instanceof ne.ZR)j.warn(_t.message);else{const Et=or.create("idb-set",{originalErrorMessage:null===(et=_t)||void 0===et?void 0:et.message});j.warn(Et.message)}}})).apply(this,arguments)}function jn(Je){return`${Je.name}!${Je.options.appId}`}class ii{constructor(Ae){this.container=Ae,this._heartbeatsCache=null;const et=this.container.getProvider("app").getImmediate();this._storage=new Qt(et),this._heartbeatsCachePromise=this._storage.read().then(_t=>(this._heartbeatsCache=_t,_t))}triggerHeartbeat(){var Ae=this;return(0,g.Z)(function*(){const _t=Ae.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Et=Yt();if(null===Ae._heartbeatsCache&&(Ae._heartbeatsCache=yield Ae._heartbeatsCachePromise),Ae._heartbeatsCache.lastSentHeartbeatDate!==Et&&!Ae._heartbeatsCache.heartbeats.some(Pt=>Pt.date===Et))return Ae._heartbeatsCache.heartbeats.push({date:Et,agent:_t}),Ae._heartbeatsCache.heartbeats=Ae._heartbeatsCache.heartbeats.filter(Pt=>{const B=new Date(Pt.date).valueOf();return Date.now()-B<=2592e6}),Ae._storage.overwrite(Ae._heartbeatsCache)})()}getHeartbeatsHeader(){var Ae=this;return(0,g.Z)(function*(){if(null===Ae._heartbeatsCache&&(yield Ae._heartbeatsCachePromise),null===Ae._heartbeatsCache||0===Ae._heartbeatsCache.heartbeats.length)return"";const et=Yt(),{heartbeatsToSend:_t,unsentEntries:Et}=function gr(Je,Ae=1024){const et=[];let _t=Je.slice();for(const Et of Je){const Pt=et.find(B=>B.agent===Et.agent);if(Pt){if(Pt.dates.push(Et.date),Ln(et)>Ae){Pt.dates.pop();break}}else if(et.push({agent:Et.agent,dates:[Et.date]}),Ln(et)>Ae){et.pop();break}_t=_t.slice(1)}return{heartbeatsToSend:et,unsentEntries:_t}}(Ae._heartbeatsCache.heartbeats),Pt=(0,ne.L)(JSON.stringify({version:2,heartbeats:_t}));return Ae._heartbeatsCache.lastSentHeartbeatDate=et,Et.length>0?(Ae._heartbeatsCache.heartbeats=Et,yield Ae._storage.overwrite(Ae._heartbeatsCache)):(Ae._heartbeatsCache.heartbeats=[],Ae._storage.overwrite(Ae._heartbeatsCache)),Pt})()}}function Yt(){return(new Date).toISOString().substring(0,10)}class Qt{constructor(Ae){this.app=Ae,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,ne.hl)()&&(0,ne.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ae=this;return(0,g.Z)(function*(){return(yield Ae._canUseIndexedDBPromise)&&(yield function ft(Je){return st.apply(this,arguments)}(Ae.app))||{heartbeats:[]}})()}overwrite(Ae){var et=this;return(0,g.Z)(function*(){var _t;if(yield et._canUseIndexedDBPromise){const Pt=yield et.read();return Lt(et.app,{lastSentHeartbeatDate:null!==(_t=Ae.lastSentHeartbeatDate)&&void 0!==_t?_t:Pt.lastSentHeartbeatDate,heartbeats:Ae.heartbeats})}})()}add(Ae){var et=this;return(0,g.Z)(function*(){var _t;if(yield et._canUseIndexedDBPromise){const Pt=yield et.read();return Lt(et.app,{lastSentHeartbeatDate:null!==(_t=Ae.lastSentHeartbeatDate)&&void 0!==_t?_t:Pt.lastSentHeartbeatDate,heartbeats:[...Pt.heartbeats,...Ae.heartbeats]})}})()}}function Ln(Je){return(0,ne.L)(JSON.stringify({version:2,heartbeats:Je})).length}!function ar(Je){Gn(new Q.wA("platform-logger",Ae=>new pe(Ae),"PRIVATE")),Gn(new Q.wA("heartbeat",Ae=>new ii(Ae),"PRIVATE")),yn(ge,"0.8.4",Je),yn(ge,"0.8.4","esm2017"),yn("fire-js","")}("")},4859:(tt,_e,N)=>{N.d(_e,{H0:()=>ge,wA:()=>k});var g=N(5861),Q=N(2090);class k{constructor(j,H,Y){this.name=j,this.instanceFactory=H,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const ne="[DEFAULT]";class he{constructor(j,H){this.name=j,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const H=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(H)){const Y=new Q.BH;if(this.instancesDeferred.set(H,Y),this.isInitialized(H)||this.shouldAutoInitialize())try{const Re=this.getOrInitializeService({instanceIdentifier:H});Re&&Y.resolve(Re)}catch(Re){}}return this.instancesDeferred.get(H).promise}getImmediate(j){var H;const Y=this.normalizeInstanceIdentifier(null==j?void 0:j.identifier),Re=null!==(H=null==j?void 0:j.optional)&&void 0!==H&&H;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(Re)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(Ie){if(Re)return null;throw Ie}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function se(ce){return"EAGER"===ce.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:ne})}catch(H){}for(const[H,Y]of this.instancesDeferred.entries()){const Re=this.normalizeInstanceIdentifier(H);try{const Ie=this.getOrInitializeService({instanceIdentifier:Re});Y.resolve(Ie)}catch(Ie){}}}}clearInstance(j=ne){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,g.Z)(function*(){const H=Array.from(j.instances.values());yield Promise.all([...H.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...H.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=ne){return this.instances.has(j)}getOptions(j=ne){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:H={}}=j,Y=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Re=this.getOrInitializeService({instanceIdentifier:Y,options:H});for(const[Ie,De]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(Ie)&&De.resolve(Re);return Re}onInit(j,H){var Y;const Re=this.normalizeInstanceIdentifier(H),Ie=null!==(Y=this.onInitCallbacks.get(Re))&&void 0!==Y?Y:new Set;Ie.add(j),this.onInitCallbacks.set(Re,Ie);const De=this.instances.get(Re);return De&&j(De,Re),()=>{Ie.delete(j)}}invokeOnInitCallbacks(j,H){const Y=this.onInitCallbacks.get(H);if(Y)for(const Re of Y)try{Re(j,H)}catch(Ie){}}getOrInitializeService({instanceIdentifier:j,options:H={}}){let Y=this.instances.get(j);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=j,ce===ne?void 0:ce),options:H}),this.instances.set(j,Y),this.instancesOptions.set(j,H),this.invokeOnInitCallbacks(Y,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,Y)}catch(Re){}var ce;return Y||null}normalizeInstanceIdentifier(j=ne){return this.component?this.component.multipleInstances?j:ne:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ge{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const H=this.getProvider(j.name);if(H.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);H.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const H=new he(j,this);return this.providers.set(j,H),H}getProviders(){return Array.from(this.providers.values())}}},2833:(tt,_e,N)=>{var g=N(5861),Q=N(9681),k=N(4859),ne=N(2090),he=N(8766);const pe="@firebase/installations",se="0.5.16",ce=`w:${se}`,j="FIS_v2",Ye=new ne.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function me(K){return K instanceof ne.ZR&&K.code.includes("request-failed")}function le({projectId:K}){return`https://firebaseinstallations.googleapis.com/v1/projects/${K}/installations`}function ot(K){return{token:K.token,requestStatus:2,expiresIn:U(K.expiresIn),creationTime:Date.now()}}function nt(K,ue){return xe.apply(this,arguments)}function xe(){return(xe=(0,g.Z)(function*(K,ue){const We=(yield ue.json()).error;return Ye.create("request-failed",{requestName:K,serverCode:We.code,serverMessage:We.message,serverStatus:We.status})})).apply(this,arguments)}function we({apiKey:K}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":K})}function Ce(K,{refreshToken:ue}){const Pe=we(K);return Pe.append("Authorization",function ye(K){return`${j} ${K}`}(ue)),Pe}function $e(K){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,g.Z)(function*(K){const ue=yield K();return ue.status>=500&&ue.status<600?K():ue})).apply(this,arguments)}function U(K){return Number(K.replace("s","000"))}function Z(K,ue){return J.apply(this,arguments)}function J(){return(J=(0,g.Z)(function*({appConfig:K,heartbeatServiceProvider:ue},{fid:Pe}){const We=le(K),gn=we(K),en=ue.getImmediate({optional:!0});if(en){const lr=yield en.getHeartbeatsHeader();lr&&gn.append("x-firebase-client",lr)}const Cn={method:"POST",headers:gn,body:JSON.stringify({fid:Pe,authVersion:j,appId:K.appId,sdkVersion:ce})},Vr=yield $e(()=>fetch(We,Cn));if(Vr.ok){const lr=yield Vr.json();return{fid:lr.fid||Pe,registrationStatus:2,refreshToken:lr.refreshToken,authToken:ot(lr.authToken)}}throw yield nt("Create Installation",Vr)})).apply(this,arguments)}function re(K){return new Promise(ue=>{setTimeout(ue,K)})}const Ue=/^[cdef][\w-]{21}$/;function at(){try{const K=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(K),K[0]=112+K[0]%16;const Pe=function Zt(K){return function te(K){return btoa(String.fromCharCode(...K)).replace(/\+/g,"-").replace(/\//g,"_")}(K).substr(0,22)}(K);return Ue.test(Pe)?Pe:""}catch(K){return""}}function Nt(K){return`${K.appName}!${K.appId}`}const He=new Map;function sn(K,ue){const Pe=Nt(K);Xt(Pe,ue),function Gn(K,ue){const Pe=function zt(){return!vt&&"BroadcastChannel"in self&&(vt=new BroadcastChannel("[Firebase] FID Change"),vt.onmessage=K=>{Xt(K.data.key,K.data.fid)}),vt}();Pe&&Pe.postMessage({key:K,fid:ue}),function Fr(){0===He.size&&vt&&(vt.close(),vt=null)}()}(Pe,ue)}function Xt(K,ue){const Pe=He.get(K);if(Pe)for(const We of Pe)We(ue)}let vt=null;const In="firebase-installations-store";let Kr=null;function Yn(){return Kr||(Kr=(0,he.X3)("firebase-installations-database",1,{upgrade:(K,ue)=>{0===ue&&K.createObjectStore(In)}})),Kr}function Lr(K,ue){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,g.Z)(function*(K,ue){const Pe=Nt(K),gn=(yield Yn()).transaction(In,"readwrite"),en=gn.objectStore(In),yt=yield en.get(Pe);return yield en.put(ue,Pe),yield gn.done,(!yt||yt.fid!==ue.fid)&&sn(K,ue.fid),ue})).apply(this,arguments)}function Ti(K){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,g.Z)(function*(K){const ue=Nt(K),We=(yield Yn()).transaction(In,"readwrite");yield We.objectStore(In).delete(ue),yield We.done})).apply(this,arguments)}function yn(K,ue){return ri.apply(this,arguments)}function ri(){return(ri=(0,g.Z)(function*(K,ue){const Pe=Nt(K),gn=(yield Yn()).transaction(In,"readwrite"),en=gn.objectStore(In),yt=yield en.get(Pe),Cn=ue(yt);return void 0===Cn?yield en.delete(Pe):yield en.put(Cn,Pe),yield gn.done,Cn&&(!yt||yt.fid!==Cn.fid)&&sn(K,Cn.fid),Cn})).apply(this,arguments)}function Dn(K){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,g.Z)(function*(K){let ue;const Pe=yield yn(K.appConfig,We=>{const gn=zn(We),en=bn(K,gn);return ue=en.registrationPromise,en.installationEntry});return""===Pe.fid?{installationEntry:yield ue}:{installationEntry:Pe,registrationPromise:ue}})).apply(this,arguments)}function zn(K){return hn(K||{fid:at(),registrationStatus:0})}function bn(K,ue){if(0===ue.registrationStatus){if(!navigator.onLine)return{installationEntry:ue,registrationPromise:Promise.reject(Ye.create("app-offline"))};const Pe={fid:ue.fid,registrationStatus:1,registrationTime:Date.now()},We=function Fn(K,ue){return tn.apply(this,arguments)}(K,Pe);return{installationEntry:Pe,registrationPromise:We}}return 1===ue.registrationStatus?{installationEntry:ue,registrationPromise:ft(K)}:{installationEntry:ue}}function tn(){return(tn=(0,g.Z)(function*(K,ue){try{const Pe=yield Z(K,ue);return Lr(K.appConfig,Pe)}catch(Pe){throw me(Pe)&&409===Pe.customData.serverCode?yield Ti(K.appConfig):yield Lr(K.appConfig,{fid:ue.fid,registrationStatus:0}),Pe}})).apply(this,arguments)}function ft(K){return st.apply(this,arguments)}function st(){return(st=(0,g.Z)(function*(K){let ue=yield Lt(K.appConfig);for(;1===ue.registrationStatus;)yield re(100),ue=yield Lt(K.appConfig);if(0===ue.registrationStatus){const{installationEntry:Pe,registrationPromise:We}=yield Dn(K);return We||Pe}return ue})).apply(this,arguments)}function Lt(K){return yn(K,ue=>{if(!ue)throw Ye.create("installation-not-found");return hn(ue)})}function hn(K){return function jn(K){return 1===K.registrationStatus&&K.registrationTime+1e4<Date.now()}(K)?{fid:K.fid,registrationStatus:0}:K}function er(K,ue){return St.apply(this,arguments)}function St(){return(St=(0,g.Z)(function*({appConfig:K,heartbeatServiceProvider:ue},Pe){const We=ii(K,Pe),gn=Ce(K,Pe),en=ue.getImmediate({optional:!0});if(en){const lr=yield en.getHeartbeatsHeader();lr&&gn.append("x-firebase-client",lr)}const Cn={method:"POST",headers:gn,body:JSON.stringify({installation:{sdkVersion:ce,appId:K.appId}})},Vr=yield $e(()=>fetch(We,Cn));if(Vr.ok)return ot(yield Vr.json());throw yield nt("Generate Auth Token",Vr)})).apply(this,arguments)}function ii(K,{fid:ue}){return`${le(K)}/${ue}/authTokens:generate`}function Yt(K){return gr.apply(this,arguments)}function gr(){return(gr=(0,g.Z)(function*(K,ue=!1){let Pe;const We=yield yn(K.appConfig,en=>{if(!et(en))throw Ye.create("not-registered");const yt=en.authToken;if(!ue&&_t(yt))return en;if(1===yt.requestStatus)return Pe=Qt(K,ue),en;{if(!navigator.onLine)throw Ye.create("app-offline");const Cn=Pt(en);return Pe=Je(K,Cn),Cn}});return Pe?yield Pe:We.authToken})).apply(this,arguments)}function Qt(K,ue){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,g.Z)(function*(K,ue){let Pe=yield ar(K.appConfig);for(;1===Pe.authToken.requestStatus;)yield re(100),Pe=yield ar(K.appConfig);const We=Pe.authToken;return 0===We.requestStatus?Yt(K,ue):We})).apply(this,arguments)}function ar(K){return yn(K,ue=>{if(!et(ue))throw Ye.create("not-registered");return function B(K){return 1===K.requestStatus&&K.requestTime+1e4<Date.now()}(ue.authToken)?Object.assign(Object.assign({},ue),{authToken:{requestStatus:0}}):ue})}function Je(K,ue){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,g.Z)(function*(K,ue){try{const Pe=yield er(K,ue),We=Object.assign(Object.assign({},ue),{authToken:Pe});return yield Lr(K.appConfig,We),Pe}catch(Pe){if(!me(Pe)||401!==Pe.customData.serverCode&&404!==Pe.customData.serverCode){const We=Object.assign(Object.assign({},ue),{authToken:{requestStatus:0}});yield Lr(K.appConfig,We)}else yield Ti(K.appConfig);throw Pe}})).apply(this,arguments)}function et(K){return void 0!==K&&2===K.registrationStatus}function _t(K){return 2===K.requestStatus&&!function Et(K){const ue=Date.now();return ue<K.creationTime||K.creationTime+K.expiresIn<ue+36e5}(K)}function Pt(K){const ue={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},K),{authToken:ue})}function R(){return(R=(0,g.Z)(function*(K){const ue=K,{installationEntry:Pe,registrationPromise:We}=yield Dn(ue);return We?We.catch(console.error):Yt(ue).catch(console.error),Pe.fid})).apply(this,arguments)}function F(){return(F=(0,g.Z)(function*(K,ue=!1){const Pe=K;return yield ie(Pe),(yield Yt(Pe,ue)).token})).apply(this,arguments)}function ie(K){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,g.Z)(function*(K){const{registrationPromise:ue}=yield Dn(K);ue&&(yield ue)})).apply(this,arguments)}function mr(K){return Ye.create("missing-app-config-values",{valueName:K})}const yr="installations",Ot=K=>{const ue=K.getProvider("app").getImmediate(),Pe=function cn(K){if(!K||!K.options)throw mr("App Configuration");if(!K.name)throw mr("App Name");const ue=["projectId","apiKey","appId"];for(const Pe of ue)if(!K.options[Pe])throw mr(Pe);return{appName:K.name,projectId:K.options.projectId,apiKey:K.options.apiKey,appId:K.options.appId}}(ue);return{app:ue,appConfig:Pe,heartbeatServiceProvider:(0,Q._getProvider)(ue,"heartbeat"),_delete:()=>Promise.resolve()}},vn=K=>{const ue=K.getProvider("app").getImmediate(),Pe=(0,Q._getProvider)(ue,yr).getImmediate();return{getId:()=>function V(K){return R.apply(this,arguments)}(Pe),getToken:gn=>function $(K){return F.apply(this,arguments)}(Pe,gn)}};(function ur(){(0,Q._registerComponent)(new k.wA(yr,Ot,"PUBLIC")),(0,Q._registerComponent)(new k.wA("installations-internal",vn,"PRIVATE"))})(),(0,Q.registerVersion)(pe,se),(0,Q.registerVersion)(pe,se,"esm2017")},1877:(tt,_e,N)=>{N.d(_e,{Am:()=>ce,Ub:()=>ge,Yd:()=>se,in:()=>Q});const g=[];var Q=(()=>{return(j=Q||(Q={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",Q;var j})();const k={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},ne=Q.INFO,he={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},pe=(j,H,...Y)=>{if(H<j.logLevel)return;const Re=(new Date).toISOString(),Ie=he[H];if(!Ie)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Ie](`[${Re}]  ${j.name}:`,...Y)};class se{constructor(H){this.name=H,this._logLevel=ne,this._logHandler=pe,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in Q))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?k[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...H),this._logHandler(this,Q.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...H),this._logHandler(this,Q.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...H),this._logHandler(this,Q.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...H),this._logHandler(this,Q.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...H),this._logHandler(this,Q.ERROR,...H)}}function ge(j){g.forEach(H=>{H.setLogLevel(j)})}function ce(j,H){for(const Y of g){let Re=null;H&&H.level&&(Re=k[H.level]),Y.userLogHandler=null===j?null:(Ie,De,...Ye)=>{const me=Ye.map(le=>{if(null==le)return null;if("string"==typeof le)return le;if("number"==typeof le||"boolean"==typeof le)return le.toString();if(le instanceof Error)return le.message;try{return JSON.stringify(le)}catch(ot){return null}}).filter(le=>le).join(" ");De>=(null!=Re?Re:Ie.logLevel)&&j({level:Q[De].toLowerCase(),message:me,args:Ye,type:Ie.name})}}}},8766:(tt,_e,N)=>{N.d(_e,{Lj:()=>xe,X3:()=>nt});var g=N(5861);let k,ne;const se=new WeakMap,ge=new WeakMap,ce=new WeakMap,j=new WeakMap,H=new WeakMap;let Ie={get(U,ye,Z){if(U instanceof IDBTransaction){if("done"===ye)return ge.get(U);if("objectStoreNames"===ye)return U.objectStoreNames||ce.get(U);if("store"===ye)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return le(U[ye])},set:(U,ye,Z)=>(U[ye]=Z,!0),has:(U,ye)=>U instanceof IDBTransaction&&("done"===ye||"store"===ye)||ye in U};function me(U){return"function"==typeof U?function Ye(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function pe(){return ne||(ne=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...ye){return U.apply(ot(this),ye),le(se.get(this))}:function(...ye){return le(U.apply(ot(this),ye))}:function(ye,...Z){const J=U.call(ot(this),ye,...Z);return ce.set(J,ye.sort?ye.sort():[ye]),le(J)}}(U):(U instanceof IDBTransaction&&function Re(U){if(ge.has(U))return;const ye=new Promise((Z,J)=>{const re=()=>{U.removeEventListener("complete",te),U.removeEventListener("error",Ue),U.removeEventListener("abort",Ue)},te=()=>{Z(),re()},Ue=()=>{J(U.error||new DOMException("AbortError","AbortError")),re()};U.addEventListener("complete",te),U.addEventListener("error",Ue),U.addEventListener("abort",Ue)});ge.set(U,ye)}(U),((U,ye)=>ye.some(Z=>U instanceof Z))(U,function he(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,Ie):U)}function le(U){if(U instanceof IDBRequest)return function Y(U){const ye=new Promise((Z,J)=>{const re=()=>{U.removeEventListener("success",te),U.removeEventListener("error",Ue)},te=()=>{Z(le(U.result)),re()},Ue=()=>{J(U.error),re()};U.addEventListener("success",te),U.addEventListener("error",Ue)});return ye.then(Z=>{Z instanceof IDBCursor&&se.set(Z,U)}).catch(()=>{}),H.set(ye,U),ye}(U);if(j.has(U))return j.get(U);const ye=me(U);return ye!==U&&(j.set(U,ye),H.set(ye,U)),ye}const ot=U=>H.get(U);function nt(U,ye,{blocked:Z,upgrade:J,blocking:re,terminated:te}={}){const Ue=indexedDB.open(U,ye),Le=le(Ue);return J&&Ue.addEventListener("upgradeneeded",at=>{J(le(Ue.result),at.oldVersion,at.newVersion,le(Ue.transaction))}),Z&&Ue.addEventListener("blocked",()=>Z()),Le.then(at=>{te&&at.addEventListener("close",()=>te()),re&&at.addEventListener("versionchange",()=>re())}).catch(()=>{}),Le}function xe(U,{blocked:ye}={}){const Z=indexedDB.deleteDatabase(U);return ye&&Z.addEventListener("blocked",()=>ye()),le(Z).then(()=>{})}const we=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],$e=new Map;function Fe(U,ye){if(!(U instanceof IDBDatabase)||ye in U||"string"!=typeof ye)return;if($e.get(ye))return $e.get(ye);const Z=ye.replace(/FromIndex$/,""),J=ye!==Z,re=Ce.includes(Z);if(!(Z in(J?IDBIndex:IDBObjectStore).prototype)||!re&&!we.includes(Z))return;const te=function(){var Ue=(0,g.Z)(function*(Le,...at){const Zt=this.transaction(Le,re?"readwrite":"readonly");let Nt=Zt.store;return J&&(Nt=Nt.index(at.shift())),(yield Promise.all([Nt[Z](...at),re&&Zt.done]))[0]});return function(at){return Ue.apply(this,arguments)}}();return $e.set(ye,te),te}!function De(U){Ie=U(Ie)}(U=>zx(Gx({},U),{get:(ye,Z,J)=>Fe(ye,Z)||U.get(ye,Z,J),has:(ye,Z)=>!!Fe(ye,Z)||U.has(ye,Z)}))},5861:(tt,_e,N)=>{function g(k,ne,he,pe,se,ge,ce){try{var j=k[ge](ce),H=j.value}catch(Y){return void he(Y)}j.done?ne(H):Promise.resolve(H).then(pe,se)}function Q(k){return function(){var ne=this,he=arguments;return new Promise(function(pe,se){var ge=k.apply(ne,he);function ce(H){g(ge,pe,se,ce,j,"next",H)}function j(H){g(ge,pe,se,ce,j,"throw",H)}ce(void 0)})}}N.d(_e,{Z:()=>Q})}},tt=>{tt(tt.s=9089)}]);